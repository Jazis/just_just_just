!function(e){e.fn.checkup=function(n){return e.fn.checkup.methods[n]?e.fn.checkup.methods[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist"):e.fn.checkup.methods.init.apply(this,arguments)},e.fn.checkup.methods={init:function(n){n=e.extend({},e.fn.checkup.options,n);var t=this,p=function(e,t){e.is(":checked")?(e.addClass("active"),t.length&&t.addClass("active"),n.onChange(e)):(e.removeClass("active"),t.length&&t.removeClass("active"))},o=function(e,t){e.is(":checked")?(e.addClass("active"),t.length&&t.addClass("active"),n.onChange(e)):(e.removeClass("active"),t.length&&t.removeClass("active"))},r=function(e,n){e.is(":disabled")?(e.addClass("disabled"),n.length&&n.addClass("disabled")):(e.removeClass("disabled"),n.length&&n.removeClass("disabled"))};return this.each(function(){var n,i,s,a=e(this),c=t.filter('[name="'+a.attr("name")+'"]'),l=a.parent("label"),d=a.attr("type");switch(d){case"checkbox":a.unbind("change",n).bind("change",function(){p(a,l)});break;case"radio":a.unbind("change",n).bind("change",function(){o(a,l),c.trigger("changeonce")}).unbind("changeonce",i).bind("changeonce",function(){o(a,l)});break;default:return!1}a.unbind("disabled",s).bind("disabled",function(){r(a,l)}),a.trigger("change").trigger("disabled"),a.bind("destroy",function u(){a.unbind("change",n).unbind("changeonce",i).unbind("disabled",s).unbind("destroy",u).removeClass("active disabled")})})},checked:function(n){return this.each(function(){e(this).prop("checked",n).trigger("change")})},disabled:function(n){return this.each(function(){e(this).prop("disabled",n).trigger("disabled")})},destroy:function(){return this.each(function(){e(this).trigger("destroy")})}},e.fn.checkup.options={onChange:function(){}}}(jQuery),function(e){e.fn.select=function(n){return e.fn.select.methods[n]?e.fn.select.methods[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist"):e.fn.select.methods.init.apply(this,arguments)},e.fn.select.methods={init:function(n){n=e.extend({},e.fn.select.options,n);var t='<div class="select-container '+n.container+'"><div class="select-input"></div><div class="select-list"><div class="select-holder"></div></div></div>';return this.each(function(){function p(){v="",d.children("option").each(function(n,t){v+='<div class="select-item" rel="'+n+'"><span>'+e(this).text()+"</span></div>"}),f.empty().append(v),o=f.children(),r=d.children("option"),o.bind("click",function(){var n=e(this).attr("rel");e(r[n]).prop("selected",!0),d.trigger("change"),u.removeClass("active"),g.unbind("click",c)})}var o,r,i,s,a,c,l,d=e(this),u=e(t),h=u.find(".select-input"),f=u.find(".select-holder"),v="",g=e(document);i=function(){h.text(r.filter(":selected").text()),o.removeClass("active"),e(o[this.selectedIndex]).addClass("active")},s=function(e){u.prev().hasClass("f-disabled")||(u.toggleClass("active"),u.hasClass("active")&&setTimeout(function(){g.bind("click",c)},50))},c=function(){u.removeClass("active"),g.unbind("click",c)},d.after(u).hide(),p(),n.onLoad(d,u,f),d.bind("change",i),h.bind("click",s),d.trigger("change"),l=function(){p()},a=function(){n.onDestroy(d,u,f),u.remove(),d.show().unbind("destroy",a).unbind("update",l).unbind("change",i)},d.bind("update",l).bind("destroy",a)})},update:function(){return this.each(function(){e(this).trigger("update")})},destroy:function(){return this.each(function(){e(this).trigger("destroy")})}},e.fn.select.options={container:"",onLoad:function(){},onDestroy:function(){}}}(jQuery),function(e){e.popup=function(n){if("string"==typeof n){var t=e('<a href="'+n+'"></a>');return e.fn.popup.methods.init.apply(t,Array.prototype.slice.call(arguments,1)).trigger("open")}e.error("Error")},e.fn.popup=function(n){return e.fn.popup.methods[n]?e.fn.popup.methods[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist"):e.fn.popup.methods.init.apply(this,arguments)},e.fn.popup.methods={init:function(n,t){var p=this.selector.replace(/[#]+/g,"1_").replace(/[\.]+/g,"2_").replace(/[^a-z0-9_]+/gi,"").slice(0,50);n=e.extend({},e.fn.popup.options,n),t=e.fn.popup.functions;var o,r=n.template?'<div class="popup">'+n.template+'<div class="popup-preload">Загрузка...</div></div>':'<div class="popup"><div class="popup-wrapper"><div class="popup-control"><a class="popup-but-prev" href="#prev"></a><a class="popup-but-next" href="#next"></a></div><div class="popup-holder"></div><div class="popup-title"></div><div class="popup-counter"></div><div class="popup-error">Error</div><a class="popup-but-close" href="#close">Close</a></div><div class="popup-preload">Loading...</div></div>',i='<div class="popup-holder"><div class="popup-content"></div></div>',s=e("body"),a={o:e(n.overlay),l:e(n.layer),p:e(r),h:e(i)},c={open:!1},l={prev:null,next:null},d=e.fn.popup.keeper[p]={},u=!1,h=!1;return a.p_wrapper=a.p.find(".popup-wrapper"),a.p_holder=a.p.find(".popup-holder"),a.p_close=a.p.find(".popup-but-close"),a.p_prev=a.p.find(".popup-but-prev"),a.p_next=a.p.find(".popup-but-next"),a.p_preload=a.p.find(".popup-preload"),a.p_error=a.p.find(".popup-error"),a.p_counter=a.p.find(".popup-counter"),d.ar=this,d.g_ar={},d.total=d.ar.length,n.counter||a.p_counter.addClass("disabled"),d.init=function(e){d.g_ar=t.groupElements(0,d.total,d.ar,{},n),e.bind("click open",d.popup_open),e.bind("close",d.popup_close)},d.popup_open=function(){return c.open||(h=e.fn.popup.line.length?!0:!1,n.onBeforeOpen(e(this),a.p),c.open=t.openPopup(a.o,a.l,a.p,a.p_wrapper,a.p_preload,a.p_error,s,h,n),n.onOpen(e(this),a.p),e(document).bind("keyup",d.keypress)),o=e(this),a.p_holder_old=a.p_holder,a.p_holder=a.h.clone().hide(),l=t.setPopup(e(this),d.g_ar[this.getAttribute(n.group)],a.p_prev,a.p_next),u=t.loadPopup(e(this),a.p,a.p_wrapper,a.p_holder,a.p_holder_old,a.p_preload,a.p_error,u,n,d.g_ar[this.getAttribute(n.group)]),n.onSet(e(this),a.p,l.prev,l.next),t.setCounter(a.p_counter,l.index,d.total,n.counterText),!1},d.popup_close=function(){return c.open&&(n.onClose(a.p),t.unloadPopup(a.p_wrapper,a.p_preload,a.p_error,n),c.open=t.closePopup(a.o,a.l,a.p,s,h,n),a.p_holder.children().remove(),e(document).unbind("keyup",d.keypress)),!1},d.popup_prev=function(){return l.prev&&(t.unloadPopup(a.p_wrapper,a.p_preload,a.p_error,n),l.prev.trigger("click")),!1},d.popup_next=function(){return l.next&&(t.unloadPopup(a.p_wrapper,a.p_preload,a.p_error,n),l.next.trigger("click")),!1},d.destroy=function(){d.ar.unbind("click open",d.popup_open),a.p.remove()},d.click=function(e){return e.target&&e.target!==e.currentTarget?void 0:(d.popup_close.apply(this),!1)},d.keypress=function(e){27==e.which||27==e.keyCode?d.popup_close.apply(this):37==e.which||37==e.keyCode?d.popup_prev.apply(this):(39==e.which||39==e.keyCode)&&d.popup_next.apply(this)},a.p.children().bind("click",function(e){e.stopPropagation()}),a.p_close.add(a.p).bind("click close",d.popup_close),a.p_prev.bind("click",d.popup_prev),a.p_next.bind("click",d.popup_next),a.p.addClass(n.popupClass),d.init(d.ar),this},update:function(){var n,t,p=this.selector.replace(/[#]+/g,"1_").replace(/[\.]+/g,"2_").replace(/[^a-z0-9_]+/gi,"").slice(0,50),o=e.fn.popup.keeper[p];return o&&(n=this,t=n.not(o.ar)),o.ar=n,o.total=n.length,o.init(t),t},destroy:function(){var n=this.selector.replace(/[#]+/g,"1_").replace(/[\.]+/g,"2_").replace(/[^a-z0-9_]+/gi,"").slice(0,50),t=e.fn.popup.keeper[n];t.destroy(),e.fn.popup.keeper[n]=t={}}},e.fn.popup.functions={groupElements:function(n,t,p,o,r){for(var i=n;t>i;i++){var s=p[i].getAttribute(r.group);s||(s="g"+(r.grouped?0:i),p[i].setAttribute(r.group,s)),o[s]||(o[s]=[]),o[s].push(e(p[i])),p[i].setAttribute("data-popup-index",o[s].length-1)}return o},openPopup:function(n,t,p,o,r,i,s,a,c){return t.append(p),n.css({display:"block"}).addClass(c.overlayClass),t.addClass(c.layerClass),p.css({display:"block"}),o.css({display:"none"}),r.css({display:"block"}),i.css({display:"none"}),c.block&&s.css("overflow","hidden"),a&&e.fn.popup.line[e.fn.popup.line.length-1].css({display:"none"}),e.fn.popup.line.push(p),!0},setPopup:function(e,n,t,p){var o=e.data("popup-index"),r=n.length,i={prev:o?!0:!1,next:o!=r-1?!0:!1},s={index:o,prev:i.prev?n[o-1]:null,next:i.next?n[o+1]:null};return t.removeClass("disabled").addClass(i.prev?"":"disabled"),p.removeClass("disabled").addClass(i.next?"":"disabled"),s},loadPopup:function(n,t,p,o,r,i,s,a,c,l){function d(){return r.remove(),p.css({display:"block"}).css({"max-width":""}),o.css({display:"block"}),i.css({display:"none"}),h(),c.onLoad(n,t,l),v?v:!1}function u(){return r.remove(),p.css({display:"block"}).css({"max-width":""}),i.css({display:"none"}),s.css({display:"block"}),h(),!1}function h(){var e="auto"==c.width&&"image"==c.type?f.get(0).width:c.width,n=(f.get(0).width<f.get(0).height?e:680,c.height);p.css({"max-width":e}),y.css({height:n})}var f,v,g=n.attr("title"),b=p.find(".popup-title"),y=o.find(".popup-content");switch(c.type){case"html":f=e(n.attr("href").replace(/[^0-9a-zA-Z_#\-]+/g,"")),v=f.parent();break;case"iframe":f=e('<iframe class="popup-content-iframe" src="'+n.attr("href")+'" style="width: 100%; height: 100%;" frameborder="0" allowfullscreen="true">Error</iframe>');break;case"image":f=e('<img class="popup-content-image" src="'+n.attr("href")+'" alt="" />');break;case"ajax":c.request.url=n.attr("href"),f=e('<div class="popup-content-ajax"></div>');break;case"inline":f=e("<div>"+c.content+"</div>")}r.after(o),g?b.text(g).removeClass("disabled"):b.text("").addClass("disabled");try{if(1!=f.length)throw new Error("Error");switch(c.type){case"iframe":case"image":y.html(f),f.bind("load",function(){return d()}).bind("error",function(){return u()});break;case"html":return y.html(f),a&&a.append(r.find(".popup-content").children()),d();case"ajax":e.ajax(c.request).done(function(e){return y.html(e),d()}).fail(function(){return u()});break;case"inline":return y.html(f),d()}}catch(m){return u()}},setCounter:function(e,n,t,p){e.html(p.replace("{current}",n+1).replace("{total}",t))},unloadPopup:function(e,n,t,p){n.css({display:"block"}),t.css({display:"none"})},closePopup:function(n,t,p,o,r,i){return r||(n.css({display:"none"}).removeClass(i.overlayClass),t.removeClass(i.layerClass),i.block&&o.css({overflow:""})),p.detach(),e.fn.popup.line.pop(),r&&e.fn.popup.line[e.fn.popup.line.length-1].css({display:"block"}),!1}},e.fn.popup.options={template:null,overlay:null,layer:"body",overlayClass:"",layerClass:"",popupClass:"",block:!0,grouped:!0,content:"",counter:!1,counterText:"{current} / {total}",group:"rel",type:"image",width:"auto",height:"auto",request:{},onBeforeOpen:function(){},onOpen:function(){},onClose:function(){},onLoad:function(){},onSet:function(){}},e.fn.popup.keeper={},e.fn.popup.line=[]}(jQuery);