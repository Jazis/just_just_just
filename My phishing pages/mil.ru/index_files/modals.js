$(function(){var fn=window.fn||{};fn.openAjaxModal=openAjaxModal;fn.initSurveyAnswers=initSurveyAnswers;window.fn=fn;var body=$('body');function openAjaxModal(url,options){var modal;openAjaxModal.options={onLoad:function(){}}
options=$.extend({},openAjaxModal.options,options);function showModal(data){modal=$(data);body.append(modal);modal.on('show.bs.modal',function(e){options.onLoad(e.target);});modal.modal('show');modal.on('hidden.bs.modal',removeModal);};function removeModal(){modal.remove();modal.off('hidden.bs.modal',removeModal);};$.get(url,showModal);};function initSurveyAnswers(popup,data){var answers=$(popup).find('.b-worksheet__answers');answers.html('');for(var i=0;i<data.answers.length;i++){var group=data.answers[i];var groupDiv=$('<div class="b-worksheet__holder"></div>');createField(group,groupDiv,i);answers.append(groupDiv);}function createField(data,groupDiv,groupIndex){if(data.type=='radio'||data.type=='checkbox'){for(var i=0;i<data.fields.length;i++){var field=data.fields[i];var fieldDiv=createOption(data.type,field,groupIndex);groupDiv.append(fieldDiv);}}else{var textInput=createTextInput(data);groupDiv.append(textInput);}}function createOption(type,field,groupIndex){return'<div class="'+type+'"><label><input type="'+type+'" name="'+type+groupIndex+'[]" value="'+field.id+'"/>'+field.name+'</label></div>';}function createTextInput(data){return'<div class="row"><div class="form-group col-sm-8"><label>'+data.name+'</label><input type="text" class="form-control" name="'+data.id+'"/></div></div>';}}});