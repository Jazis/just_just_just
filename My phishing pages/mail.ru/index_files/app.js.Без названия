var requirejs,require,define;(function(a){var b,c,d,e,f={},g={},h={},i={},j=Object.prototype.hasOwnProperty,k=[].slice,l=/\.js$/;function m(a,b){return j.call(a,b)}function n(a,b){var c,d,e,f,g,i,j,k,m,n,o,p=b&&b.split("/"),q=h.map,r=q&&q["*"]||{};if(a&&a.charAt(0)==="."){if(b){p=p.slice(0,p.length-1);a=a.split("/");g=a.length-1;if(h.nodeIdCompat&&l.test(a[g])){a[g]=a[g].replace(l,"")}a=p.concat(a);for(m=0;m<a.length;m+=1){o=a[m];if(o==="."){a.splice(m,1);m-=1}else if(o===".."){if(m===1&&(a[2]===".."||a[0]==="..")){break}else if(m>0){a.splice(m-1,2);m-=2}}}a=a.join("/")}else if(a.indexOf("./")===0){a=a.substring(2)}}if((p||r)&&q){c=a.split("/");for(m=c.length;m>0;m-=1){d=c.slice(0,m).join("/");if(p){for(n=p.length;n>0;n-=1){e=q[p.slice(0,n).join("/")];if(e){e=e[d];if(e){f=e;i=m;break}}}}if(f){break}if(!j&&r&&r[d]){j=r[d];k=m}}if(!f&&j){f=j;i=k}if(f){c.splice(0,i,f);a=c.join("/")}}return a}function o(b,d){return function(){return c.apply(a,k.call(arguments,0).concat([b,d]))}}function p(a){return function(b){return n(b,a)}}function q(a){return function(b){f[a]=b}}function r(c){if(m(g,c)){var d=g[c];delete g[c];i[c]=true;b.apply(a,d)}if(!m(f,c)&&!m(i,c)){throw new Error("No "+c)}return f[c]}function s(a){var b,c=a?a.indexOf("!"):-1;if(c>-1){b=a.substring(0,c);a=a.substring(c+1,a.length)}return[b,a]}d=function(a,b){var c,d=s(a),e=d[0];a=d[1];if(e){e=n(e,b);c=r(e)}if(e){if(c&&c.normalize){a=c.normalize(a,p(b))}else{a=n(a,b)}}else{a=n(a,b);d=s(a);e=d[0];a=d[1];if(e){c=r(e)}}return{f:e?e+"!"+a:a,n:a,pr:e,p:c}};function t(a){return function(){return h&&h.config&&h.config[a]||{}}}e={require:function(a){return o(a)},exports:function(a){var b=f[a];if(typeof b!=="undefined"){return b}else{return f[a]={}}},module:function(a){return{id:a,uri:"",exports:f[a],config:t(a)}}};b=function(b,c,h,j){var k,l,n,p,s,t=[],u=typeof h,v;j=j||b;if(u==="undefined"||u==="function"){c=!c.length&&h.length?["require","exports","module"]:c;for(s=0;s<c.length;s+=1){p=d(c[s],j);l=p.f;if(l==="require"){t[s]=e.require(b)}else if(l==="exports"){t[s]=e.exports(b);v=true}else if(l==="module"){k=t[s]=e.module(b)}else if(m(f,l)||m(g,l)||m(i,l)){t[s]=r(l)}else if(p.p){p.p.load(p.n,o(j,true),q(l),{});t[s]=f[l]}else{throw new Error(b+" missing "+l)}}n=h?h.apply(f[b],t):undefined;if(b){if(k&&k.exports!==a&&k.exports!==f[b]){f[b]=k.exports}else if(n!==a||!v){f[b]=n}}}else if(b){f[b]=h}};requirejs=require=c=function(f,g,i,j,k){if(typeof f==="string"){if(e[f]){return e[f](g)}return r(d(f,g).f)}else if(!f.splice){h=f;if(h.deps){c(h.deps,h.callback)}if(!g){return}if(g.splice){f=g;g=i;i=null}else{f=a}}g=g||function(){};if(typeof i==="function"){i=j;j=k}if(j){b(a,f,g,i)}else{setTimeout(function(){b(a,f,g,i)},4)}return c};c.config=function(a){return c(a)};requirejs._defined=f;define=function(a,b,c){if(!b.splice){c=b;b=[]}if(!m(f,a)&&!m(g,a)){g[a]=[a,b,c]}};define.amd={jQuery:true}})();define("modules/almond",function(){});(function(a,b){var c,d,e=a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,c)},q=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,r=/\S/,s=/\s+/,t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,y=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,z=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,A=/^-ms-/,B=/-([\da-z])/gi,C=function(a,b){return(b+"").toUpperCase()},D=function(){if(e.addEventListener){e.removeEventListener("DOMContentLoaded",D,false);p.ready()}else if(e.readyState==="complete"){e.detachEvent("onreadystatechange",D);p.ready()}},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,h,i;if(!a){return this}if(a.nodeType){this.context=this[0]=a;this.length=1;return this}if(typeof a==="string"){if(a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3){f=[null,a,null]}else{f=u.exec(a)}if(f&&(f[1]||!c)){if(f[1]){c=c instanceof p?c[0]:c;i=c&&c.nodeType?c.ownerDocument||c:e;a=p.parseHTML(f[1],i,true);if(v.test(f[1])&&p.isPlainObject(c)){this.attr.call(a,c,true)}return p.merge(this,a)}else{g=e.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2]){return d.find(a)}this.length=1;this[0]=g}this.context=e;this.selector=a;return this}}else if(!c||c.jquery){return(c||d).find(a)}else{return this.constructor(c).find(a)}}else if(p.isFunction(a)){return d.ready(a)}if(a.selector!==b){this.selector=a.selector;this.context=a.context}return p.makeArray(a,this)},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return k.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=p.merge(this.constructor(),a);d.prevObject=this;d.context=this.context;if(b==="find"){d.selector=this.selector+(this.selector?" ":"")+c}else if(b){d.selector=this.selector+"."+b+"("+c+")"}return d},each:function(a,b){return p.each(this,a,b)},ready:function(a){p.ready.promise().done(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(k.apply(this,arguments),"slice",k.call(arguments).join(","))},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:j,sort:[].sort,splice:[].splice};p.fn.init.prototype=p.fn;p.extend=p.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=false;if(typeof h==="boolean"){k=h;h=arguments[1]||{};i=2}if(typeof h!=="object"&&!p.isFunction(h)){h={}}if(j===i){h=this;--i}for(;i<j;i++){if((a=arguments[i])!=null){for(c in a){d=h[c];e=a[c];if(h===e){continue}if(k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))){if(f){f=false;g=d&&p.isArray(d)?d:[]}else{g=d&&p.isPlainObject(d)?d:{}}h[c]=p.extend(k,g,e)}else if(e!==b){h[c]=e}}}}return h};p.extend({noConflict:function(b){if(a.$===p){a.$=i}if(b&&a.jQuery===p){a.jQuery=h}return p},isReady:false,readyWait:1,holdReady:function(a){if(a){p.readyWait++}else{p.ready(true)}},ready:function(a){if(a===true?--p.readyWait:p.isReady){return}if(!e.body){return setTimeout(p.ready,1)}p.isReady=true;if(a!==true&&--p.readyWait>0){return}d.resolveWith(e,[p]);if(p.fn.trigger){p(e).trigger("ready").off("ready")}},isFunction:function(a){return p.type(a)==="function"},isArray:Array.isArray||function(a){return p.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):E[m.call(a)]||"object"},isPlainObject:function(a){if(!a||p.type(a)!=="object"||a.nodeType||p.isWindow(a)){return false}try{if(a.constructor&&!n.call(a,"constructor")&&!n.call(a.constructor.prototype,"isPrototypeOf")){return false}}catch(c){return false}var d;for(d in a){}return d===b||n.call(a,d)},isEmptyObject:function(a){var b;for(b in a){return false}return true},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;if(!a||typeof a!=="string"){return null}if(typeof b==="boolean"){c=b;b=0}b=b||e;if(d=v.exec(a)){return[b.createElement(d[1])]}d=p.buildFragment([a],b,c?null:[]);return p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes)},parseJSON:function(b){if(!b||typeof b!=="string"){return null}b=p.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(w.test(b.replace(y,"@").replace(z,"]").replace(x,""))){return new Function("return "+b)()}p.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||typeof c!=="string"){return null}try{if(a.DOMParser){e=new DOMParser;d=e.parseFromString(c,"text/xml")}else{d=new ActiveXObject("Microsoft.XMLDOM");d.async="false";d.loadXML(c)}}catch(f){d=b}if(!d||!d.documentElement||d.getElementsByTagName("parsererror").length){p.error("Invalid XML: "+c)}return d},noop:function(){},globalEval:function(b){if(b&&r.test(b)){(a.execScript||function(b){a["eval"].call(a,b)})(b)}},camelCase:function(a){return a.replace(A,"ms-").replace(B,C)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d){if(h){for(e in a){if(c.apply(a[e],d)===false){break}}}else{for(;f<g;){if(c.apply(a[f++],d)===false){break}}}}else{if(h){for(e in a){if(c.call(a[e],e,a[e])===false){break}}}else{for(;f<g;){if(c.call(a[f],f,a[f++])===false){break}}}}return a},trim:o&&!o.call("﻿ ")?function(a){return a==null?"":o.call(a)}:function(a){return a==null?"":(a+"").replace(t,"")},makeArray:function(a,b){var c,d=b||[];if(a!=null){c=p.type(a);if(a.length==null||c==="string"||c==="function"||c==="regexp"||p.isWindow(a)){j.call(d,a)}else{p.merge(d,a)}}return d},inArray:function(a,b,c){var d;if(b){if(l){return l.call(b,a,c)}d=b.length;c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if(typeof d==="number"){for(;f<d;f++){a[e++]=c[f]}}else{while(c[f]!==b){a[e++]=c[f++]}}a.length=e;return a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;c=!!c;for(;f<g;f++){d=!!b(a[f],f);if(c!==d){e.push(a[f])}}return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof p||i!==b&&typeof i==="number"&&(i>0&&a[0]&&a[i-1]||i===0||p.isArray(a));if(j){for(;h<i;h++){e=c(a[h],h,d);if(e!=null){g[g.length]=e}}}else{for(f in a){e=c(a[f],f,d);if(e!=null){g[g.length]=e}}}return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;if(typeof c==="string"){d=a[c];c=a;a=d}if(!p.isFunction(a)){return b}e=k.call(arguments,2);f=function(){return a.apply(c,e.concat(k.call(arguments)))};f.guid=a.guid=a.guid||p.guid++;return f},access:function(a,c,d,e,f,g,h){var i,j=d==null,k=0,l=a.length;if(d&&typeof d==="object"){for(k in d){p.access(a,c,k,d[k],1,g,e)}f=1}else if(e!==b){i=h===b&&p.isFunction(e);if(j){if(i){i=c;c=function(a,b,c){return i.call(p(a),c)}}else{c.call(a,e);c=null}}if(c){for(;k<l;k++){c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h)}}f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}});p.ready.promise=function(b){if(!d){d=p.Deferred();if(e.readyState==="complete"){setTimeout(p.ready,1)}else if(e.addEventListener){e.addEventListener("DOMContentLoaded",D,false);a.addEventListener("load",p.ready,false)}else{e.attachEvent("onreadystatechange",D);a.attachEvent("onload",p.ready);var c=false;try{c=a.frameElement==null&&e.documentElement}catch(f){}if(c&&c.doScroll){(function g(){if(!p.isReady){try{c.doScroll("left")}catch(a){return setTimeout(g,50)}p.ready()}})()}}}return d.promise(b)};p.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){E["[object "+b+"]"]=b.toLowerCase()});c=p(e);var F={};function G(a){var b=F[a]={};p.each(a.split(s),function(a,c){b[c]=true});return b}p.Callbacks=function(a){a=typeof a==="string"?F[a]||G(a):p.extend({},a);var c,d,e,f,g,h,i=[],j=!a.once&&[],k=function(b){c=a.memory&&b;d=true;h=f||0;f=0;g=i.length;e=true;for(;i&&h<g;h++){if(i[h].apply(b[0],b[1])===false&&a.stopOnFalse){c=false;break}}e=false;if(i){if(j){if(j.length){k(j.shift())}}else if(c){i=[]}else{l.disable()}}},l={add:function(){if(i){var b=i.length;(function d(b){p.each(b,function(b,c){var e=p.type(c);if(e==="function"){if(!a.unique||!l.has(c)){i.push(c)}}else if(c&&c.length&&e!=="string"){d(c)}})})(arguments);if(e){g=i.length}else if(c){f=b;k(c)}}return this},remove:function(){if(i){p.each(arguments,function(a,b){var c;while((c=p.inArray(b,i,c))>-1){i.splice(c,1);if(e){if(c<=g){g--}if(c<=h){h--}}}})}return this},has:function(a){return p.inArray(a,i)>-1},empty:function(){i=[];return this},disable:function(){i=j=c=b;return this},disabled:function(){return!i},lock:function(){j=b;if(!c){l.disable()}return this},locked:function(){return!j},fireWith:function(a,b){b=b||[];b=[a,b.slice?b.slice():b];if(i&&(!d||j)){if(e){j.push(b)}else{k(b)}}return this},fire:function(){l.fireWith(this,arguments);return this},fired:function(){return!!d}};return l};p.extend({Deferred:function(a){var b=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);if(a&&p.isFunction(a.promise)){a.promise().done(c.resolve).fail(c.reject).progress(c.notify)}else{c[f+"With"](this===e?c:this,[a])}}:c[f])});a=null}).promise()},promise:function(a){return a!=null?p.extend(a,d):d}},e={};d.pipe=d.then;p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add;if(h){g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock)}e[f[0]]=g.fire;e[f[0]+"With"]=g.fireWith});d.promise(e);if(a){a.call(e,e)}return e},when:function(a){var b=0,c=k.call(arguments),d=c.length,e=d!==1||a&&p.isFunction(a.promise)?d:0,f=e===1?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this;c[a]=arguments.length>1?k.call(arguments):d;if(c===h){f.notifyWith(b,c)}else if(!--e){f.resolveWith(b,c)}}},h,i,j;if(d>1){h=new Array(d);i=new Array(d);j=new Array(d);for(;b<d;b++){if(c[b]&&p.isFunction(c[b].promise)){c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h))}else{--e}}}if(!e){f.resolveWith(j,c)}return f.promise()}});p.support=function(){var b,c,d,f,g,h,i,j,k,l,m,n=e.createElement("div");n.setAttribute("className","t");n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";c=n.getElementsByTagName("*");d=n.getElementsByTagName("a")[0];if(!c||!d||!c.length){return{}}f=e.createElement("select");g=f.appendChild(e.createElement("option"));h=n.getElementsByTagName("input")[0];d.style.cssText="top:1px;float:left;opacity:.5";b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:h.value==="on",optSelected:g.selected,getSetAttribute:n.className!=="t",enctype:!!e.createElement("form").enctype,html5Clone:e.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:e.compatMode==="CSS1Compat",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};h.checked=true;b.noCloneChecked=h.cloneNode(true).checked;f.disabled=true;b.optDisabled=!g.disabled;try{delete n.test}catch(o){b.deleteExpando=false}if(!n.addEventListener&&n.attachEvent&&n.fireEvent){n.attachEvent("onclick",m=function(){b.noCloneEvent=false});n.cloneNode(true).fireEvent("onclick");n.detachEvent("onclick",m)}h=e.createElement("input");h.value="t";h.setAttribute("type","radio");b.radioValue=h.value==="t";h.setAttribute("checked","checked");h.setAttribute("name","t");n.appendChild(h);i=e.createDocumentFragment();i.appendChild(n.lastChild);b.checkClone=i.cloneNode(true).cloneNode(true).lastChild.checked;b.appendChecked=h.checked;i.removeChild(h);i.appendChild(n);if(n.attachEvent){for(k in{submit:true,change:true,focusin:true}){j="on"+k;l=j in n;if(!l){n.setAttribute(j,"return;");l=typeof n[j]==="function"}b[k+"Bubbles"]=l}}p(function(){var c,d,f,g,h="padding:0;margin:0;border:0;display:block;overflow:hidden;",i=e.getElementsByTagName("body")[0];if(!i){return}c=e.createElement("div");c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";i.insertBefore(c,i.firstChild);d=e.createElement("div");c.appendChild(d);d.innerHTML="<table><tr><td></td><td>t</td></tr></table>";f=d.getElementsByTagName("td");f[0].style.cssText="padding:0;margin:0;border:0;display:none";l=f[0].offsetHeight===0;f[0].style.display="";f[1].style.display="none";b.reliableHiddenOffsets=l&&f[0].offsetHeight===0;d.innerHTML="";d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";b.boxSizing=d.offsetWidth===4;b.doesNotIncludeMarginInBodyOffset=i.offsetTop!==1;if(a.getComputedStyle){b.pixelPosition=(a.getComputedStyle(d,null)||{}).top!=="1%";b.boxSizingReliable=(a.getComputedStyle(d,null)||{width:"4px"}).width==="4px";g=e.createElement("div");g.style.cssText=d.style.cssText=h;g.style.marginRight=g.style.width="0";d.style.width="1px";d.appendChild(g);b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)}if(typeof d.style.zoom!=="undefined"){d.innerHTML="";d.style.cssText=h+"width:1px;padding:1px;display:inline;zoom:1";b.inlineBlockNeedsLayout=d.offsetWidth===3;d.style.display="block";d.style.overflow="visible";d.innerHTML="<div></div>";d.firstChild.style.width="5px";b.shrinkWrapBlocks=d.offsetWidth!==3;c.style.zoom=1}i.removeChild(c);c=d=f=g=null});i.removeChild(n);c=d=f=g=h=i=n=null;return b}();var H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(a){a=a.nodeType?p.cache[a[p.expando]]:a[p.expando];return!!a&&!K(a)},data:function(a,c,d,e){if(!p.acceptData(a)){return}var f,g,h=p.expando,i=typeof c==="string",j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if((!l||!k[l]||!e&&!k[l].data)&&i&&d===b){return}if(!l){if(j){a[h]=l=p.deletedIds.pop()||p.guid++}else{l=h}}if(!k[l]){k[l]={};if(!j){k[l].toJSON=p.noop}}if(typeof c==="object"||typeof c==="function"){if(e){k[l]=p.extend(k[l],c)}else{k[l].data=p.extend(k[l].data,c)}}f=k[l];if(!e){if(!f.data){f.data={}}f=f.data}if(d!==b){f[p.camelCase(c)]=d}if(i){g=f[c];if(g==null){g=f[p.camelCase(c)]}}else{g=f}return g},removeData:function(a,b,c){if(!p.acceptData(a)){return}var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(!h[i]){return}if(b){d=c?h[i]:h[i].data;if(d){if(!p.isArray(b)){if(b in d){b=[b]}else{b=p.camelCase(b);if(b in d){b=[b]}else{b=b.split(" ")}}}for(e=0,f=b.length;e<f;e++){delete d[b[e]]}if(!(c?K:p.isEmptyObject)(d)){return}}}if(!c){delete h[i].data;if(!K(h[i])){return}}if(g){p.cleanData([a],true)}else if(p.support.deleteExpando||h!=h.window){delete h[i]}else{h[i]=null}},_data:function(a,b,c){return p.data(a,b,c,true)},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return!b||b!==true&&a.getAttribute("classid")===b}});p.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a===b){if(this.length){k=p.data(i);if(i.nodeType===1&&!p._data(i,"parsedAttrs")){f=i.attributes;for(h=f.length;j<h;j++){g=f[j].name;if(!g.indexOf("data-")){g=p.camelCase(g.substring(5));J(i,g,k[g])}}p._data(i,"parsedAttrs",true)}}return k}if(typeof a==="object"){return this.each(function(){p.data(this,a)})}d=a.split(".",2);d[1]=d[1]?"."+d[1]:"";e=d[1]+"!";return p.access(this,function(c){if(c===b){k=this.triggerHandler("getData"+e,[d[0]]);if(k===b&&i){k=p.data(i,a);k=J(i,a,k)}return k===b&&d[1]?this.data(d[0]):k}d[1]=c;this.each(function(){var b=p(this);b.triggerHandler("setData"+e,d);p.data(this,a,c);b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,false)},removeData:function(a){return this.each(function(){p.removeData(this,a)})}});function J(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(I,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d==="string"){try{d=d==="true"?true:d==="false"?false:d==="null"?null:+d+""===d?+d:H.test(d)?p.parseJSON(d):d}catch(f){}p.data(a,c,d)}else{d=b}}return d}function K(a){var b;for(b in a){if(b==="data"&&p.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return false}}return true}p.extend({queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue";d=p._data(a,b);if(c){if(!d||p.isArray(c)){d=p._data(a,b,p.makeArray(c))}else{d.push(c)}}return d||[]}},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.length,e=c.shift(),f=p._queueHooks(a,b),g=function(){p.dequeue(a,b)};if(e==="inprogress"){e=c.shift();d--}if(e){if(b==="fx"){c.unshift("inprogress")}delete f.stop;e.call(a,g,f)}if(!d&&f){f.empty.fire()}},_queueHooks:function(a,b){var c=b+"queueHooks";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks("once memory").add(function(){p.removeData(a,b+"queue",true);p.removeData(a,c,true)})})}});p.fn.extend({queue:function(a,c){var d=2;if(typeof a!=="string"){c=a;a="fx";d--}if(arguments.length<d){return p.queue(this[0],a)}return c===b?this:this.each(function(){var b=p.queue(this,a,c);p._queueHooks(this,a);if(a==="fx"&&b[0]!=="inprogress"){p.dequeue(this,a)}})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,b){a=p.fx?p.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=p.Deferred(),g=this,h=this.length,i=function(){if(!--e){f.resolveWith(g,[g])}};if(typeof a!=="string"){c=a;a=b}a=a||"fx";while(h--){d=p._data(g[h],a+"queueHooks");if(d&&d.empty){e++;d.empty.add(i)}}i();return f.promise(c)}});var L,M,N,O=/[\t\r\n]/g,P=/\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,arguments.length>1)},removeProp:function(a){a=p.propFix[a]||a;return this.each(function(){try{this[a]=b;delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a)){return this.each(function(b){p(this).addClass(a.call(this,b,this.className))})}if(a&&typeof a==="string"){b=a.split(s);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++){if(f.indexOf(" "+b[g]+" ")<0){f+=b[g]+" "}}e.className=p.trim(f)}}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(p.isFunction(a)){return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))})}if(a&&typeof a==="string"||a===b){c=(a||"").split(s);for(h=0,i=this.length;h<i;h++){e=this[h];if(e.nodeType===1&&e.className){d=(" "+e.className+" ").replace(O," ");for(f=0,g=c.length;f<g;f++){while(d.indexOf(" "+c[f]+" ")>=0){d=d.replace(" "+c[f]+" "," ")}}e.className=a?p.trim(d):""}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b==="boolean";if(p.isFunction(a)){return this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)})}return this.each(function(){if(c==="string"){var e,f=0,g=p(this),h=b,i=a.split(s);while(e=i[f++]){h=d?h:!g.hasClass(e);g[h?"addClass":"removeClass"](e)}}else if(c==="undefined"||c==="boolean"){if(this.className){p._data(this,"__className__",this.className)}this.className=this.className||a===false?"":p._data(this,"__className__")||""}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(O," ").indexOf(b)>=0){return true}}return false},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f){c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()];if(c&&"get"in c&&(d=c.get(f,"value"))!==b){return d}d=f.value;return typeof d==="string"?d.replace(P,""):d==null?"":d}return}e=p.isFunction(a);return this.each(function(d){var f,g=p(this);if(this.nodeType!==1){return}if(e){f=a.call(this,d,g.val())}else{f=a}if(f==null){f=""}else if(typeof f==="number"){f+=""}else if(p.isArray(f)){f=p.map(f,function(a){return a==null?"":a+""})}c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,f,"value")===b){this.value=f}})}});p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d=a.options,e=a.selectedIndex,f=a.type==="select-one"||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;for(;i<h;i++){c=d[i];if((c.selected||i===e)&&(p.support.optDisabled?!c.disabled:c.getAttribute("disabled")===null)&&(!c.parentNode.disabled||!p.nodeName(c.parentNode,"optgroup"))){b=p(c).val();if(f){return b}g.push(b)}}return g},set:function(a,b){var c=p.makeArray(b);p(a).find("option").each(function(){this.selected=p.inArray(p(this).val(),c)>=0});if(!c.length){a.selectedIndex=-1}return c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2){return}if(e&&p.isFunction(p.fn[c])){return p(a)[c](d)}if(typeof a.getAttribute==="undefined"){return p.prop(a,c,d)}h=i!==1||!p.isXMLDoc(a);if(h){c=c.toLowerCase();g=p.attrHooks[c]||(T.test(c)?M:L)}if(d!==b){if(d===null){p.removeAttr(a,c);return}else if(g&&"set"in g&&h&&(f=g.set(a,d,c))!==b){return f}else{a.setAttribute(c,d+"");return d}}else if(g&&"get"in g&&h&&(f=g.get(a,c))!==null){return f}else{f=a.getAttribute(c);return f===null?b:f}},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.split(s);for(;g<d.length;g++){e=d[g];if(e){c=p.propFix[e]||e;f=T.test(e);if(!f){p.attr(a,e,"")}a.removeAttribute(U?e:c);if(f&&c in a){a[c]=false}}}}},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode){p.error("type property can't be changed")}else if(!p.support.radioValue&&b==="radio"&&p.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);if(c){a.value=c}return b}}},value:{get:function(a,b){if(L&&p.nodeName(a,"button")){return L.get(a,b)}return b in a?a.value:null},set:function(a,b,c){if(L&&p.nodeName(a,"button")){return L.set(a,b,c)}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!a||h===3||h===8||h===2){return}g=h!==1||!p.isXMLDoc(a);if(g){c=p.propFix[c]||c;f=p.propHooks[c]}if(d!==b){if(f&&"set"in f&&(e=f.set(a,d,c))!==b){return e}else{return a[c]=d}}else{if(f&&"get"in f&&(e=f.get(a,c))!==null){return e}else{return a[c]}}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):R.test(a.nodeName)||S.test(a.nodeName)&&a.href?0:b}}}});M={get:function(a,c){var d,e=p.prop(a,c);return e===true||typeof e!=="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==false?c.toLowerCase():b},set:function(a,b,c){var d;if(b===false){p.removeAttr(a,c)}else{d=p.propFix[c]||c;if(d in a){a[d]=true}a.setAttribute(c,c.toLowerCase())}return c}};if(!U){N={name:true,id:true,coords:true};L=p.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(N[c]?d.value!=="":d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);if(!d){d=e.createAttribute(c);a.setAttributeNode(d)}return d.value=b+""}};p.each(["width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})});p.attrHooks.contenteditable={get:L.get,set:function(a,b,c){if(b===""){b="false"}L.set(a,b,c)}}}if(!p.support.hrefNormalized){p.each(["href","src","width","height"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})})}if(!p.support.style){p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}}}if(!p.support.optSelected){p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){var b=a.parentNode;if(b){b.selectedIndex;if(b.parentNode){b.parentNode.selectedIndex}}return null}})}if(!p.support.enctype){p.propFix.enctype="encoding"}if(!p.support.checkOn){p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}})}p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b)){return a.checked=p.inArray(p(a).val(),b)>=0}}})});var V=/^(?:textarea|input|select)$/i,W=/^([^\.]*|)(?:\.(.+)|)$/,X=/(?:^|\s)hover(\.\S+|)\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,ab=function(a){return p.event.special.hover?a:a.replace(X,"mouseenter$1 mouseleave$1")};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=p._data(a))){return}if(d.handler){o=d;d=o.handler;f=o.selector}if(!d.guid){d.guid=p.guid++}i=g.events;if(!i){g.events=i={}}h=g.handle;if(!h){g.handle=h=function(a){return typeof p!=="undefined"&&(!a||p.event.triggered!==a.type)?p.event.dispatch.apply(h.elem,arguments):b};h.elem=a}c=p.trim(ab(c)).split(" ");for(j=0;j<c.length;j++){k=W.exec(c[j])||[];l=k[1];m=(k[2]||"").split(".").sort();r=p.event.special[l]||{};l=(f?r.delegateType:r.bindType)||l;r=p.event.special[l]||{};n=p.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&p.expr.match.needsContext.test(f),namespace:m.join(".")},o);q=i[l];if(!q){q=i[l]=[];q.delegateCount=0;if(!r.setup||r.setup.call(a,e,m,h)===false){if(a.addEventListener){a.addEventListener(l,h,false)}else if(a.attachEvent){a.attachEvent("on"+l,h)}}}if(r.add){r.add.call(a,n);if(!n.handler.guid){n.handler.guid=d.guid}}if(f){q.splice(q.delegateCount++,0,n)}else{q.push(n)}p.event.global[l]=true}a=null},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=p.hasData(a)&&p._data(a);if(!r||!(m=r.events)){return}b=p.trim(ab(b||"")).split(" ");for(f=0;f<b.length;f++){g=W.exec(b[f])||[];h=i=g[1];j=g[2];if(!h){for(h in m){p.event.remove(a,h+b[f],c,d,true)}continue}n=p.event.special[h]||{};h=(d?n.delegateType:n.bindType)||h;o=m[h]||[];k=o.length;j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(l=0;l<o.length;l++){q=o[l];if((e||i===q.origType)&&(!c||c.guid===q.guid)&&(!j||j.test(q.namespace))&&(!d||d===q.selector||d==="**"&&q.selector)){o.splice(l--,1);if(q.selector){o.delegateCount--}if(n.remove){n.remove.call(a,q)}}}if(o.length===0&&k!==o.length){if(!n.teardown||n.teardown.call(a,j,r.handle)===false){p.removeEvent(a,h,r.handle)}delete m[h]}}if(p.isEmptyObject(m)){delete r.handle;p.removeData(a,"events",true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(c,d,f,g){if(f&&(f.nodeType===3||f.nodeType===8)){return}var h,i,j,k,l,m,n,o,q,r,s=c.type||c,t=[];if(_.test(s+p.event.triggered)){return}if(s.indexOf("!")>=0){s=s.slice(0,-1);i=true}if(s.indexOf(".")>=0){t=s.split(".");s=t.shift();t.sort()}if((!f||p.event.customEvent[s])&&!p.event.global[s]){return}c=typeof c==="object"?c[p.expando]?c:new p.Event(s,c):new p.Event(s);c.type=s;c.isTrigger=true;c.exclusive=i;c.namespace=t.join(".");c.namespace_re=c.namespace?new RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;m=s.indexOf(":")<0?"on"+s:"";if(!f){h=p.cache;for(j in h){if(h[j].events&&h[j].events[s]){p.event.trigger(c,d,h[j].handle.elem,true)}}return}c.result=b;if(!c.target){c.target=f}d=d!=null?p.makeArray(d):[];d.unshift(c);n=p.event.special[s]||{};if(n.trigger&&n.trigger.apply(f,d)===false){return}q=[[f,n.bindType||s]];if(!g&&!n.noBubble&&!p.isWindow(f)){r=n.delegateType||s;k=_.test(r+s)?f:f.parentNode;for(l=f;k;k=k.parentNode){q.push([k,r]);l=k}if(l===(f.ownerDocument||e)){q.push([l.defaultView||l.parentWindow||a,r])}}for(j=0;j<q.length&&!c.isPropagationStopped();j++){k=q[j][0];c.type=q[j][1];o=(p._data(k,"events")||{})[c.type]&&p._data(k,"handle");if(o){o.apply(k,d)}o=m&&k[m];
if(o&&p.acceptData(k)&&o.apply&&o.apply(k,d)===false){c.preventDefault()}}c.type=s;if(!g&&!c.isDefaultPrevented()){if((!n._default||n._default.apply(f.ownerDocument,d)===false)&&!(s==="click"&&p.nodeName(f,"a"))&&p.acceptData(f)){if(m&&f[s]&&(s!=="focus"&&s!=="blur"||c.target.offsetWidth!==0)&&!p.isWindow(f)){l=f[m];if(l){f[m]=null}p.event.triggered=s;f[s]();p.event.triggered=b;if(l){f[m]=l}}}}return c.result},dispatch:function(c){c=p.event.fix(c||a.event);var d,e,f,g,h,i,j,l,m,n,o=(p._data(this,"events")||{})[c.type]||[],q=o.delegateCount,r=k.call(arguments),s=!c.exclusive&&!c.namespace,t=p.event.special[c.type]||{},u=[];r[0]=c;c.delegateTarget=this;if(t.preDispatch&&t.preDispatch.call(this,c)===false){return}if(q&&!(c.button&&c.type==="click")){for(f=c.target;f!=this;f=f.parentNode||this){if(f.disabled!==true||c.type!=="click"){h={};j=[];for(d=0;d<q;d++){l=o[d];m=l.selector;if(h[m]===b){h[m]=l.needsContext?p(m,this).index(f)>=0:p.find(m,this,null,[f]).length}if(h[m]){j.push(l)}}if(j.length){u.push({elem:f,matches:j})}}}}if(o.length>q){u.push({elem:this,matches:o.slice(q)})}for(d=0;d<u.length&&!c.isPropagationStopped();d++){i=u[d];c.currentTarget=i.elem;for(e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++){l=i.matches[e];if(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace)){c.data=l.data;c.handleObj=l;g=((p.event.special[l.origType]||{}).handle||l.handler).apply(i.elem,r);if(g!==b){c.result=g;if(g===false){c.preventDefault();c.stopPropagation()}}}}}if(t.postDispatch){t.postDispatch.call(this,c)}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){if(a.which==null){a.which=b.charCode!=null?b.charCode:b.keyCode}return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,f,g,h=c.button,i=c.fromElement;if(a.pageX==null&&c.clientX!=null){d=a.target.ownerDocument||e;f=d.documentElement;g=d.body;a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0);a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}if(!a.relatedTarget&&i){a.relatedTarget=i===a.target?c.toElement:i}if(!a.which&&h!==b){a.which=h&1?1:h&2?3:h&4?2:0}return a}},fix:function(a){if(a[p.expando]){return a}var b,c,d=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(d);for(b=g.length;b;){c=g[--b];a[c]=d[c]}if(!a.target){a.target=d.srcElement||e}if(a.target.nodeType===3){a.target=a.target.parentNode}a.metaKey=!!a.metaKey;return f.filter?f.filter(a,d):a},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){if(p.isWindow(this)){this.onbeforeunload=c}},teardown:function(a,b){if(this.onbeforeunload===b){this.onbeforeunload=null}}}},simulate:function(a,b,c,d){var e=p.extend(new p.Event,c,{type:a,isSimulated:true,originalEvent:{}});if(d){p.event.trigger(e,null,b)}else{p.event.dispatch.call(b,e)}if(e.isDefaultPrevented()){c.preventDefault()}}};p.event.handle=p.event.dispatch;p.removeEvent=e.removeEventListener?function(a,b,c){if(a.removeEventListener){a.removeEventListener(b,c,false)}}:function(a,b,c){var d="on"+b;if(a.detachEvent){if(typeof a[d]==="undefined"){a[d]=null}a.detachEvent(d,c)}};p.Event=function(a,b){if(!(this instanceof p.Event)){return new p.Event(a,b)}if(a&&a.type){this.originalEvent=a;this.type=a.type;this.isDefaultPrevented=a.defaultPrevented||a.returnValue===false||a.getPreventDefault&&a.getPreventDefault()?cb:bb}else{this.type=a}if(b){p.extend(this,b)}this.timeStamp=a&&a.timeStamp||p.now();this[p.expando]=true};function bb(){return false}function cb(){return true}p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=cb;var a=this.originalEvent;if(!a){return}if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=cb;var a=this.originalEvent;if(!a){return}if(a.stopPropagation){a.stopPropagation()}a.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=cb;this.stopPropagation()},isDefaultPrevented:bb,isPropagationStopped:bb,isImmediatePropagationStopped:bb};p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj,g=f.selector;if(!e||e!==d&&!p.contains(d,e)){a.type=f.origType;c=f.handler.apply(this,arguments);a.type=b}return c}}});if(!p.support.submitBubbles){p.event.special.submit={setup:function(){if(p.nodeName(this,"form")){return false}p.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=p.nodeName(c,"input")||p.nodeName(c,"button")?c.form:b;if(d&&!p._data(d,"_submit_attached")){p.event.add(d,"submit._submit",function(a){a._submit_bubble=true});p._data(d,"_submit_attached",true)}})},postDispatch:function(a){if(a._submit_bubble){delete a._submit_bubble;if(this.parentNode&&!a.isTrigger){p.event.simulate("submit",this.parentNode,a,true)}}},teardown:function(){if(p.nodeName(this,"form")){return false}p.event.remove(this,"._submit")}}}if(!p.support.changeBubbles){p.event.special.change={setup:function(){if(V.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){p.event.add(this,"propertychange._change",function(a){if(a.originalEvent.propertyName==="checked"){this._just_changed=true}});p.event.add(this,"click._change",function(a){if(this._just_changed&&!a.isTrigger){this._just_changed=false}p.event.simulate("change",this,a,true)})}return false}p.event.add(this,"beforeactivate._change",function(a){var b=a.target;if(V.test(b.nodeName)&&!p._data(b,"_change_attached")){p.event.add(b,"change._change",function(a){if(this.parentNode&&!a.isSimulated&&!a.isTrigger){p.event.simulate("change",this.parentNode,a,true)}});p._data(b,"_change_attached",true)}})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){p.event.remove(this,"._change");return!V.test(this.nodeName)}}}if(!p.support.focusinBubbles){p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),true)};p.event.special[b]={setup:function(){if(c++===0){e.addEventListener(a,d,true)}},teardown:function(){if(--c===0){e.removeEventListener(a,d,true)}}}})}p.fn.extend({on:function(a,c,d,e,f){var g,h;if(typeof a==="object"){if(typeof c!=="string"){d=d||c;c=b}for(h in a){this.on(h,c,d,a[h],f)}return this}if(d==null&&e==null){e=c;d=c=b}else if(e==null){if(typeof c==="string"){e=d;d=b}else{e=d;d=c;c=b}}if(e===false){e=bb}else if(!e){return this}if(f===1){g=e;e=function(a){p().off(a);return g.apply(this,arguments)};e.guid=g.guid||(g.guid=p.guid++)}return this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj){e=a.handleObj;p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a==="object"){for(f in a){this.off(f,c,a[f])}return this}if(c===false||typeof c==="function"){d=c;c=b}if(d===false){d=bb}return this.each(function(){p.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){p(this.context).on(a,this.selector,b,c);return this},die:function(a,b){p(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return p.event.trigger(a,b,this[0],true)}},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,"lastToggle"+a.guid)||0)%d;p._data(this,"lastToggle"+a.guid,e+1);c.preventDefault();return b[e].apply(this,arguments)||false};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});p.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(a,b){p.fn[b]=function(a,c){if(c==null){c=a;a=null}return arguments.length>0?this.on(b,null,a,c):this.trigger(b)};if(Y.test(b)){p.event.fixHooks[b]=p.event.keyHooks}if(Z.test(b)){p.event.fixHooks[b]=p.event.mouseHooks}});(function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,q,r,s,t,u="sizzle"+-new Date,v=typeof b,w=1<<31,x=a.document,y=String,z=0,A=0,B={},C=[],D=C.pop,E=C.push,F=C.slice,G=C.indexOf||function(a){var b=0,c=this.length;for(;b<c;b++){if(this[b]===a){return b}}return-1},H=function(a,b){a[u]=b==null||b;return a},I=function(){var a={},b=[];return H(function(c,d){if(b.push(c)>e.cacheLength){delete a[b.shift()]}return a[c+" "]=d},a)},J=I(),K=I(),L=I(),M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="([*^$|!~]?=)",Q="\\["+M+"*("+N+")"+M+"*(?:"+P+M+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+M+"*\\]",R=":("+N+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+Q.replace(3,8)+")*)|.*)\\)|)",S=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),T=new RegExp("^"+M+"*,"+M+"*"),U=new RegExp("^"+M+"*([\\x20\\t\\r\\n\\f>+~])"+M+"*"),V=new RegExp(R),W=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/[\x20\t\r\n\f]*[+~]/,Y=/h\d/i,Z=/input|select|textarea|button/i,_=/\{\s*\[native code\]\s*\}/,ab=/\\(?!\\)/g,bb=/'|\\/g,cb=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,db={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),NAME:new RegExp("^\\[name=['\"]?("+N+")['\"]?\\]"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+Q),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},eb=function(a){return _.test(a+"")},fb=function(a){var b=l.createElement("div");try{return a(b)}catch(c){return false}finally{b=null}};try{F.call(m.childNodes,0)[0].nodeType}catch(gb){F=function(a){var b,c=[];for(;b=this[a];a++){c.push(b)}return c}}function hb(a,b,c,d){var e,f,g,h,i,j,m,p,q,r;if(b&&(b.ownerDocument||b)!==l){k(b)}b=b||l;c=c||[];if(!a||typeof a!=="string"){return c}if((h=b.nodeType)!==1&&h!==9){return[]}if(!n&&!d){if(e=W.exec(a)){if(g=e[1]){if(h===9){f=b.getElementById(g);if(f&&f.parentNode){if(f.id===g){c.push(f);return c}}else{return c}}else{if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&s(b,f)&&f.id===g){c.push(f);return c}}}else if(e[2]){E.apply(c,F.call(b.getElementsByTagName(a),0));return c}else if((g=e[3])&&B.getByClassName&&b.getElementsByClassName){E.apply(c,F.call(b.getElementsByClassName(g),0));return c}}if(B.qsa&&!o.test(a)){m=true;p=u;q=b;r=h===9&&a;if(h===1&&b.nodeName.toLowerCase()!=="object"){j=mb(a);if(m=b.getAttribute("id")){p=m.replace(bb,"\\$&")}else{b.setAttribute("id",p)}p="[id='"+p+"'] ";i=j.length;while(i--){j[i]=p+j[i].join("")}q=X.test(a)&&b.parentNode||b;r=j.join(",")}if(r){try{E.apply(c,F.call(q.querySelectorAll(r),0));return c}catch(t){}finally{if(!m){b.removeAttribute("id")}}}}}return ub(a.replace(S,"$1"),b,c,d)}g=hb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":false};k=hb.setDocument=function(c){c=c&&c.ownerDocument||c||a.document;if(!c||c.nodeType!==9||!c.documentElement||l===c){return l}l=c;m=c.documentElement;n=g(c);B.tagNameNoComments=fb(function(a){a.appendChild(c.createComment(""));return!a.getElementsByTagName("*").length});B.attributes=fb(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return b!=="boolean"&&b!=="string"});B.getByClassName=fb(function(a){a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||!a.getElementsByClassName("e").length){return false}a.lastChild.className="e";return a.getElementsByClassName("e").length===2});B.getByName=fb(function(a){a.id=u+0;a.innerHTML="<a name='"+u+"'></a><div name='"+u+"'></div>";m.insertBefore(a,m.firstChild);var b=c.getElementsByName&&c.getElementsByName(u).length===2+c.getElementsByName(u+0).length;B.getIdNotName=!c.getElementById(u);m.removeChild(a);return b});e.attrHandle=fb(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&typeof a.firstChild.getAttribute!==v&&a.firstChild.getAttribute("href")==="#"})?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}};if(B.getIdNotName){e.find["ID"]=function(a,b){if(typeof b.getElementById!==v&&!n){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}};e.filter["ID"]=function(a){var b=a.replace(ab,"");return function(a){return a.getAttribute("id")===b}}}else{e.find["ID"]=function(a,c){if(typeof c.getElementById!==v&&!n){var d=c.getElementById(a);return d?d.id===a||typeof d.getAttributeNode!==v&&d.getAttributeNode("id").value===a?[d]:b:[]}};e.filter["ID"]=function(a){var b=a.replace(ab,"");return function(a){var c=typeof a.getAttributeNode!==v&&a.getAttributeNode("id");return c&&c.value===b}}}e.find["TAG"]=B.tagNameNoComments?function(a,b){if(typeof b.getElementsByTagName!==v){return b.getElementsByTagName(a)}}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if(a==="*"){for(;c=f[e];e++){if(c.nodeType===1){d.push(c)}}return d}return f};e.find["NAME"]=B.getByName&&function(a,b){if(typeof b.getElementsByName!==v){return b.getElementsByName(name)}};e.find["CLASS"]=B.getByClassName&&function(a,b){if(typeof b.getElementsByClassName!==v&&!n){return b.getElementsByClassName(a)}};q=[];o=[":focus"];if(B.qsa=eb(c.querySelectorAll)){fb(function(a){a.innerHTML="<select><option selected=''></option></select>";if(!a.querySelectorAll("[selected]").length){o.push("\\["+M+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!a.querySelectorAll(":checked").length){o.push(":checked")}});fb(function(a){a.innerHTML="<p test=''></p>";if(a.querySelectorAll("[test^='']").length){o.push("[*^$]="+M+"*(?:\"\"|'')")}a.innerHTML="<input type='hidden'/>";if(!a.querySelectorAll(":enabled").length){o.push(":enabled",":disabled")}a.querySelectorAll("*,:x");o.push(",.*:")})}if(B.matchesSelector=eb(r=m.matchesSelector||m.mozMatchesSelector||m.webkitMatchesSelector||m.oMatchesSelector||m.msMatchesSelector)){fb(function(a){B.disconnectedMatch=r.call(a,"div");r.call(a,"[test!='']:x");q.push("!=",R)})}o=new RegExp(o.join("|"));q=new RegExp(q.join("|"));s=eb(m.contains)||m.compareDocumentPosition?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&d.nodeType===1&&(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return true}}}return false};t=m.compareDocumentPosition?function(a,b){var d;if(a===b){i=true;return 0}if(d=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b)){if(d&1||a.parentNode&&a.parentNode.nodeType===11){if(a===c||s(x,a)){return-1}if(b===c||s(x,b)){return 1}return 0}return d&4?-1:1}return a.compareDocumentPosition?-1:1}:function(a,b){var d,e=0,f=a.parentNode,g=b.parentNode,h=[a],j=[b];if(a===b){i=true;return 0}else if(a.sourceIndex&&b.sourceIndex){return(~b.sourceIndex||w)-(s(x,a)&&~a.sourceIndex||w)}else if(!f||!g){return a===c?-1:b===c?1:f?-1:g?1:0}else if(f===g){return ib(a,b)}d=a;while(d=d.parentNode){h.unshift(d)}d=b;while(d=d.parentNode){j.unshift(d)}while(h[e]===j[e]){e++}return e?ib(h[e],j[e]):h[e]===x?-1:j[e]===x?1:0};i=false;[0,0].sort(t);B.detectDuplicates=i;return l};hb.matches=function(b,c){return hb(b,a.document,null,c)};hb.matchesSelector=function(a,b){if(a&&(a.ownerDocument||a)!==l){k(a)}b=b.replace(cb,"='$1']");if(B.matchesSelector&&!n&&(!q||!q.test(b))&&!o.test(b)){try{var c=r.call(a,b);if(c||B.disconnectedMatch||a.document&&a.document.nodeType!==11){return c}}catch(d){}}return hb(b,l,null,[a]).length>0};hb.contains=function(a,b){if(a&&(a.ownerDocument||a)!==l){k(a)}return s(a,b)};hb.attr=function(a,b){var c;if(a&&(a.ownerDocument||a)!==l){k(a)}if(!n){b=b.toLowerCase()}if(c=e.attrHandle[b]){return c(a)}if(n||B.attributes){return a.getAttribute(b)}return((c=a.getAttributeNode(b))||a.getAttribute(b))&&a[b]===true?b:c&&c.specified?c.value:null};hb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};hb.uniqueSort=function(a){var b,c=[],d=1,e=0;i=!B.detectDuplicates;a.sort(t);if(i){for(;b=a[d];d++){if(b===a[d-1]){e=c.push(d)}}while(e--){a.splice(c[e],1)}}return a};function ib(a,b){var c=a&&b&&a.nextSibling;for(;c;c=c.nextSibling){if(c===b){return-1}}return a?1:-1}function jb(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function kb(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function lb(a){return H(function(b){b=+b;return H(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--){if(c[e=f[g]]){c[e]=!(d[e]=c[e])}}})})}f=hb.getText=function(a){var b,c="",d=0,e=a.nodeType;if(!e){for(;b=a[d];d++){c+=f(b)}}else if(e===1||e===9||e===11){if(typeof a.textContent==="string"){return a.textContent}else{for(a=a.firstChild;a;a=a.nextSibling){c+=f(a)}}}else if(e===3||e===4){return a.nodeValue}return c};e=hb.selectors={cacheLength:50,createPseudo:H,match:db,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ab,"");a[3]=(a[4]||a[5]||"").replace(ab,"");if(a[2]==="~="){a[3]=" "+a[3]+" "}return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();if(a[1].slice(0,3)==="nth"){if(!a[3]){hb.error(a[0])}a[4]=+(a[4]?a[5]+(a[6]||1):2*(a[3]==="even"||a[3]==="odd"));a[5]=+(a[7]+a[8]||a[3]==="odd")}else if(a[3]){hb.error(a[0])}return a},PSEUDO:function(a){var b,c=!a[5]&&a[2];if(db["CHILD"].test(a[0])){return null}if(a[4]){a[2]=a[4]}else if(c&&V.test(c)&&(b=mb(c,true))&&(b=c.indexOf(")",c.length-b)-c.length)){a[0]=a[0].slice(0,b);a[2]=c.slice(0,b)}return a.slice(0,3)}},filter:{TAG:function(a){if(a==="*"){return function(){return true}}a=a.replace(ab,"").toLowerCase();return function(b){return b.nodeName&&b.nodeName.toLowerCase()===a}},CLASS:function(a){var b=J[u][a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&J(a,function(a){return b.test(a.className||typeof a.getAttribute!==v&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=hb.attr(d,a);if(e==null){return b==="!="}if(!b){return true}e+="";return b==="="?e===c:b==="!="?e!==c:b==="^="?c&&e.indexOf(c)===0:b==="*="?c&&e.indexOf(c)>-1:b==="$="?c&&e.substr(e.length-c.length)===c:b==="~="?(" "+e+" ").indexOf(c)>-1:b==="|="?e===c||e.substr(0,c.length+1)===c+"-":false}},CHILD:function(a,b,c,d,e){var f=a.slice(0,3)!=="nth",g=a.slice(-4)!=="last",h=b==="of-type";return d===1&&e===0?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p]){if(h?l.nodeName.toLowerCase()===r:l.nodeType===1){return false}}o=p=a==="only"&&!o&&"nextSibling"}return true}o=[g?q.firstChild:q.lastChild];if(g&&s){k=q[u]||(q[u]={});j=k[a]||[];n=j[0]===z&&j[1];m=j[0]===z&&j[2];l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if(l.nodeType===1&&++m&&l===b){k[a]=[z,n,m];break}}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===z){m=j[1]}else{while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if((h?l.nodeName.toLowerCase()===r:l.nodeType===1)&&++m){if(s){(l[u]||(l[u]={}))[a]=[z,m]}if(l===b){break}}}}m-=e;return m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,d=e.pseudos[a]||e.setFilters[a.toLowerCase()]||hb.error("unsupported pseudo: "+a);if(d[u]){return d(b)}if(d.length>1){c=[a,a,"",b];return e.setFilters.hasOwnProperty(a.toLowerCase())?H(function(a,c){var e,f=d(a,b),g=f.length;while(g--){e=G.call(a,f[g]);a[e]=!(c[e]=f[g])}}):function(a){return d(a,0,c)}}return d}},pseudos:{not:H(function(a){var b=[],c=[],d=h(a.replace(S,"$1"));return d[u]?H(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--){if(f=g[h]){a[h]=!(b[h]=f)}}}):function(a,e,f){b[0]=a;d(b,null,f,c);return!c.pop()}}),has:H(function(a){return function(b){return hb(a,b).length>0}}),contains:H(function(a){return function(b){return(b.textContent||b.innerText||f(b)).indexOf(a)>-1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===m},focus:function(a){return a===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===false},disabled:function(a){return a.disabled===true},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){if(a.parentNode){a.parentNode.selectedIndex}return a.selected===true},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling){if(a.nodeName>"@"||a.nodeType===3||a.nodeType===4){return false}}return true},parent:function(a){return!e.pseudos["empty"](a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return Z.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},text:function(a){var b;return a.nodeName.toLowerCase()==="input"&&a.type==="text"&&((b=a.getAttribute("type"))==null||b.toLowerCase()===a.type)},first:lb(function(){return[0]}),last:lb(function(a,b){return[b-1]}),eq:lb(function(a,b,c){return[c<0?c+b:c]}),even:lb(function(a,b){var c=0;for(;c<b;c+=2){a.push(c)}return a}),odd:lb(function(a,b){var c=1;for(;c<b;c+=2){a.push(c)}return a}),lt:lb(function(a,b,c){var d=c<0?c+b:c;for(;--d>=0;){a.push(d)}return a}),gt:lb(function(a,b,c){var d=c<0?c+b:c;for(;++d<b;){a.push(d)}return a})}};for(c in{radio:true,checkbox:true,file:true,password:true,image:true}){e.pseudos[c]=jb(c)}for(c in{submit:true,reset:true}){e.pseudos[c]=kb(c)}function mb(a,b){var c,d,f,g,h,i,j,k=K[u][a+" "];if(k){return b?0:k.slice(0)}h=a;i=[];j=e.preFilter;while(h){if(!c||(d=T.exec(h))){if(d){h=h.slice(d[0].length)||h}i.push(f=[])}c=false;if(d=U.exec(h)){f.push(c=new y(d.shift()));h=h.slice(c.length);c.type=d[0].replace(S," ")}for(g in e.filter){if((d=db[g].exec(h))&&(!j[g]||(d=j[g](d)))){f.push(c=new y(d.shift()));h=h.slice(c.length);c.type=g;c.matches=d}}if(!c){break}}return b?h.length:h?hb.error(a):K(a,i).slice(0)}function nb(a,b,c){var e=b.dir,f=c&&b.dir==="parentNode",g=A++;return b.first?function(b,c,d){while(b=b[e]){if(b.nodeType===1||f){return a(b,c,d)}}}:function(b,c,h){var i,j,k,l=z+" "+g;if(h){while(b=b[e]){if(b.nodeType===1||f){if(a(b,c,h)){return true}}}}else{while(b=b[e]){if(b.nodeType===1||f){k=b[u]||(b[u]={});if((j=k[e])&&j[0]===l){if((i=j[1])===true||i===d){return i===true}}else{j=k[e]=[l];j[1]=a(b,c,h)||d;if(j[1]===true){return true}}}}}}}function ob(a){return a.length>1?function(b,c,d){var e=a.length;while(e--){if(!a[e](b,c,d)){return false}}return true}:a[0]}function pb(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++){if(f=a[h]){if(!c||c(f,d,e)){g.push(f);if(j){b.push(h)}}}}return g}function qb(a,b,c,d,e,f){if(d&&!d[u]){d=qb(d)}if(e&&!e[u]){e=qb(e,f)}return H(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=a&&(f||!b)?pb(p,m,a,h,i):p,r=c?e||(f?a:o||d)?[]:g:q;if(c){c(q,r,h,i)}if(d){j=pb(r,n);d(j,[],h,i);k=j.length;while(k--){if(l=j[k]){r[n[k]]=!(q[n[k]]=l)}}}if(f){if(e||a){if(e){j=[];k=r.length;while(k--){if(l=r[k]){j.push(q[k]=l)}}e(null,r=[],j,i)}k=r.length;while(k--){if((l=r[k])&&(j=e?G.call(f,l):m[k])>-1){f[j]=!(g[j]=l)}}}}else{r=pb(r===g?r.splice(o,r.length):r);if(e){e(null,g,r,i)}else{E.apply(g,r)}}})}function rb(a){var b,c,d,f=a.length,g=e.relative[a[0].type],h=g||e.relative[" "],i=g?1:0,k=nb(function(a){return a===b},h,true),l=nb(function(a){return G.call(b,a)>-1},h,true),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];for(;i<f;i++){if(c=e.relative[a[i].type]){m=[nb(ob(m),c)]}else{c=e.filter[a[i].type].apply(null,a[i].matches);if(c[u]){d=++i;for(;d<f;d++){if(e.relative[a[d].type]){break}}return qb(i>1&&ob(m),i>1&&a.slice(0,i-1).join("").replace(S,"$1"),c,i<d&&rb(a.slice(i,d)),d<f&&rb(a=a.slice(d)),d<f&&a.join(""))}m.push(c)}}return ob(m)}function sb(a,b){var c=0,f=b.length>0,g=a.length>0,h=function(h,i,k,m,n){var o,p,q,r=[],s=0,t="0",u=h&&[],v=n!=null,w=j,x=h||g&&e.find["TAG"]("*",n&&i.parentNode||i),y=z+=w==null?1:Math.E;if(v){j=i!==l&&i;d=c}for(;(o=x[t])!=null;t++){if(g&&o){for(p=0;q=a[p];p++){if(q(o,i,k)){m.push(o);break}}if(v){z=y;d=++c}}if(f){if(o=!q&&o){s--}if(h){u.push(o)}}}s+=t;if(f&&t!==s){for(p=0;q=b[p];p++){q(u,r,i,k)}if(h){if(s>0){while(t--){if(!(u[t]||r[t])){r[t]=D.call(m)}}}r=pb(r)}E.apply(m,r);if(v&&!h&&r.length>0&&s+b.length>1){hb.uniqueSort(m)}}if(v){z=y;j=w}return u};return f?H(h):h}h=hb.compile=function(a,b){var c,d=[],e=[],f=L[u][a+" "];if(!f){if(!b){b=mb(a)}c=b.length;while(c--){f=rb(b[c]);if(f[u]){d.push(f)}else{e.push(f)}}f=L(a,sb(e,d))}return f};function tb(a,b,c){var d=0,e=b.length;for(;d<e;d++){hb(a,b[d],c)}return c}function ub(a,b,c,d){var f,g,i,j,k,l=mb(a);if(!d){if(l.length===1){g=l[0]=l[0].slice(0);if(g.length>2&&(i=g[0]).type==="ID"&&b.nodeType===9&&!n&&e.relative[g[1].type]){b=e.find["ID"](i.matches[0].replace(ab,""),b)[0];if(!b){return c}a=a.slice(g.shift().length)}for(f=db["needsContext"].test(a)?-1:g.length-1;f>=0;f--){i=g[f];if(e.relative[j=i.type]){break}if(k=e.find[j]){if(d=k(i.matches[0].replace(ab,""),X.test(g[0].type)&&b.parentNode||b)){g.splice(f,1);a=d.length&&g.join("");if(!a){E.apply(c,F.call(d,0));return c}break}}}}}h(a,l)(d,b,n,c,X.test(a));return c}e.pseudos["nth"]=e.pseudos["eq"];function vb(){}e.filters=vb.prototype=e.pseudos;e.setFilters=new vb;k();hb.attr=p.attr;p.find=hb;p.expr=hb.selectors;p.expr[":"]=p.expr.pseudos;p.unique=hb.uniqueSort;p.text=hb.getText;p.isXMLDoc=hb.isXML;p.contains=hb.contains})(a);var db=/Until$/,eb=/^(?:parents|prev(?:Until|All))/,fb=/^.[^:#\[\.,]*$/,gb=p.expr.match.needsContext,hb={children:true,contents:true,next:true,prev:true};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if(typeof a!=="string"){return p(a).filter(function(){for(b=0,c=h.length;b<c;b++){if(p.contains(h[b],this)){return true}}})}g=this.pushStack("","find",a);for(b=0,c=this.length;b<c;b++){d=g.length;p.find(a,this[b],g);if(b>0){for(e=d;e<g.length;e++){for(f=0;f<d;f++){if(g[f]===g[e]){g.splice(e--,1);break}}}}}return g},has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++){if(p.contains(this,c[b])){return true}}})},not:function(a){return this.pushStack(kb(this,a,false),"not",a)},filter:function(a){return this.pushStack(kb(this,a,true),"filter",a)},is:function(a){return!!a&&(typeof a==="string"?gb.test(a)?p(a,this.context).index(this[0])>=0:p.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=gb.test(a)||typeof a!=="string"?p(a,b||this.context):0;for(;d<e;d++){c=this[d];while(c&&c.ownerDocument&&c!==b&&c.nodeType!==11){if(g?g.index(c)>-1:p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}}f=f.length>1?p.unique(f):f;return this.pushStack(f,"closest",a)},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof a==="string"){return p.inArray(this[0],p(a))}return p.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a==="string"?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(ib(c[0])||ib(d[0])?d:p.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}});p.fn.andSelf=p.fn.addBack;function ib(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function jb(a,b){do{a=a[b]}while(a&&a.nodeType!==1);return a}p.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return jb(a,"nextSibling")},prev:function(a){return jb(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);if(!db.test(a)){d=c}if(d&&typeof d==="string"){e=p.filter(d,e)}e=this.length>1&&!hb[a]?p.unique(e):e;if(this.length>1&&eb.test(a)){e=e.reverse()}return this.pushStack(e,a,k.call(arguments).join(","))}});p.extend({filter:function(a,b,c){if(c){a=":not("+a+")"}return b.length===1?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!p(f).is(d))){if(f.nodeType===1){e.push(f)}f=f[c]}return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){if(a.nodeType===1&&a!==b){c.push(a)}}return c}});function kb(a,b,c){b=b||0;if(p.isFunction(b)){return p.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c})}else if(b.nodeType){return p.grep(a,function(a,d){return a===b===c})}else if(typeof b==="string"){var d=p.grep(a,function(a){return a.nodeType===1});if(fb.test(b)){return p.filter(b,d,!c)}else{b=p.filter(b,d)}}return p.grep(a,function(a,d){return p.inArray(a,b)>=0===c})}function lb(a){var b=mb.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}var mb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",nb=/ jQuery\d+="(?:null|\d+)"/g,ob=/^\s+/,pb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,qb=/<([\w:]+)/,rb=/<tbody/i,sb=/<|&#?\w+;/,tb=/<(?:script|style|link)/i,ub=/<(?:script|object|embed|option|style)/i,vb=new RegExp("<(?:"+mb+")[\\s/>]","i"),wb=/^(?:checkbox|radio)$/,xb=/checked\s*(?:[^=]|=\s*.checked.)/i,yb=/\/(java|ecma)script/i,zb=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Ab={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Bb=lb(e),Cb=Bb.appendChild(e.createElement("div"));Ab.optgroup=Ab.option;Ab.tbody=Ab.tfoot=Ab.colgroup=Ab.caption=Ab.thead;Ab.th=Ab.td;if(!p.support.htmlSerialize){Ab._default=[1,"X<div>","</div>"]}p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a)){return this.each(function(b){p(this).wrapAll(a.call(this,b))})}if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){b.insertBefore(this[0])}b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this
},wrapInner:function(a){if(p.isFunction(a)){return this.each(function(b){p(this).wrapInner(a.call(this,b))})}return this.each(function(){var b=p(this),c=b.contents();if(c.length){c.wrapAll(a)}else{b.append(a)}})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){if(!p.nodeName(this,"body")){p(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(a){if(this.nodeType===1||this.nodeType===11){this.appendChild(a)}})},prepend:function(){return this.domManip(arguments,true,function(a){if(this.nodeType===1||this.nodeType===11){this.insertBefore(a,this.firstChild)}})},before:function(){if(!ib(this[0])){return this.domManip(arguments,false,function(a){this.parentNode.insertBefore(a,this)})}if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),"before",this.selector)}},after:function(){if(!ib(this[0])){return this.domManip(arguments,false,function(a){this.parentNode.insertBefore(a,this.nextSibling)})}if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),"after",this.selector)}},remove:function(a,b){var c,d=0;for(;(c=this[d])!=null;d++){if(!a||p.filter(a,[c]).length){if(!b&&c.nodeType===1){p.cleanData(c.getElementsByTagName("*"));p.cleanData([c])}if(c.parentNode){c.parentNode.removeChild(c)}}}return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){if(a.nodeType===1){p.cleanData(a.getElementsByTagName("*"))}while(a.firstChild){a.removeChild(a.firstChild)}}return this},clone:function(a,b){a=a==null?false:a;b=b==null?a:b;return this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b){return c.nodeType===1?c.innerHTML.replace(nb,""):b}if(typeof a==="string"&&!tb.test(a)&&(p.support.htmlSerialize||!vb.test(a))&&(p.support.leadingWhitespace||!ob.test(a))&&!Ab[(qb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(pb,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{};if(c.nodeType===1){p.cleanData(c.getElementsByTagName("*"));c.innerHTML=a}}c=0}catch(f){}}if(c){this.empty().append(a)}},null,a,arguments.length)},replaceWith:function(a){if(!ib(this[0])){if(p.isFunction(a)){return this.each(function(b){var c=p(this),d=c.html();c.replaceWith(a.call(this,b,d))})}if(typeof a!=="string"){a=p(a).detach()}return this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove();if(b){p(b).before(a)}else{p(c).append(a)}})}return this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,true)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],l=this.length;if(!p.support.checkClone&&l>1&&typeof j==="string"&&xb.test(j)){return this.each(function(){p(this).domManip(a,c,d)})}if(p.isFunction(j)){return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b);f.domManip(a,c,d)})}if(this[0]){e=p.buildFragment(a,this,k);g=e.fragment;f=g.firstChild;if(g.childNodes.length===1){g=f}if(f){c=c&&p.nodeName(f,"tr");for(h=e.cacheable||l-1;i<l;i++){d.call(c&&p.nodeName(this[i],"table")?Db(this[i],"tbody"):this[i],i===h?g:p.clone(g,true,true))}}g=f=null;if(k.length){p.each(k,function(a,b){if(b.src){if(p.ajax){p.ajax({url:b.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{p.error("no ajax")}}else{p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(zb,""))}if(b.parentNode){b.parentNode.removeChild(b)}})}}return this}});function Db(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function Eb(a,b){if(b.nodeType!==1||!p.hasData(a)){return}var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h){delete g.handle;g.events={};for(c in h){for(d=0,e=h[c].length;d<e;d++){p.event.add(b,c,h[c][d])}}}if(g.data){g.data=p.extend({},g.data)}}function Fb(a,b){var c;if(b.nodeType!==1){return}if(b.clearAttributes){b.clearAttributes()}if(b.mergeAttributes){b.mergeAttributes(a)}c=b.nodeName.toLowerCase();if(c==="object"){if(b.parentNode){b.outerHTML=a.outerHTML}if(p.support.html5Clone&&(a.innerHTML&&!p.trim(b.innerHTML))){b.innerHTML=a.innerHTML}}else if(c==="input"&&wb.test(a.type)){b.defaultChecked=b.checked=a.checked;if(b.value!==a.value){b.value=a.value}}else if(c==="option"){b.selected=a.defaultSelected}else if(c==="input"||c==="textarea"){b.defaultValue=a.defaultValue}else if(c==="script"&&b.text!==a.text){b.text=a.text}b.removeAttribute(p.expando)}p.buildFragment=function(a,c,d){var f,g,h,i=a[0];c=c||e;c=!c.nodeType&&c[0]||c;c=c.ownerDocument||c;if(a.length===1&&typeof i==="string"&&i.length<512&&c===e&&i.charAt(0)==="<"&&!ub.test(i)&&(p.support.checkClone||!xb.test(i))&&(p.support.html5Clone||!vb.test(i))){g=true;f=p.fragments[i];h=f!==b}if(!f){f=c.createDocumentFragment();p.clean(a,c,f,d);if(g){p.fragments[i]=h&&f}}return{fragment:f,cacheable:g}};p.fragments={};p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var d,e=0,f=[],g=p(c),h=g.length,i=this.length===1&&this[0].parentNode;if((i==null||i&&i.nodeType===11&&i.childNodes.length===1)&&h===1){g[b](this[0]);return this}else{for(;e<h;e++){d=(e>0?this.clone(true):this).get();p(g[e])[b](d);f=f.concat(d)}return this.pushStack(f,a,g.selector)}}});function Gb(a){if(typeof a.getElementsByTagName!=="undefined"){return a.getElementsByTagName("*")}else if(typeof a.querySelectorAll!=="undefined"){return a.querySelectorAll("*")}else{return[]}}function Hb(a){if(wb.test(a.type)){a.defaultChecked=a.checked}}p.extend({clone:function(a,b,c){var d,e,f,g;if(p.support.html5Clone||p.isXMLDoc(a)||!vb.test("<"+a.nodeName+">")){g=a.cloneNode(true)}else{Cb.innerHTML=a.outerHTML;Cb.removeChild(g=Cb.firstChild)}if((!p.support.noCloneEvent||!p.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!p.isXMLDoc(a)){Fb(a,g);d=Gb(a);e=Gb(g);for(f=0;d[f];++f){if(e[f]){Fb(d[f],e[f])}}}if(b){Eb(a,g);if(c){d=Gb(a);e=Gb(g);for(f=0;d[f];++f){Eb(d[f],e[f])}}}d=e=null;return g},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,q,r,s=b===e&&Bb,t=[];if(!b||typeof b.createDocumentFragment==="undefined"){b=e}for(f=0;(h=a[f])!=null;f++){if(typeof h==="number"){h+=""}if(!h){continue}if(typeof h==="string"){if(!sb.test(h)){h=b.createTextNode(h)}else{s=s||lb(b);l=b.createElement("div");s.appendChild(l);h=h.replace(pb,"<$1></$2>");i=(qb.exec(h)||["",""])[1].toLowerCase();j=Ab[i]||Ab._default;k=j[0];l.innerHTML=j[1]+h+j[2];while(k--){l=l.lastChild}if(!p.support.tbody){m=rb.test(h);n=i==="table"&&!m?l.firstChild&&l.firstChild.childNodes:j[1]==="<table>"&&!m?l.childNodes:[];for(g=n.length-1;g>=0;--g){if(p.nodeName(n[g],"tbody")&&!n[g].childNodes.length){n[g].parentNode.removeChild(n[g])}}}if(!p.support.leadingWhitespace&&ob.test(h)){l.insertBefore(b.createTextNode(ob.exec(h)[0]),l.firstChild)}h=l.childNodes;l.parentNode.removeChild(l)}}if(h.nodeType){t.push(h)}else{p.merge(t,h)}}if(l){h=l=s=null}if(!p.support.appendChecked){for(f=0;(h=t[f])!=null;f++){if(p.nodeName(h,"input")){Hb(h)}else if(typeof h.getElementsByTagName!=="undefined"){p.grep(h.getElementsByTagName("input"),Hb)}}}if(c){q=function(a){if(!a.type||yb.test(a.type)){return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)}};for(f=0;(h=t[f])!=null;f++){if(!(p.nodeName(h,"script")&&q(h))){c.appendChild(h);if(typeof h.getElementsByTagName!=="undefined"){r=p.grep(p.merge([],h.getElementsByTagName("script")),q);t.splice.apply(t,[f+1,0].concat(r));f+=r.length}}}}return t},cleanData:function(a,b){var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;for(;(e=a[g])!=null;g++){if(b||p.acceptData(e)){d=e[h];c=d&&i[d];if(c){if(c.events){for(f in c.events){if(k[f]){p.event.remove(e,f)}else{p.removeEvent(e,f,c.handle)}}}if(i[d]){delete i[d];if(j){delete e[h]}else if(e.removeAttribute){e.removeAttribute(h)}else{e[h]=null}p.deletedIds.push(d)}}}}}});(function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}};a=p.uaMatch(g.userAgent);b={};if(a.browser){b[a.browser]=true;b.version=a.version}if(b.chrome){b.webkit=true}else if(b.webkit){b.safari=true}p.browser=b;p.sub=function(){function a(b,c){return new a.fn.init(b,c)}p.extend(true,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function c(d,e){if(e&&e instanceof p&&!(e instanceof a)){e=a(e)}return p.fn.init.call(this,d,e,b)};a.fn.init.prototype=a.fn;var b=a(e);return a}})();var Ib,Jb,Kb,Lb=/alpha\([^)]*\)/i,Mb=/opacity=([^)]*)/,Nb=/^(top|right|bottom|left)$/,Ob=/^(none|table(?!-c[ea]).+)/,Pb=/^margin/,Qb=new RegExp("^("+q+")(.*)$","i"),Rb=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),Sb=new RegExp("^([-+])=("+q+")","i"),Tb={BODY:"block"},Ub={position:"absolute",visibility:"hidden",display:"block"},Vb={letterSpacing:0,fontWeight:400},Wb=["Top","Right","Bottom","Left"],Xb=["Webkit","O","Moz","ms"],Yb=p.fn.toggle;function Zb(a,b){if(b in a){return b}var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Xb.length;while(e--){b=Xb[e]+c;if(b in a){return b}}return d}function $b(a,b){a=b||a;return p.css(a,"display")==="none"||!p.contains(a.ownerDocument,a)}function _b(a,b){var c,d,e=[],f=0,g=a.length;for(;f<g;f++){c=a[f];if(!c.style){continue}e[f]=p._data(c,"olddisplay");if(b){if(!e[f]&&c.style.display==="none"){c.style.display=""}if(c.style.display===""&&$b(c)){e[f]=p._data(c,"olddisplay",dc(c.nodeName))}}else{d=Ib(c,"display");if(!e[f]&&d!=="none"){p._data(c,"olddisplay",d)}}}for(f=0;f<g;f++){c=a[f];if(!c.style){continue}if(!b||c.style.display==="none"||c.style.display===""){c.style.display=b?e[f]||"":"none"}}return a}p.fn.extend({css:function(a,c){return p.access(this,function(a,c,d){return d!==b?p.style(a,c,d):p.css(a,c)},a,c,arguments.length>1)},show:function(){return _b(this,true)},hide:function(){return _b(this)},toggle:function(a,b){var c=typeof a==="boolean";if(p.isFunction(a)&&p.isFunction(b)){return Yb.apply(this,arguments)}return this.each(function(){if(c?a:$b(this)){p(this).show()}else{p(this).hide()}})}});p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ib(a,"opacity");return c===""?"1":c}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style){return}var f,g,h,i=p.camelCase(c),j=a.style;c=p.cssProps[i]||(p.cssProps[i]=Zb(j,i));h=p.cssHooks[c]||p.cssHooks[i];if(d!==b){g=typeof d;if(g==="string"&&(f=Sb.exec(d))){d=(f[1]+1)*f[2]+parseFloat(p.css(a,c));g="number"}if(d==null||g==="number"&&isNaN(d)){return}if(g==="number"&&!p.cssNumber[i]){d+="px"}if(!h||!("set"in h)||(d=h.set(a,d,e))!==b){try{j[c]=d}catch(k){}}}else{if(h&&"get"in h&&(f=h.get(a,false,e))!==b){return f}return j[c]}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);c=p.cssProps[i]||(p.cssProps[i]=Zb(a.style,i));h=p.cssHooks[c]||p.cssHooks[i];if(h&&"get"in h){f=h.get(a,true,e)}if(f===b){f=Ib(a,c)}if(f==="normal"&&c in Vb){f=Vb[c]}if(d||e!==b){g=parseFloat(f);return d||p.isNumeric(g)?g||0:f}return f},swap:function(a,b,c){var d,e,f={};for(e in b){f[e]=a.style[e];a.style[e]=b[e]}d=c.call(a);for(e in b){a.style[e]=f[e]}return d}});if(a.getComputedStyle){Ib=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;if(h){d=h.getPropertyValue(c)||h[c];if(d===""&&!p.contains(b.ownerDocument,b)){d=p.style(b,c)}if(Rb.test(d)&&Pb.test(c)){e=i.width;f=i.minWidth;g=i.maxWidth;i.minWidth=i.maxWidth=i.width=d;d=h.width;i.width=e;i.minWidth=f;i.maxWidth=g}}return d}}else if(e.documentElement.currentStyle){Ib=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;if(e==null&&f&&f[b]){e=f[b]}if(Rb.test(e)&&!Nb.test(b)){c=f.left;d=a.runtimeStyle&&a.runtimeStyle.left;if(d){a.runtimeStyle.left=a.currentStyle.left}f.left=b==="fontSize"?"1em":e;e=f.pixelLeft+"px";f.left=c;if(d){a.runtimeStyle.left=d}}return e===""?"auto":e}}function ac(a,b,c){var d=Qb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function bc(a,b,c,d){var e=c===(d?"border":"content")?4:b==="width"?1:0,f=0;for(;e<4;e+=2){if(c==="margin"){f+=p.css(a,c+Wb[e],true)}if(d){if(c==="content"){f-=parseFloat(Ib(a,"padding"+Wb[e]))||0}if(c!=="margin"){f-=parseFloat(Ib(a,"border"+Wb[e]+"Width"))||0}}else{f+=parseFloat(Ib(a,"padding"+Wb[e]))||0;if(c!=="padding"){f+=parseFloat(Ib(a,"border"+Wb[e]+"Width"))||0}}}return f}function cc(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=true,f=p.support.boxSizing&&p.css(a,"boxSizing")==="border-box";if(d<=0||d==null){d=Ib(a,b);if(d<0||d==null){d=a.style[b]}if(Rb.test(d)){return d}e=f&&(p.support.boxSizingReliable||d===a.style[b]);d=parseFloat(d)||0}return d+bc(a,b,c||(f?"border":"content"),e)+"px"}function dc(a){if(Tb[a]){return Tb[a]}var b=p("<"+a+">").appendTo(e.body),c=b.css("display");b.remove();if(c==="none"||c===""){Jb=e.body.appendChild(Jb||p.extend(e.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Kb||!Jb.createElement){Kb=(Jb.contentWindow||Jb.contentDocument).document;Kb.write("<!doctype html><html><body>");Kb.close()}b=Kb.body.appendChild(Kb.createElement(a));c=Ib(b,"display");e.body.removeChild(Jb)}Tb[a]=c;return c}p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c){if(a.offsetWidth===0&&Ob.test(Ib(a,"display"))){return p.swap(a,Ub,function(){return cc(a,b,d)})}else{return cc(a,b,d)}}},set:function(a,c,d){return ac(a,c,d?bc(a,b,d,p.support.boxSizing&&p.css(a,"boxSizing")==="border-box"):0)}}});if(!p.support.opacity){p.cssHooks.opacity={get:function(a,b){return Mb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&p.trim(f.replace(Lb,""))===""&&c.removeAttribute){c.removeAttribute("filter");if(d&&!d.filter){return}}c.filter=Lb.test(f)?f.replace(Lb,e):f+" "+e}}}p(function(){if(!p.support.reliableMarginRight){p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){if(b){return Ib(a,"marginRight")}})}}}if(!p.support.pixelPosition&&p.fn.position){p.each(["top","left"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=Ib(a,b);return Rb.test(d)?p(a).position()[b]+"px":d}}}})}});if(p.expr&&p.expr.filters){p.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!p.support.reliableHiddenOffsets&&(a.style&&a.style.display||Ib(a,"display"))==="none"};p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)}}p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e=typeof c==="string"?c.split(" "):[c],f={};for(d=0;d<4;d++){f[a+Wb[d]+b]=e[d]||e[d-2]||e[0]}return f}};if(!Pb.test(a)){p.cssHooks[a+b].set=ac}});var ec=/%20/g,fc=/\[\]$/,gc=/\r?\n/g,hc=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ic=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ic.test(this.nodeName)||hc.test(this.type))}).map(function(a,b){var c=p(this).val();return c==null?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(gc,"\r\n")}}):{name:b.name,value:c.replace(gc,"\r\n")}}).get()}});p.param=function(a,c){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():b==null?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b){c=p.ajaxSettings&&p.ajaxSettings.traditional}if(p.isArray(a)||a.jquery&&!p.isPlainObject(a)){p.each(a,function(){f(this.name,this.value)})}else{for(d in a){jc(d,a[d],c,f)}}return e.join("&").replace(ec,"+")};function jc(a,b,c,d){var e;if(p.isArray(b)){p.each(b,function(b,e){if(c||fc.test(a)){d(a,e)}else{jc(a+"["+(typeof e==="object"?b:"")+"]",e,c,d)}})}else if(!c&&p.type(b)==="object"){for(e in b){jc(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}var kc,lc,mc=/#.*$/,nc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,oc=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,pc=/^(?:GET|HEAD)$/,qc=/^\/\//,rc=/\?/,sc=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,tc=/([?&])_=[^&]*/,uc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,vc=p.fn.load,wc={},xc={},yc=["*/"]+["*"];try{lc=f.href}catch(zc){lc=e.createElement("a");lc.href="";lc=lc.href}kc=uc.exec(lc.toLowerCase())||[];function Ac(a){return function(b,c){if(typeof b!=="string"){c=b;b="*"}var d,e,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c)){for(;h<i;h++){d=g[h];f=/^\+/.test(d);if(f){d=d.substr(1)||"*"}e=a[d]=a[d]||[];e[f?"unshift":"push"](c)}}}}function Bc(a,c,d,e,f,g){f=f||c.dataTypes[0];g=g||{};g[f]=true;var h,i=a[f],j=0,k=i?i.length:0,l=a===wc;for(;j<k&&(l||!h);j++){h=i[j](c,d,e);if(typeof h==="string"){if(!l||g[h]){h=b}else{c.dataTypes.unshift(h);h=Bc(a,c,d,e,h,g)}}}if((l||!h)&&!g["*"]){h=Bc(a,c,d,e,"*",g)}return h}function Cc(a,c){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in c){if(c[d]!==b){(f[d]?a:e||(e={}))[d]=c[d]}}if(e){p.extend(true,a,e)}}p.fn.load=function(a,c,d){if(typeof a!=="string"&&vc){return vc.apply(this,arguments)}if(!this.length){return this}var e,f,g,h=this,i=a.indexOf(" ");if(i>=0){e=a.slice(i,a.length);a=a.slice(0,i)}if(p.isFunction(c)){d=c;c=b}else if(c&&typeof c==="object"){f="POST"}p.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){if(d){h.each(d,g||[a.responseText,b,a])}}}).done(function(a){g=arguments;h.html(e?p("<div>").append(a.replace(sc,"")).find(e):a)});return this};p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}});p.each(["get","post"],function(a,c){p[c]=function(a,d,e,f){if(p.isFunction(d)){f=f||e;e=d;d=b}return p.ajax({type:c,url:a,data:d,success:e,dataType:f})}});p.extend({getScript:function(a,c){return p.get(a,b,c,"script")},getJSON:function(a,b,c){return p.get(a,b,c,"json")},ajaxSetup:function(a,b){if(b){Cc(a,p.ajaxSettings)}else{b=a;a=p.ajaxSettings}Cc(a,b);return a},ajaxSettings:{url:lc,isLocal:oc.test(kc[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":yc},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":true,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:Ac(wc),ajaxTransport:Ac(xc),ajax:function(a,c){if(typeof a==="object"){c=a;a=b}c=c||{};var d,e,f,g,h,i,j,k,l=p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m instanceof p)?p(m):p.event,o=p.Deferred(),q=p.Callbacks("once memory"),r=l.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=u[c]=u[c]||a;t[a]=b}return this},getAllResponseHeaders:function(){return v===2?e:null},getResponseHeader:function(a){var c;if(v===2){if(!f){f={};while(c=nc.exec(e)){f[c[1].toLowerCase()]=c[2]}}c=f[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){if(!v){l.mimeType=a}return this},abort:function(a){a=a||w;if(g){g.abort(a)}y(0,a);return this}};function y(a,c,f,i){var k,s,t,u,w,y=c;if(v===2){return}v=2;if(h){clearTimeout(h)}g=b;e=i||"";x.readyState=a>0?4:0;if(f){u=Dc(l,x,f)}if(a>=200&&a<300||a===304){if(l.ifModified){w=x.getResponseHeader("Last-Modified");if(w){p.lastModified[d]=w}w=x.getResponseHeader("Etag");if(w){p.etag[d]=w}}if(a===304){y="notmodified";k=true}else{k=Ec(l,u);y=k.state;s=k.data;t=k.error;k=!t}}else{t=y;if(!y||a){y="error";if(a<0){a=0}}}x.status=a;x.statusText=(c||y)+"";if(k){o.resolveWith(m,[s,y,x])}else{o.rejectWith(m,[x,y,t])}x.statusCode(r);r=b;if(j){n.trigger("ajax"+(k?"Success":"Error"),[x,l,k?s:t])}q.fireWith(m,[x,y]);if(j){n.trigger("ajaxComplete",[x,l]);if(!--p.active){p.event.trigger("ajaxStop")}}}o.promise(x);x.success=x.done;x.error=x.fail;x.complete=q.add;x.statusCode=function(a){if(a){var b;if(v<2){for(b in a){r[b]=[r[b],a[b]]}}else{b=a[x.status];x.always(b)}}return this};l.url=((a||l.url)+"").replace(mc,"").replace(qc,kc[1]+"//");l.dataTypes=p.trim(l.dataType||"*").toLowerCase().split(s);if(l.crossDomain==null){i=uc.exec(l.url.toLowerCase());l.crossDomain=!!(i&&(i[1]!==kc[1]||i[2]!==kc[2]||(i[3]||(i[1]==="http:"?80:443))!=(kc[3]||(kc[1]==="http:"?80:443))))}if(l.data&&l.processData&&typeof l.data!=="string"){l.data=p.param(l.data,l.traditional)}Bc(wc,l,c,x);if(v===2){return x}j=l.global;l.type=l.type.toUpperCase();l.hasContent=!pc.test(l.type);if(j&&p.active++===0){p.event.trigger("ajaxStart")}if(!l.hasContent){if(l.data){l.url+=(rc.test(l.url)?"&":"?")+l.data;delete l.data}d=l.url;if(l.cache===false){var z=p.now(),A=l.url.replace(tc,"$1_="+z);l.url=A+(A===l.url?(rc.test(l.url)?"&":"?")+"_="+z:"")}}if(l.data&&l.hasContent&&l.contentType!==false||c.contentType){x.setRequestHeader("Content-Type",l.contentType)}if(l.ifModified){d=d||l.url;if(p.lastModified[d]){x.setRequestHeader("If-Modified-Since",p.lastModified[d])}if(p.etag[d]){x.setRequestHeader("If-None-Match",p.etag[d])}}x.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+yc+"; q=0.01":""):l.accepts["*"]);for(k in l.headers){x.setRequestHeader(k,l.headers[k])}if(l.beforeSend&&(l.beforeSend.call(m,x,l)===false||v===2)){return x.abort()}w="abort";for(k in{success:1,error:1,complete:1}){x[k](l[k])}g=Bc(xc,l,c,x);if(!g){y(-1,"No Transport")}else{x.readyState=1;if(j){n.trigger("ajaxSend",[x,l])}if(l.async&&l.timeout>0){h=setTimeout(function(){x.abort("timeout")},l.timeout)}try{v=1;g.send(t,y)}catch(B){if(v<2){y(-1,B)}else{throw B}}}return x},active:0,lastModified:{},etag:{}});function Dc(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k){if(f in d){c[k[f]]=d[f]}}while(j[0]==="*"){j.shift();if(e===b){e=a.mimeType||c.getResponseHeader("content-type")}}if(e){for(f in i){if(i[f]&&i[f].test(e)){j.unshift(f);break}}}if(j[0]in d){g=j[0]}else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}if(!h){h=f}}g=g||h}if(g){if(g!==j[0]){j.unshift(g)}return d[g]}}function Ec(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;if(a.dataFilter){b=a.dataFilter(b,a.dataType)}if(g[1]){for(c in a.converters){i[c.toLowerCase()]=a.converters[c]}}for(;e=g[++j];){if(e!=="*"){if(h!=="*"&&h!==e){c=i[h+" "+e]||i["* "+e];if(!c){for(d in i){f=d.split(" ");if(f[1]===e){c=i[h+" "+f[0]]||i["* "+f[0]];if(c){if(c===true){c=i[d]}else if(i[d]!==true){e=f[0];g.splice(j--,0,e)}break}}}}if(c!==true){if(c&&a["throws"]){b=c(b)}else{try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}}}h=e}}return{state:"success",data:b}}var Fc=[],Gc=/\?/,Hc=/(=)\?(?=&|$)|\?\?/,Ic=p.now();p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fc.pop()||p.expando+"_"+Ic++;this[a]=true;return a}});p.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==false,l=k&&Hc.test(j),m=k&&!l&&typeof i==="string"&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(i);if(c.dataTypes[0]==="jsonp"||l||m){f=c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback;g=a[f];if(l){c.url=j.replace(Hc,"$1"+f)}else if(m){c.data=i.replace(Hc,"$1"+f)}else if(k){c.url+=(Gc.test(j)?"&":"?")+c.jsonp+"="+f}c.converters["script json"]=function(){if(!h){p.error(f+" was not called")}return h[0]};c.dataTypes[0]="json";a[f]=function(){h=arguments};e.always(function(){a[f]=g;if(c[f]){c.jsonpCallback=d.jsonpCallback;Fc.push(f)}if(h&&p.isFunction(g)){g(h[0])}h=g=b});return"script"}});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){p.globalEval(a);return a}}});p.ajaxPrefilter("script",function(a){if(a.cache===b){a.cache=false}if(a.crossDomain){a.type="GET";a.global=false}});p.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=e.head||e.getElementsByTagName("head")[0]||e.documentElement;return{send:function(f,g){c=e.createElement("script");c.async="async";if(a.scriptCharset){c.charset=a.scriptCharset}c.src=a.url;c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState)){c.onload=c.onreadystatechange=null;if(d&&c.parentNode){d.removeChild(c)}c=b;if(!e){g(200,"success")}}};d.insertBefore(c,d.firstChild)},abort:function(){if(c){c.onload(0,1)}}}}});var Jc,Kc=a.ActiveXObject?function(){for(var a in Jc){Jc[a](0,1)}}:false,Lc=0;function Mc(){try{return new a.XMLHttpRequest}catch(b){}}function Nc(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}p.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&Mc()||Nc()}:Mc;(function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(p.ajaxSettings.xhr());if(p.support.ajax){p.ajaxTransport(function(c){if(!c.crossDomain||p.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username){i.open(c.type,c.url,c.async,c.username,c.password)}else{i.open(c.type,c.url,c.async)}if(c.xhrFields){for(h in c.xhrFields){i[h]=c.xhrFields[h]}}if(c.mimeType&&i.overrideMimeType){i.overrideMimeType(c.mimeType)}if(!c.crossDomain&&!e["X-Requested-With"]){e["X-Requested-With"]="XMLHttpRequest"}try{for(h in e){i.setRequestHeader(h,e[h])}}catch(j){}i.send(c.hasContent&&c.data||null);d=function(a,e){var h,j,k,l,m;try{if(d&&(e||i.readyState===4)){d=b;if(g){i.onreadystatechange=p.noop;if(Kc){delete Jc[g]}}if(e){if(i.readyState!==4){i.abort()}}else{h=i.status;k=i.getAllResponseHeaders();l={};m=i.responseXML;if(m&&m.documentElement){l.xml=m}try{l.text=i.responseText}catch(n){}try{j=i.statusText}catch(n){j=""}if(!h&&c.isLocal&&!c.crossDomain){h=l.text?200:404}else if(h===1223){h=204}}}}catch(o){if(!e){f(-1,o)}}if(l){f(h,j,l,k)}};if(!c.async){d()}else if(i.readyState===4){setTimeout(d,0)}else{g=++Lc;if(Kc){if(!Jc){Jc={};p(a).unload(Kc)}Jc[g]=d}i.onreadystatechange=d}},abort:function(){if(d){d(0,1)}}}}})}var Oc,Pc,Qc=/^(?:toggle|show|hide)$/,Rc=new RegExp("^(?:([-+])=|)("+q+")([a-z%]*)$","i"),Sc=/queueHooks$/,Tc=[Zc],Uc={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=Rc.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){c=+f[2];d=f[3]||(p.cssNumber[a]?"":"px");if(d!=="px"&&h){h=p.css(e.elem,a,true)||c||1;do{i=i||".5";h=h/i;p.style(e.elem,a,h+d)}while(i!==(i=e.cur()/g)&&i!==1&&--j)}e.unit=d;e.start=h;e.end=f[1]?h+(f[1]+1)*c:c}return e}]};function Vc(){setTimeout(function(){Oc=b},0);return Oc=p.now()}function Wc(a,b){p.each(b,function(b,c){var d=(Uc[b]||[]).concat(Uc["*"]),e=0,f=d.length;for(;e<f;e++){if(d[e].call(a,b,c)){return}}})}function Xc(a,b,c){var d,e=0,f=0,g=Tc.length,h=p.Deferred().always(function(){delete i.elem}),i=function(){var b=Oc||Vc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,e=1-d,f=0,g=j.tweens.length;for(;f<g;f++){j.tweens[f].run(e)}h.notifyWith(a,[j,e,c]);if(e<1&&g){return c}else{h.resolveWith(a,[j]);return false}},j=h.promise({elem:a,props:p.extend({},b),opts:p.extend(true,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Oc||Vc(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);j.tweens.push(e);return e},stop:function(b){var c=0,d=b?j.tweens.length:0;for(;c<d;c++){j.tweens[c].run(1)}if(b){h.resolveWith(a,[j,b])}else{h.rejectWith(a,[j,b])}return this}}),k=j.props;Yc(k,j.opts.specialEasing);for(;e<g;e++){d=Tc[e].call(j,a,k,j.opts);if(d){return d}}Wc(j,k);if(p.isFunction(j.opts.start)){j.opts.start.call(a,j)}p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a}));return j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function Yc(a,b){var c,d,e,f,g;for(c in a){d=p.camelCase(c);e=b[d];f=a[c];if(p.isArray(f)){e=f[1];f=a[c]=f[0]}if(c!==d){a[d]=f;delete a[c]}g=p.cssHooks[d];if(g&&"expand"in g){f=g.expand(f);delete a[d];for(c in f){if(!(c in a)){a[c]=f[c];b[c]=e}}}else{b[d]=e}}}p.Animation=p.extend(Xc,{tweener:function(a,b){if(p.isFunction(a)){b=a;a=["*"]}else{a=a.split(" ")}var c,d=0,e=a.length;for(;d<e;d++){c=a[d];Uc[c]=Uc[c]||[];Uc[c].unshift(b)}},prefilter:function(a,b){if(b){Tc.unshift(a)}else{Tc.push(a)}}});function Zc(a,b,c){var d,e,f,g,h,i,j,k,l,m=this,n=a.style,o={},q=[],r=a.nodeType&&$b(a);if(!c.queue){k=p._queueHooks(a,"fx");if(k.unqueued==null){k.unqueued=0;l=k.empty.fire;k.empty.fire=function(){if(!k.unqueued){l()}}}k.unqueued++;m.always(function(){m.always(function(){k.unqueued--;if(!p.queue(a,"fx").length){k.empty.fire()}})})}if(a.nodeType===1&&("height"in b||"width"in b)){c.overflow=[n.overflow,n.overflowX,n.overflowY];if(p.css(a,"display")==="inline"&&p.css(a,"float")==="none"){if(!p.support.inlineBlockNeedsLayout||dc(a.nodeName)==="inline"){n.display="inline-block"}else{n.zoom=1}}}if(c.overflow){n.overflow="hidden";if(!p.support.shrinkWrapBlocks){m.done(function(){n.overflow=c.overflow[0];n.overflowX=c.overflow[1];n.overflowY=c.overflow[2]})}}for(d in b){f=b[d];if(Qc.exec(f)){delete b[d];i=i||f==="toggle";if(f===(r?"hide":"show")){continue}q.push(d)}}g=q.length;if(g){h=p._data(a,"fxshow")||p._data(a,"fxshow",{});if("hidden"in h){r=h.hidden}if(i){h.hidden=!r}if(r){p(a).show()}else{m.done(function(){p(a).hide()})}m.done(function(){var b;p.removeData(a,"fxshow",true);for(b in o){p.style(a,b,o[b])}});for(d=0;d<g;d++){e=q[d];j=m.createTween(e,r?h[e]:0);o[e]=h[e]||p.style(a,e);if(!(e in h)){h[e]=j.start;if(r){j.end=j.start;j.start=e==="width"||e==="height"?1:0}}}}}function $c(a,b,c,d,e){return new $c.prototype.init(a,b,c,d,e)}p.Tween=$c;$c.prototype={constructor:$c,init:function(a,b,c,d,e,f){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=f||(p.cssNumber[c]?"":"px")},cur:function(){var a=$c.propHooks[this.prop];return a&&a.get?a.get(this):$c.propHooks._default.get(this)},run:function(a){var b,c=$c.propHooks[this.prop];if(this.options.duration){this.pos=b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration)}else{this.pos=b=a}this.now=(this.end-this.start)*b+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(c&&c.set){c.set(this)}else{$c.propHooks._default.set(this)}return this}};$c.prototype.init.prototype=$c.prototype;$c.propHooks={_default:{get:function(a){var b;if(a.elem[a.prop]!=null&&(!a.elem.style||a.elem.style[a.prop]==null)){return a.elem[a.prop]}b=p.css(a.elem,a.prop,false,"");return!b||b==="auto"?0:b},set:function(a){if(p.fx.step[a.prop]){p.fx.step[a.prop](a)}else if(a.elem.style&&(a.elem.style[p.cssProps[a.prop]]!=null||p.cssHooks[a.prop])){p.style(a.elem,a.prop,a.now+a.unit)}else{a.elem[a.prop]=a.now}}}};$c.propHooks.scrollTop=$c.propHooks.scrollLeft={set:function(a){if(a.elem.nodeType&&a.elem.parentNode){a.elem[a.prop]=a.now}}};p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(d,e,f){return d==null||typeof d==="boolean"||!a&&p.isFunction(d)&&p.isFunction(e)?c.apply(this,arguments):this.animate(_c(b,true),d,e,f)}});p.fn.extend({fadeTo:function(a,b,c,d){return this.filter($b).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d),g=function(){var b=Xc(this,p.extend({},a),f);if(e){b.stop(true)}};return e||f.queue===false?this.each(g):this.queue(f.queue,g)
},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop;b(d)};if(typeof a!=="string"){d=c;c=a;a=b}if(c&&a!==false){this.queue(a||"fx",[])}return this.each(function(){var b=true,c=a!=null&&a+"queueHooks",f=p.timers,g=p._data(this);if(c){if(g[c]&&g[c].stop){e(g[c])}}else{for(c in g){if(g[c]&&g[c].stop&&Sc.test(c)){e(g[c])}}}for(c=f.length;c--;){if(f[c].elem===this&&(a==null||f[c].queue===a)){f[c].anim.stop(d);b=false;f.splice(c,1)}}if(b||!d){p.dequeue(this,a)}})}});function _c(a,b){var c,d={height:a},e=0;b=b?1:0;for(;e<4;e+=2-b){c=Wb[e];d["margin"+c]=d["padding"+c]=a}if(b){d.opacity=d.width=a}return d}p.each({slideDown:_c("show"),slideUp:_c("hide"),slideToggle:_c("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});p.speed=function(a,b,c){var d=a&&typeof a==="object"?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:typeof d.duration==="number"?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(d.queue==null||d.queue===true){d.queue="fx"}d.old=d.complete;d.complete=function(){if(p.isFunction(d.old)){d.old.call(this)}if(d.queue){p.dequeue(this,d.queue)}};return d};p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};p.timers=[];p.fx=$c.prototype.init;p.fx.tick=function(){var a,c=p.timers,d=0;Oc=p.now();for(;d<c.length;d++){a=c[d];if(!a()&&c[d]===a){c.splice(d--,1)}}if(!c.length){p.fx.stop()}Oc=b};p.fx.timer=function(a){if(a()&&p.timers.push(a)&&!Pc){Pc=setInterval(p.fx.tick,p.fx.interval)}};p.fx.interval=13;p.fx.stop=function(){clearInterval(Pc);Pc=null};p.fx.speeds={slow:600,fast:200,_default:400};p.fx.step={};if(p.expr&&p.expr.filters){p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length}}var ad=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length){return a===b?this:this.each(function(b){p.offset.setOffset(this,a,b)})}var c,d,e,f,g,h,i,j={top:0,left:0},k=this[0],l=k&&k.ownerDocument;if(!l){return}if((d=l.body)===k){return p.offset.bodyOffset(k)}c=l.documentElement;if(!p.contains(c,k)){return j}if(typeof k.getBoundingClientRect!=="undefined"){j=k.getBoundingClientRect()}e=bd(l);f=c.clientTop||d.clientTop||0;g=c.clientLeft||d.clientLeft||0;h=e.pageYOffset||c.scrollTop;i=e.pageXOffset||c.scrollLeft;return{top:j.top+h-f,left:j.left+i-g}};p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;if(p.support.doesNotIncludeMarginInBodyOffset){b+=parseFloat(p.css(a,"marginTop"))||0;c+=parseFloat(p.css(a,"marginLeft"))||0}return{top:b,left:c}},setOffset:function(a,b,c){var d=p.css(a,"position");if(d==="static"){a.style.position="relative"}var e=p(a),f=e.offset(),g=p.css(a,"top"),h=p.css(a,"left"),i=(d==="absolute"||d==="fixed")&&p.inArray("auto",[g,h])>-1,j={},k={},l,m;if(i){k=e.position();l=k.top;m=k.left}else{l=parseFloat(g)||0;m=parseFloat(h)||0}if(p.isFunction(b)){b=b.call(a,c,f)}if(b.top!=null){j.top=b.top-f.top+l}if(b.left!=null){j.left=b.left-f.left+m}if("using"in b){b.using.call(a,j)}else{e.css(j)}}};p.fn.extend({position:function(){if(!this[0]){return}var a=this[0],b=this.offsetParent(),c=this.offset(),d=ad.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(p.css(a,"marginTop"))||0;c.left-=parseFloat(p.css(a,"marginLeft"))||0;d.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(p.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||e.body;while(a&&(!ad.test(a.nodeName)&&p.css(a,"position")==="static")){a=a.offsetParent}return a||e.body})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=bd(a);if(f===b){return g?c in g?g[c]:g.document.documentElement[e]:a[e]}if(g){g.scrollTo(!d?f:p(g).scrollLeft(),d?f:p(g).scrollTop())}else{a[e]=f}},a,e,arguments.length,null)}});function bd(a){return p.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:false}p.each({Height:"height",Width:"width"},function(a,c){p.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!=="boolean"),h=d||(e===true||f===true?"margin":"border");return p.access(this,function(c,d,e){var f;if(p.isWindow(c)){return c.document.documentElement["client"+a]}if(c.nodeType===9){f=c.documentElement;return Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])}return e===b?p.css(c,d,e,h):p.style(c,d,e,h)},c,g?e:b,g,null)}})});a.jQuery=a.$=p;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return p})}})(window);define("jquery/dist/jquery",function(){});(function(a){"use strict";if(typeof window=="object"&&window.wallaby){wallaby.delayStart();a("./",require,wallaby)}else if(typeof define==="function"&&define.amd){define("jssdk",[],function(){return a(require.toUrl("jssdk").split("/").slice(0,-1).join("/"),require)})}else{var b=a(__dirname,{config:function(){}});delete b.tests;delete b.bench;delete b.modules;module.exports={cfg:b,extend:function(a){Object.keys(this.cfg).forEach(function(b){var c=a[b],d=this[b];if(a[b]){if(c instanceof Array){a[b]=c.concat(d)}else{Object.keys(d).forEach(function(a){c[a]=d[a]})}}else{a[b]=d}},this.cfg);return a}}}})(function(a,require,b){"use strict";var c={},d;if(!Array.prototype.forEach){Array.prototype.forEach=function e(a,b){for(var c=this,d=0,e=c.length;d<e;++d){a.call(b||window,c[d],d,c)}}}if(typeof Object!=="undefined"&&!Object.keys){Object.keys=function f(a){var b=[],c;for(c in a){if(Object.prototype.hasOwnProperty.call(a,c)){b.push(c)}}return b}}require.config(d={deps:b?b.tests:[],callback:b&&b.start,paths:function(b){b.tests=[];b.bench=[];b.paths={};b.modules=["config","logger","Emitter","Promise","request","RPC","RPC/statuses/sdc","RPC/statuses/token","RPC/statuses/processing","Storage","Model","Model.List","RPCModel","cloud/Entry","utils/util","utils/extension","mail/Folder","mail/Contact","mail/User","mail/Phone","mail/Password","Action","mail/actions/MarkAs","mail/actions/MarkAsAll","mail/actions/MoveTo","mail/actions/MoveToAll","mail/actions/Delete","mail/actions/DeleteAll","mail/actions/Spam","mail/actions/Archive","mail/actions/ArchiveAll","mail/actions/PasswordGenerate","mail/actions/FolderAccessToken","mail/actions/UserAdditionalEmail","mail/actions/Toggle2StepAuth","mail/actions/Snooze","mail/actions/PasswordRecovery","mail/actions/PasswordStrength","mail/Message","mail/Thread","calendar/Event","calendar/Calendar","calendar/actions/EventAction","mail/Attachment","mail/MessageFormData","mail/User/TOTPCode","mail/RestoreEmail","oauth/Application","mail/User/Error","help/Content"];b.modules.forEach(function(a){var c=a.split("/");c.push(c.slice().pop());c=c.join("/");b.tests.push(a+".test");b.bench.push(a+".bench");b.paths[a+".test"]=c+".test";b.paths[a+".bench"]=c+".bench";b.paths[a]=c});b.paths["mail/Spam/old-api-adapter"]="mail/actions/Spam/old-api-adapter";var c={uuid:"vendor/uuid",filter:"vendor/filter",jquery:"vendor/jquery","jquery.mockjax":"vendor/jquery.mockjax",benchmark:"vendor/benchmark",canjs:"//cdnjs.cloudflare.com/ajax/libs/can.js/1.1.7/can.jquery.min",exojs:"https://dl.dropboxusercontent.com/s/9mw2uyevis1ue2d/exoskeleton.js?dl=0",backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min",underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min",inherit:"vendor/inherit",performance:"vendor/performance",apidoc:"tests/apidoc",FileAPI:"https://mailru.github.io/FileAPI/dist/FileAPI.html5"};function d(){var c=b.paths;[].forEach.call(arguments,function(b){Object.keys(b).forEach(function(d,e){e=b[d];c[d]=(/^(\/\/|http)/.test(e)?"":a+"/")+e})});return c}return d(b.paths,c)}(typeof c==="undefined"?{}:c)});Object.keys(d).forEach(function(a){c[a]=d[a]});return c});define("jssdk/boot",function(){});(function(a){function b(){var a=/\{([0-9a-zA-Z]+)\}/g,b=Array.prototype.slice;function c(c){var d;if(arguments.length===2&&typeof arguments[1]==="object"){d=arguments[1]}else{d=b.call(arguments,1)}if(!d||!d.hasOwnProperty){d={}}return c.replace(a,function e(a,b,f){var g;if(c[f-1]==="{"&&c[f+a.length]==="}"){return b}else{g=d.hasOwnProperty(b)?d[b]:null;if(g===null||g===undefined){return""}return g}})}return function(a,b,d){if(typeof b==="object"){d=b;b=null}return c(a,d)}}a.i18n=b();if(typeof define==="function"){define("mrg-i18n-utils",[],function(){return a.i18n})}})(window);define("mrg-i18n-utils/src/i18n",function(){});define("toolkit-common/jquery/__fest/jquery__fest",["jquery","mrg-i18n-utils"],function($,i18n){if(!window.fest){window.fest={};window.fest.i18n=i18n}$.fest=function(a,b,c,d){var e=$.extend({},$.fn.fest.defaults,d);var f=function(){var d;if(window.fest[a]){d=window.fest[a](b)}else{$(window).triggerHandler("fest.notDefinedTemplateMethod",[a])}if(typeof c==="function"){c(d)}return d};if(window.fest&&window.fest[a]!==undefined){return f()}else{var g=e.basePath+a+".js";$(window).triggerHandler("fest.connection.progress",[g]);$.getScript(g).done(function(a,b,c){$(window).triggerHandler("fest.connection.success",[g]);window.setTimeout(f,1)}).fail(function(a,b,c){$(window).triggerHandler("fest.connection.error",[g,c])})}};$.fn.fest=function(a,b,c){$.fest(a,b,function(a){this.trigger("destroy.view");this.each(function(){while(this.firstChild){this.removeChild(this.firstChild)}this.innerHTML=a});if(typeof a==="string"&&a.indexOf('data-rb="show"')>-1){this.find('[data-rb="show"]').trigger("rb-show")}if(c&&c instanceof Function){c.call()}}.bind(this));return this};$.fn.fest.defaults={basePath:"/fest/"}});define("uuid",[],function(){var a=Math.floor,b=Math.random;function c(){return a(b()*65536).toString(16)}return function d(){return c()+c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c()}});(function(){"use strict";function a(a,b,c){return function(){var d=arguments,e;if(typeof c==="function"){try{e=c.apply(a,d)}catch(f){a.reject(f);return}if(e&&typeof e.then==="function"){if(e.done&&e.fail){e.__noLog=true;e.done(a.resolve).fail(a.reject);e.__noLog=false}else{e.then(a.resolve,a.reject)}return}else{d=[e];b="resolve"}}a[b].apply(a,d)}}var b=function(c){var d=false;function e(a,b){i.done=i.fail=function(){return i};i[a?"done":"fail"]=function(a){if(typeof a==="function"){a(b)}return i};var c,d=a?g:h,e=0,f=d.length;for(;e<f;e++){c=d[e];if(typeof c==="function"){c(b)}}d=g=h=null}function f(a){return function(b){if(d){return i}d=true;i.resolve=i.reject=function(){return i};if(a&&b&&b.then&&b.pending!==false){b.then(function(a){e(true,a)},function(a){e(false,a)})}else{e(a,b)}return i}}var g=[],h=[],i={done:function k(a){g.push(a);return i},fail:function l(a){h.push(a);return i},then:function m(c,d){var e=b();i.__noLog=true;i.done(a(e,"resolve",c)).fail(a(e,"reject",d));i.__noLog=false;return e},notify:function(){return i},progress:function(){return i},promise:function(){return i},always:function n(a){i.done(a).fail(a);return i},resolve:f(true),reject:f(false)};i["catch"]=function(a){return i.then(null,a)};i.constructor=b;if(typeof c==="function"){try{c(i.resolve,i.reject)}catch(j){i.reject(j)}}return i};b.all=function(a){var c=b(),d,e=0,f=a.length,g=f,h=[],i,j=function(a,b){a>=0&&(h[a]=b);if(--g<=0){c.resolve(h)}},k=function(a){c.reject([a])};if(g===0){j()}else{for(;e<f;e++){d=a[e];if(d&&typeof d.then==="function"){i=j.bind(null,e);d.__noLog=true;if(d.done&&d.fail){d.done(i).fail(k)}else{d.then(i,k)}d.__noLog=false}else{j(e,d)}}}return c};b.race=function(a){return b.all(a).then(function(a){return a.pop()})};b.cast=function(a){var c=b().resolve(a);return a&&typeof a.then==="function"?c.then(function(){return a}):c};b.resolve=function(a){return a&&a.constructor===b?a:b().resolve(a)};b.reject=function(a){return b().reject(a)};b.map=function(a){var c=[],d,e=0,f={};for(d in a){c.push(a[d])}return b.all(c).then(function(b){for(d in a){f[d]=b[e++]}return f})};b.version="0.3.1";if(!window.Promise){window.Promise=b}if(typeof define==="function"&&(define.amd||define.ajs)){define("Promise",[],function(){return b})}else if(typeof module!="undefined"&&module.exports){module.exports=b}else{window.Deferred=b}})();define("utils/util",["jquery","Promise"],function($,a){"use strict";var b=window.setTimeout,c=window.setImmediate||b;var d={extend:function(a){return $.extend.apply($,arguments)},cloneJSON:function(a){return typeof a==="object"?JSON.parse(JSON.stringify(a)):a},cloneObject:function(a){var b={},c;if(a&&a instanceof Object){for(c in a){b[c]=a[c]}}return b},toCamelCase:function(a,b){b=b||"_";var c=new RegExp("(\\"+b+"\\w)","g");return a.replace(c,function(a){return a[1].toUpperCase()})},nextTick:function(a,b){if(b){return function(){var b=arguments,d=this;c(function(){a.apply(d,b)})}}else{c(a)}},debounce:function(a,c,d){var f=function(){var e=arguments,g=e.length,h=d||this;clearTimeout(f.pid);f.pid=b(function(){if(g===0){a.call(h)}else if(g===1){a.call(h,e[0])}else if(g===2){a.call(h,e[0],e[1])}else if(g===3){a.call(h,e[0],e[1],e[2])}else{a.apply(h,e)}},c)};f.cancel=e;return f},bind:function(a,b,c,d){if(c==null){c=[]}else if(!Array.isArray(c)){throw"util.bind: `args` must be array or null"}return function(){var e=c;var f=d;if(f==null){f=arguments.length}if(f>0){e=c.slice();for(var g=0;g<f;g++){e.push(arguments[g])}}return b.apply(a||this,e)}},bindWithoutArgs:function(a,b,c){return Array.isArray(b)?function(){return a.apply(c||this,b)}:function(){return a.call(c||this)}},range:function(a){var b=[],c=0;for(;c<a;c++){b.push(c)}return b},pluck:function(a,b){if(!Array.isArray(a)){return[]}return a.map(function(a){return a[b]})},object:function(a,b){a=a===void 0||a===null?[]:[].concat(a);b=b===void 0?[]:[].concat(b);return a.reduce(function(a,c,d){if(Array.isArray(c)){a[c[0]]=c[1];return a}a[c]=b[d];return a},{})},promisify:function(b,c){return function d(){var d=Array.prototype.slice.call(arguments);if(!c){c=this}return new a(function e(a,f){d.push(function(b,c){if(b){f(b)}else{a(c)}});b.apply(c,d)})}}};function e(){clearTimeout(this.pid)}d.version="0.7.0";return d});(function(a){var b=Date.now?Date.now():+new Date,c=a.performance||{},d=[],e={},f=function(a,b){var c=0,e=d.length,f=[];for(;c<e;c++){if(d[c][a]==b){f.push(d[c])}}return f},g=function(a,b){var c=d.length,e;while(c--){e=d[c];if(e.entryType==a&&(b===void 0||e.name==b)){d.splice(c,1)}}};if(!c.now){c.now=c.webkitNow||c.mozNow||c.msNow||function(){return(Date.now?Date.now():+new Date)-b}}if(!c.mark){c.mark=c.webkitMark||function(a){var b={name:a,entryType:"mark",startTime:c.now(),duration:0};d.push(b);e[a]=b}}if(!c.measure){c.measure=c.webkitMeasure||function(a,b,c){b=e[b].startTime;c=e[c].startTime;d.push({name:a,entryType:"measure",startTime:b,duration:c-b})}}if(!c.getEntriesByType){c.getEntriesByType=c.webkitGetEntriesByType||function(a){return f("entryType",a)}}if(!c.getEntriesByName){c.getEntriesByName=c.webkitGetEntriesByName||function(a){return f("name",a)}}if(!c.clearMarks){c.clearMarks=c.webkitClearMarks||function(a){g("mark",a)}}if(!c.clearMeasures){c.clearMeasures=c.webkitClearMeasures||function(a){g("measure",a)}}a.performance=c;if(typeof define==="function"&&(define.amd||define.ajs)){define("performance",[],function(){return c})}})(window);(function(){"use strict";var a=/-/g,b=/\s+/,c=/-(.)/g,d=function(a,b){return b.toUpperCase()},e={}.hasOwnProperty,f=[];function g(b,c){var d=b.__emList;c=c.toLowerCase().replace(a,"");if(d===void 0){d=b.__emList={};d[c]=[]}else if(d[c]===void 0){d[c]=[]}return d[c]}var h=function(){};h.fn=h.prototype={constructor:h,on:function(a,c){a=a.split(b);var d=a.length,e;while(d--){e=g(this,a[d]);e.push(c)}return this},off:function(a,c){if(a===void 0){this.__emList=a}else{a=a.split(b);var d=a.length;while(d--){var e=g(this,a[d]),f=e.length,h=-1;if(arguments.length===1){e.splice(0,1e5)}else{if(e.indexOf){h=e.indexOf(c)}else{while(f--){if(e[f]===c){h=f;break}}}if(h!==-1){e.splice(h,1)}}}}return this},one:function(a,b){var c=function(){this.off(a,c);return b.apply(this,arguments)};return this.on(a,c)},emit:function(a,b){var e=g(this,a),h=e.length,i,j,k,l,m;a="on"+a.charAt(0).toUpperCase()+a.substr(1);if(a.indexOf("-")>-1){a=a.replace(c,d)}if(typeof this[a]==="function"){l=this[a].apply(this,[].concat(b))}if(h>0){b=b===void 0?f:[].concat(b);m=b.length;while(h--){i=e[h];j=this;if(i!==void 0){if(i.handleEvent!==void 0){j=i;i=i.handleEvent}if(m===0){k=i.call(j)}else if(m===1){k=i.call(j,b[0])}else if(m===2){k=i.call(j,b[0],b[1])}else{k=i.apply(j,b)}if(k!==void 0){l=k}}}}return l},trigger:function(a,b){var c=new i(a);c.target=c.target||this;c.result=this.emit(a.type||a,[c].concat(b));return this}};function i(b){if(b instanceof i){return b}if(b.type){for(var c in b){if(e.call(b,c)){this[c]=b[c]}}b=b.type}this.type=b.toLowerCase().replace(a,"")}i.fn=i.prototype={constructor:i,defaultPrevented:false,propagationStopped:false,isDefaultPrevented:function(){return this.defaultPrevented},preventDefault:function(){this.defaultPrevented=true},stopPropagation:function(){this.propagationStopped=true},isPropagationStopped:function(){return this.propagationStopped}};h.apply=function(a){a.on=h.fn.on;a.off=h.fn.off;a.one=h.fn.one;a.emit=h.fn.emit;a.trigger=h.fn.trigger;return a};h.version="0.3.1";h.Event=i;h.getListeners=g;if(typeof define==="function"&&(define.amd||define.ajs)){define("Emitter",[],function(){return h})}else if(typeof module!="undefined"&&module.exports){module.exports=h}else{window.Emitter=h}})();define("logger",["uuid","utils/util","performance","Promise","Emitter"],function(a,b,c,d,e){"use strict";Error.prototype.toJSON=function(){return{name:this.name,message:this.message,stack:this.stack}};var f=1,g=e.getListeners,h=window.encodeURIComponent,i=/\s+/,j={},k=[];function l(a){return new Date(a).toISOString().slice(11,-1)}function m(a,b){return"[["+a.label.replace(/(:pending|^\[\[|\]\]$)/g,"")+":"+b+"]]"}var n={index:j,parentId:0,metaOffset:0,disabled:false,entries:k,useUUID:false,uuid:a,catchUncaughtException:function(a){a.onerror=function b(a,c,d,e,f){n.add("error",{type:f&&f.type,message:a,url:c,line:d,column:e,stack:f&&f.stack.toString()});return false}},add:function(a,b,c,d){if(n.disabled){return this}n.metaOffset=1;return this.addEntry("log",a,b,c,d)},filterArguments:function(a){return a},scope:function(a,b,c,d){if(c==null){c=-2}if(c>=-99){c=n.meta(c)}n.metaOffset=1;return this.addEntry("scope",a,b,d,c)},addEntry:function(a,b,c,d,e){n.metaOffset+=1;var f=a instanceof o?a:new o(a,b,c,d||this.parentId,e);j[f.id]=f;f.idx=k.push(f)-1;this._emit();return f},closest:function(a,b){var c;a=a.id||a;while((c=j[a])&&a){a=c.parentId;if(c.label===b){return c}}return null},chain:function(a,b){var c=[],d;while((d=j[a])&&a){a=d.parentId;c.push(d)}c.reverse();if(b){c=c.map(function(a){return"["+a.id+"] "+a.label}).join(b)}return c},getScope:function(a,b,c,d){n.metaOffset+=1;return typeof a==="string"?this.addEntry("scope",a,b,c,d):a},wrap:function(a,b,c,d,e){if(arguments.length===1){c=a;a=j[n.parentId]}else if(c===void 0){c=b;b=void 0}if(c&&!c.__logger__&&!this.disabled){n.metaOffset+=1;e=e||n.meta();if(typeof c==="function"){var f=function(){var f=n.getScope(a,b,d,e),g=n.parentId,h;n.parentId=f.id;n.metaOffset+=1;h=n.wrap(f,c.apply(this,arguments));n.parentId=g;return h};c.__logger__=true;f.__logger__=true;return f}else if(c.then){n.getScope(a,b,null,e).wrap(c)}}n.metaOffset=0;return c},call:function(a,b,c){n.metaOffset+=1;return this.wrap(a,b,c)()},reset:function(){f=1;this.index=j={};this.entries=k=[];this.parentId=0},print:function(a){var b={},c={},d="";k.forEach(function(a){var c=a.parentId;(b[c]=b[c]||[]).push(a)});(function e(c,f){var g=b[c]||[],h=0,i=g.length,j,k,m;for(;h<i;h++){j=g[h];m=j.args;k="["+l(j.ts)+"] "+j.label;if(a){k+=m?": "+JSON.stringify(m):""}if(b[j.id]){if(a){d+=f+k+"\n";e(j.id,"  "+f)}else{console.group(k);m&&console.log("[details] ",m);e(j.id);console.groupEnd()}}else if(a){d+=f+k+"\n"}else{console.log(k,m)}}})(0,"");return a&&d},on:function(a,b){a=a.trim().split(i);var c=a.length,d;while(c--){d=a[c].split(":");g(this,d[1]||d[0]).push({fn:b,label:d[1]||d[0],parent:d[1]&&d[0]})}return this},off:function(a,b){a=a.trim().split(i);var c=a.length,d,e,f,h;while(c--){d=a[c].split(":");e=g(this,d[1]||d[0]);f=e.length;while(f--){h=e[f];if(h.fn===b&&h.parent===(d[1]&&d[0])){e.splice(f,1)}}}return this},_emit:function(){var a,b,c,d=k.length,e,f;while(d--){a=k[d];if(!a.emitted){a.emitted=true;c=g(this,a.label);e=c.length;while(e--){f=c[e];if(f.parent){b=this.closest(a.id,f.parent);if(b){f.fn(b,a)}}else{f.fn(a)}}}}},last:function(){return k[k.length-1]},meta:function(){return{fn:"unknown",file:"unknown",line:0,column:0}},parseStackRow:function(a){a+="";var b=a.match(/at\s+([^\s]+)(?:.*?)\(((?:http|file|\/)[^)]+:\d+)\)/),c;if(!b){b=a.match(/at\s+(.+)/);if(!b){b=a.match(/^(.*?)(?:\/<)*@(.*?)$/)||a.match(/^()(https?:\/\/.+)/)}else{b[0]="<anonymous>";b.unshift("")}}if(b){c=b[2].match(/^(.*?):(\d+)(?::(\d+))?$/)||[];b={fn:(b[1]||"<anonymous>").trim(),file:c[1],line:c[2]|0,column:c[3]|0}}else{b=null}return b},serialize:function(){return JSON.stringify(k)},mailTo:function(a){var b=document.createElement("a");b.href="mailto:"+a+"?subject="+h("[logger] "+new Date)+"&body="+h(this.serialize());b.innerHTML="send";b.click()}};function o(d,e,g,h,i){this.id=g&&g.uuid||(n.useUUID?a():f++);this.ts=c.now();this.type=d;this.label=e+"";try{g=b.cloneJSON(n.filterArguments(g))}catch(j){g=j}this.args=g;this.parentId=h;this.linked=[];n.metaOffset+=1;this.meta=i||n.meta();n.metaOffset=0}o.fn=o.prototype={constructor:o,add:function(a,b){return n.add(a,b,this.id,this.meta)},call:function(a,b,c){if(typeof a==="function"){var d=n.parentId,e;n.parentId=this.id;e=this.wrap(b?a.apply(null,b):a());n.parentId=d;return e}return n.wrap(a,b,c,this.id,this.meta)()},wrap:function(a){if(typeof a==="function"){return n.wrap(this,a)}else if(a&&!a.__logger__&&a.then){var b=a.then,c=a.done,d=a.fail,e=a.always,f=this;a.__logger__=f;c&&(a.done=function(b){var d=a.__noLog,e=n.meta(-1-(a.metaOffset|0));return c.call(a,function(){(d?a.__logger__:n.addEntry("scope",m(f,"done"),null,a.__logger__.id,e)).call(b,arguments)})});d&&(a.fail=function(b){var c=a.__noLog,e=n.meta(-1-(a.metaOffset|0));return d.call(a,function(){(c?a.__logger__:n.addEntry("scope",m(f,"fail"),null,a.__logger__.id,e)).call(b,arguments)})});e&&(a.always=function(b){var c=n.meta(-1-(a.metaOffset|0)),d;a.__noLog=true;d=e.call(a,function(){n.addEntry("scope",m(f,"always"),null,a.__logger__.id,c).call(b,arguments)});a.__noLog=false;return d});a["catch"]=function(b){return a.then(null,b,true)};a.then=function(c,d,e){if(a.__noLog){return b.call(a,c,d)}var g=n.meta(-1-(a.metaOffset|0)-!!e),h=e?"catch":"then",i=new o("scope","",null,f.id,g);function j(){i.label=m(f,h+":resolved");n.addEntry(i);return i.call(c,arguments)}function k(){i.label=m(f,h+":rejected");n.addEntry(i);return i.call(d,arguments)}return i.wrap(b.call(a,c?j:null,d?k:null))}}return a},scope:function(a,b,c){return n.scope(a,b,c||-3,this.id)},chain:function(a){return n.chain(this.id,a)},pluck:function(a){return this.chain().map(function(b){return b[a]})},parent:function(){return j[this.parentId]},toJSON:function(){return{id:this.id,dependId:this.dependId,linked:this.linked,type:this.type,label:this.label,args:this.args,meta:this.meta}}};Function.prototype.logger=function(a,b){return n.wrap(a,b,this,null,n.meta(-1))};n.Entry=o;window.setTimeoutLog=function(a,b,c){};window.setIntervalLog=function(a,b,c){};d.Log=function(a,b){if(b){a="[["+a+"]]"}else{b=a;a="[[promise]]"}return n.scope(a,null,-2).call(function(){return new d(b)})};n.version="0.6.1";return window.octolog=window.logger=n});(function(){"use strict";var a=/\s+/,b=/[\[.\]]/,c=/(?:\.|['"]?]?\.?\[['"]?|['"]?])/;function d(b){return(b+"").trim().split(a)}function e(a,b,c){var e,g,h,i,j,k;if(b){b=d(b);g=b.length;while(g--){h=b[g];i=false;if(h.charAt(0)==="!"){i=true;h=h.substr(1)}if(h.indexOf(":")!==-1){h=h.split(":");j=h[1];k=h[2];h=h[0]}e=f(a,h);if(j!==void 0){e=k===void 0?e==j:e>=j&&e<=k}if(c){e=e!==void 0}else{e=!!e}if(e^i){return true}}}return false}function f(a,d,e,f){var g=arguments.length===3;if(b.test(d)){var h=d.split(c),i=0,j=h.length,k=a,l=a,m;for(;i<j;i++){d=h[i];if(d!==""){m=d;if(k){l=k;k=k[d];if(e&&!g&&!k){l[d]=k={}}}else{return void 0}}}if(e){if(g){delete l[m]}else{l[m]=f}}return k}else{if(e){if(g){delete a[d]}else{a[d]=f}}return a[d]}}var g=function(a){if(!(this instanceof g)){return new g(a)}if(a){this.set(a)}};g.fn=g.prototype={constructor:g,is:function(a){return e(this,a)},has:function(a){return e(this,a,true)},get:function(a,b){var c=f(this,a);return c===void 0?b:c},set:function(a,b){var c=a;if(typeof a!=="object"){c={};c[a]=b}if(c instanceof Object){for(var d in c){if(c.hasOwnProperty(d)){f(this,d,true,c[d])}}}return this},unset:function(a){var b=arguments,c=b.length;while(c--){f(this,b[c],true)}return this}};g.apply=function(a){a.is=g.is;a.has=g.has;a.get=g.get;a.set=g.set;a.unset=g.unset;return a};var h=g({__version__:"0.1.0"}),i;for(i in h){g[i]=h[i]}g.version="0.1.0";if(typeof define==="function"&&(define.amd||define.ajs)){define("config",[],function(){return g})}else if(typeof module!="undefined"&&module.exports){module.exports=g}else{window.config=window.__config__=g}})();define("jquery.mockjax",["jquery"],function($){(function($){var a=$.ajax,b=[],c=[],d=/=\?(&|$)/,e=(new Date).getTime();function f(a){if(window.DOMParser==undefined&&window.ActiveXObject){DOMParser=function(){};DOMParser.prototype.parseFromString=function(a){var b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b}}try{var b=(new DOMParser).parseFromString(a,"text/xml");if($.isXMLDoc(b)){var c=$("parsererror",b);if(c.length==1){throw"Error: "+$(b).text()}}else{throw"Unable to parse XML"}return b}catch(d){var e=d.name==undefined?d:d.name+": "+d.message;$(document).trigger("xmlParseError",[e]);return undefined}}function g(a,b,c){(a.context?$(a.context):$.event).trigger(b,c)}function h(a,b){var c=true;if(typeof b==="string"){return $.isFunction(a.test)?a.test(b):a==b}$.each(a,function(d){if(b[d]===undefined){c=false;return c}else{if(typeof b[d]==="object"&&b[d]!==null){c=c&&h(a[d],b[d])}else{if(a[d]&&$.isFunction(a[d].test)){c=c&&a[d].test(b[d])}else{c=c&&a[d]==b[d]}}}});return c}function i(a,b){return a[b]===$.mockjaxSettings[b]}function j(a,b){if($.isFunction(a)){return a(b)}if($.isFunction(a.url.test)){if(!a.url.test(b.url)){return null}}else{var c=a.url.indexOf("*");if(a.url!==b.url&&c===-1||!new RegExp(a.url.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".+")).test(b.url)){return null}}if(a.data&&b.data){if(!h(a.data,b.data)){return null}}if(a&&a.type&&a.type.toLowerCase()!=b.type.toLowerCase()){return null}return a}function k(b,c,d){if(b.once){$.mockjaxClear(b.mockId)}var e=function(a){return function(){return function(){var a;this.status=b.status;this.statusText=b.statusText;this.readyState=4;if($.isFunction(b.response)){b.response(d)}if(c.dataType=="json"&&typeof b.responseText=="object"){this.responseText=JSON.stringify(b.responseText)}else if(c.dataType=="xml"){if(typeof b.responseXML=="string"){this.responseXML=f(b.responseXML);this.responseText=b.responseXML}else{this.responseXML=b.responseXML}}else{this.responseText=b.responseText}if(typeof b.status=="number"||typeof b.status=="string"){this.status=b.status}if(typeof b.statusText==="string"){this.statusText=b.statusText}a=this.onreadystatechange||this.onload;if($.isFunction(a)){if(b.isTimeout){this.status=-1}a.call(this,b.isTimeout?"timeout":undefined)}else if(b.isTimeout){this.status=-1}}.apply(a)}}(this);if(b.proxy){a({global:false,url:b.proxy,type:b.proxyType,data:b.data,dataType:c.dataType==="script"?"text/plain":c.dataType,complete:function(a){b.responseXML=a.responseXML;b.responseText=a.responseText;if(i(b,"status")){b.status=a.status}if(i(b,"statusText")){b.statusText=a.statusText}this.responseTimer=setTimeout(e,b.responseTime||0)}})}else{if(c.async===false){e()}else{this.responseTimer=setTimeout(e,b.responseTime||50)}}}function l(a,b,c,d){a=$.extend(true,{},$.mockjaxSettings,a);if(typeof a.headers==="undefined"){a.headers={}}if(a.contentType){a.headers["content-type"]=a.contentType}return{status:a.status,statusText:a.statusText,readyState:1,open:function(){},send:function(){d.fired=true;k.call(this,a,b,c)},abort:function(){clearTimeout(this.responseTimer)},setRequestHeader:function(b,c){if(b==="Content-Type"&&c==="application/x-www-form-urlencoded; charset=UTF-8"){return}a.headers[b]=c},getResponseHeader:function(b){if(a.headers&&a.headers[b]){return a.headers[b]}else if(b.toLowerCase()=="last-modified"){return a.lastModified||(new Date).toString()}else if(b.toLowerCase()=="etag"){return a.etag||""}else if(b.toLowerCase()=="content-type"){return a.contentType||"text/plain"}},getAllResponseHeaders:function(){var b="";$.each(a.headers,function(a,c){b+=a+": "+c+"\n"});return b}}}function m(a,b,c){n(a);a.dataType="json";if(a.data&&d.test(a.data)||d.test(a.url)){p(a,b,c);var e=/^(\w+:)?\/\/([^\/?#]+)/,f=e.exec(a.url),g=f&&(f[1]&&f[1]!==location.protocol||f[2]!==location.host);a.dataType="script";if(a.type.toUpperCase()==="GET"&&g){var h=o(a,b,c);if(h){return h}else{return true}}}return null}function n(a){if(a.type.toUpperCase()==="GET"){if(!d.test(a.url)){a.url+=(/\?/.test(a.url)?"&":"?")+(a.jsonp||"callback")+"=?"}}else if(!a.data||!d.test(a.data)){a.data=(a.data?a.data+"&":"")+(a.jsonp||"callback")+"=?"}}function o(a,b,c){var d=c&&c.context||a,e=null;if(b.response&&$.isFunction(b.response)){b.response(c)}else{if(typeof b.responseText==="object"){$.globalEval("("+JSON.stringify(b.responseText)+")")}else{$.globalEval("("+b.responseText+")")}}q(a,d,b);r(a,d,b);if($.Deferred){e=new $.Deferred;if(typeof b.responseText=="object"){e.resolveWith(d,[b.responseText])}else{e.resolveWith(d,[$.parseJSON(b.responseText)])}}return e}function p(a,b,c){var f=c&&c.context||a;var g=a.jsonpCallback||"jsonp"+e++;if(a.data){a.data=(a.data+"").replace(d,"="+g+"$1")}a.url=a.url.replace(d,"="+g+"$1");window[g]=window[g]||function(c){data=c;q(a,f,b);r(a,f,b);window[g]=undefined;try{delete window[g]}catch(d){}if(head){head.removeChild(script)}}}function q(a,b,c){if(a.success){a.success.call(b,c.responseText||"",status,{})}if(a.global){g(a,"ajaxSuccess",[{},a])}}function r(a,b){if(a.complete){a.complete.call(b,{},status)}if(a.global){g("ajaxComplete",[{},a])}if(a.global&&!--$.active){$.event.trigger("ajaxStop")}}function s(d,e){var f,g,h;if(typeof d==="object"){e=d;d=undefined}else{e.url=d}g=$.extend(true,{},$.ajaxSettings,e);for(var i=0;i<b.length;i++){if(!b[i]){continue}h=j(b[i],g);if(!h){continue}c.push(g);$.mockjaxSettings.log(h,g);if(g.dataType==="jsonp"){if(f=m(g,h,e)){return f}}h.cache=g.cache;h.timeout=g.timeout;h.global=g.global;t(h,e);(function(b,c,d,e){f=a.call($,$.extend(true,{},d,{xhr:function(){return l(b,c,d,e)}}))})(h,g,e,b[i]);return f}if($.mockjaxSettings.throwUnmocked===true){throw"AJAX not mocked: "+e.url}else{return a.apply($,[e])}}function t(a,b){if(!(a.url instanceof RegExp)){return}if(!a.hasOwnProperty("urlParams")){return}var c=a.url.exec(b.url);if(c.length===1){return}c.shift();var d=0,e=c.length,f=a.urlParams.length,g=Math.min(e,f),h={};for(d;d<g;d++){var i=a.urlParams[d];h[i]=c[d]}b.urlParams=h}$.extend({ajax:s});$.mockjaxSettings={log:function(a,b){if(a.logging===false||typeof a.logging==="undefined"&&$.mockjaxSettings.logging===false){return}if(window.console&&console.log){var c="MOCK "+b.type.toUpperCase()+": "+b.url;var d=$.extend({},b);if(typeof console.log==="function"){console.log(c,d)}else{try{console.log(c+" "+JSON.stringify(d))}catch(e){console.log(c)}}}},logging:true,status:200,statusText:"OK",responseTime:500,isTimeout:false,throwUnmocked:false,contentType:"text/plain",response:"",responseText:"",responseXML:"",proxy:"",proxyType:"GET",lastModified:null,etag:"",headers:{etag:"IJF@H#@923uf8023hFO@I#H#","content-type":"text/plain"}};
$.mockjax=function(a){var c=b.length;a.mockId=c;b[c]=a;return c};$.mockjaxClear=function(a){if(arguments.length==1){b[a]=null}else{b=[]}c=[]};$.mockjax.handler=function(a){if(arguments.length==1){return b[a]}};$.mockjax.mockedAjaxCalls=function(){return c};$.mockjax.once=function(a){a.once=true;return $.mockjax(a)}})(jQuery)});define("request",["uuid","logger","performance","config","Promise","Emitter","utils/util","jquery","jquery.mockjax"],function(a,b,c,d,e,f,g,$){"use strict";var h=null;var i="losswifiauth";var j={};var k=JSON.stringify;var l=function(a,b){return{url:a.url,data:g.cloneJSON(a.data),type:a.type,headers:a.options&&a.options.headers||a.headers,startTime:a.startTime,duration:a.duration,status:a.httpStatus||a.status,statusText:a.statusText,readyState:a.readyState,responseText:a.status!=200?a.responseText:void 0}};function m(a,c,d){d=g.extend({type:"POST",logger:"request",loggerMeta:d&&d.loggerMeta||b.meta(-1),headers:{},retries:m.setup("retries"),Request:n},d,{url:a,data:c});var e,f,h=d.Request;if(d.type.toUpperCase()=="GET"){f=a+"|"+k(c)+"|"+k(d&&d.headers);e=j[f];if(typeof d.cache=="undefined"){d.cache=false}if(!e){e=new h(d);j[f]=e;e.always(function(){b.add("_activeCache.remove",f);delete j[f]})}}else{e=new h(d)}return e}m.call;m.get;m.post;["call","get","post"].forEach(function(a){m[a]=function(c,d,e){var f=b.meta(-1);f.fn="request."+a;e=g.cloneObject(e);e.type=e.type||(a=="call"?"post":a);e.loggerMeta=e.loggerMeta||f;return m(c,d,e)}});m.setup=function(a,b){var c=$.ajaxSettings;if(typeof a==="string"){if(b!==void 0){c[a]=b}else{return c[a]}}else if(a===void 0){return c}else{$.ajaxSetup(a)}};m.setup({retries:1,batchUrl:"/batch",locationReload:function(){(window.mockWindow||window).location.reload()},lossWiFiAuthDetect:function(a,b){var c=a.responseText;return b=="parsererror"&&/<meta[^>]+refresh/i.test(c)}});function n(b){var d=this,f,g=b.headers["X-Request-Id"]=a();d.uuid=g;if(b.batch!==false&&h){d.batched=true;f=new e(function(a,c){h.push({req:d,opts:b,resolve:a,reject:c})});f=f.then(function(a){return d.end(false,a)},function(a){return d.end(a)})}else{f=d.send(b)}d.__logger__=f.__logger__;d._promise=f;f.metaOffset=1;d.url=b.url;d.type=b.type;d.data=b.data;d.options=b;d.startTime=c.now();m.trigger("start",d)}n.fn=n.prototype={__resultLogEntry__:{},batched:false,done:function o(a){this._promise.__noLog=this.__noLog;this._promise.done(a);return this},fail:function p(a){this._promise.__noLog=this.__noLog;this._promise.fail(a);return this},always:function q(a){this._promise.__noLog=this.__noLog;this._promise.always(a);return this},then:function r(a,b){return this._promise.then(a,b)},"catch":function(a){return this._promise["catch"](a)},send:function s(a){var c=this,d,f;c.endTime=null;c.duration=null;c.pending=true;c.aborted=false;c.retries=a.retries;c.responseText=null;c.body=null;c.status=null;c.error=null;if(a.transport){a.xhr=function(){return{getAllResponseHeaders:function(){return String(this.headers)},open:function(){},send:function(){a.transport(a,function(a){this.status=a.status;this.readyState=4;this.headers=a.headers||"Content-Type: application/json";this.responseText=a.responseText;this.onreadystatechange&&this.onreadystatechange()}.bind(this))}}}}c.xhr=d=$.ajax(a);f=new e(function(a,b){d.done(a).fail(function(a,c){b(c)})});b.wrap("[["+a.logger+"]]",l(a),f);this.__resultLogEntry__=b.addEntry("log",a.logger+":pending",null,f.__logger__.id);this.__resultLogEntry__.meta=f.__logger__.meta=a.loggerMeta;f.__noLog=true;return f.then(function(a){return c.end(false,a)},function(a){return c.end(a)})},getResponseHeader:function(a){return this.xhr.getResponseHeader(a)},getAllResponseHeaders:function(){return this.xhr.getAllResponseHeaders()},abort:function(){this.aborted=true;this.xhr&&this.xhr.abort();this.end(false)},end:function(a,b){var d=this.options;this.status=this.status==null?this.xhr.status:this.status;this.statusText=this.statusText||this.xhr.statusText;this.readyState=this.xhr.readyState;this.responseText=this.xhr.responseText;this.endTime=c.now();this.duration=this.endTime-this.startTime;this.pending=false;this.__resultLogEntry__.args=l(this);if(m.setup("lossWiFiAuthDetect")(this,a)){a=i}if(d.postProcessing){d.postProcessing(this,b)}if(a===false){this.body=b;this.__resultLogEntry__.label="[["+d.logger+":done]]"}else{this.error=a;this.__resultLogEntry__.label="[["+d.logger+":fail]]";var g=new f.Event(a===i?a:"error");m.trigger(g,this);if(g.result&&g.result.then){m.trigger("end",this);return g.result}else if(a===i&&!g.isDefaultPrevented()){m.setup("locationReload")(this)}}m.trigger("end",this);return e[this.isOK()?"resolve":"reject"](Object.create(this,{then:{value:null}}))},isOK:function(){return this.status>=200&&this.status<=202&&!this.error},retry:function(a,b){var c=this,d=b?c.options:g.cloneObject(c.options);if(d.retries>0){d.retries--;d.logger="retry:"+d.logger;a=a||e.resolve();if(!a.then){a=new e(a)}return a.then(function(){if(b){return c.send(d)}else{return m(c.url,c.data,d)}},function(){return e.reject(c)})}return e.reject(c)},is:d.is,has:d.has,get:d.get,map:function(a){if(a instanceof Function){return(a.map||a).call(a,this.get("body"))}else{var b={};$.each(a,function(a,c){b[a]=(c.map||c).call(c,this.get("body."+a))}.bind(this));return b}},equals:function(a){return a&&this._promise===a._promise}};m.batch=function(a,b){var c=h||[],d;if(h===null){h=c;c.promise=new e(g.nextTick(function(a,d){if(c.length>0){var e=m.post(b||m.setup("batchUrl"),{batch:k(c.map(function(a){var b=a.opts;return{url:b.url,type:b.type,data:b.data,headers:b.headers}}))},{batch:false}).done(function(){e.body.forEach(function(a,b){c[b].req.xhr=e.xhr;c[b].resolve(a)});a()}).fail(function(){c.forEach(function(a){a.req.xhr=e.xhr;a.reject(e)});d(e)})}else{a()}h=null},true))}d=a();return c.promise.then(function(){return d})};f.apply(m);m.from=function(a,b,c){var d=Object.create(this.Request.prototype,{then:{value:null}});d.xhr=c;d.url=a;d.data=b;d.status=c.status;d.statusText=c.statusText;d.readyState=c.readyState;d.responseText=c.responseText;d.pending=false;if(d.isOK()){d.body=JSON.parse(d.responseText)}return d};m.workflow=function(a,b){a.transport=b;return this.call(a.url,a.data,a)};m.mock=$.mockjax;m.mock.once=$.mockjax.once;m.mock.clear=$.mockjaxClear;m.all=e.all;m.Promise=e;m.Request=n;m.version="0.6.0";return m});define("RPC",["logger","request","Emitter","Promise","utils/util"],function(a,b,c,d,e){"use strict";var f=/^\/?v\d+/,g=/\/$/,h=/^\//,i=/\/{2,}/g,j=/([^$\/])\/+/g,k=JSON.stringify,l=e.cloneObject;var m={all:d.all,request:b,Promise:d,errorHandler:[]},n={version:1,sdcUrl:"//auth.mail.ru/sdc",baseUrl:"//api.mail.ru/",timeout:1e4,email:"",token:"",htmlencoded:false,tokenRetries:2,emulateHTTP:true,session:""},o=Object.prototype.hasOwnProperty;m.codes={102:"processing",200:"ok",202:"accepted",203:"non_authoritative",206:"partial",301:"move",304:"notmodified",400:"invalid",402:"payment_required",403:"denied",404:"notfound",406:"unacceptable",408:"timeout",409:"conflict",417:"expectation_failed",422:"unprocessable",423:"locked",424:"failed_dependency",426:"upgrade_required",429:"many_requests",449:"retry_with",451:"unavailable_for_legal_reasons",500:"fail",501:"not_implemented",503:"unavaliable",507:"insufficient"};m.statuses={};for(var p in m.codes){m.statuses[m.codes[p]]=p}function q(a){var b=n.baseUrl;a=String(a||"");if(h.test(a)){a=a.replace(j,"$1/")}else if(a.indexOf(b)===-1){if(!f.test(a)){a="/v"+n.version+"/"+a}a=b.replace(g,"")+("/"+a).replace(i,"/")}return a}function r(a,b){if(typeof a==="object"){b=a;a=b.url}b=b||{};var c=b.data||{};return{url:q(a),once:b.once,contentType:"application/json",type:b.type,headers:b.headers||{},responseTime:b.responseTime||15,data:c,responseText:k(b.responseText||{body:b.body||"",status:b.status||200,email:b.email||"",htmlencoded:b.htmlencoded||"",last_modified:b.last_modified||""}),response:b.response}}function s(b,c,d,e){d=l(d);d.type=e;d.loggerMeta=d.loggerMeta||a.meta(-2);return m.call(b,c,d)}m.setup=function(a,b){if(a===undefined){return n}else{if(b!==undefined){n[a]=b}else if(typeof a==="string"){return n[a]}else{for(var c in a){if(o.call(a,c)){n[c]=a[c]}}}}};m.url=function(a){return q(a)};m.hasSession=function(){return!!n.session};m.hasToken=function(){return!!n.token};m.resetToken=function(){n.token=""};m.token=function(){return m.call("tokens").then(function(a){return n.token=a.get("body.token")})};m.call=function u(c,d,e){e=l(e);e.timeout=e.timeout||n.timeout;e.Request=t;e.dataType="json";e.type=e.type?e.type.toUpperCase():"POST";e.loggerMeta=e.loggerMeta||a.meta(-1);d=l(d||{});if(!d.email&&n.email){d.email=n.email}if(n.htmlencoded!=null){d.htmlencoded=n.htmlencoded}if(n.token){d.token=n.token}if(n.emulateHTTP===true&&e.type!="GET"&&e.type!="POST"){e.type="POST"}if(n.session){d.session=n.session}e.logger=e.logger||c;return b(q(c),m.serialize(d),e)};m.serialize=function(a){return a};m.get=function v(a,b,c){return s(a,b,c,"GET")};m.post=function w(a,b,c){return s(a,b,c,"POST")};m.batch=function(a){return b.batch(a,this.url("batch"))};m.mock=function(a,c){return b.mock(r(a,c))};m.mock.once=function(a,c){return b.mock.once(r(a,c))};var t=function(){this.lastModified=null;this.htmlencoded=null;this.email=null;this.statusName=null;return b.Request.apply(this,arguments)};t.prototype=Object.create(b.Request.prototype,{constructor:{value:t}});t.prototype.end=function(a,c){this.httpStatus=this.status;if(!a){for(var d in c){if(o.call(c,d)){this[e.toCamelCase(d)]=c[d]}}this.statusName=m.codes[c.status];if(c.session){n.session=c.session}c=c.body;a=a||!this.isOK()}return b.Request.fn.end.call(this,a,c)};t.prototype.is=function(a){var c=/\b(\w+)(?::(\w+))?\b/g,d,e,f;while(!!(f=c.exec(a))){d=f[1];e=f[2];if(m.statuses[d]==this.status&&(!e||this.body==e)){return true}}return b.Request.fn.is.call(this,a)};m.Request=t;c.apply(m);b.on("error",function(a,b){var c=m.errorHandler.length,d,e;while(c--){d=m.errorHandler[c];if(b.is(d.status)){e=d.process(b);if(e){a.preventDefault();return b.retry(e,true)}}}});m.from=function(a,c,d){var e=b.from.apply(b,arguments);if(e.isOK()){e.status=e.get("body.status");e.body=e.get("body.body")}return e};m.workflow=b.workflow;m.version="0.9.0";return m});define("RPC/statuses/sdc",["RPC","request","Promise"],function(a,b,c){"use strict";var d;a.errorHandler.push({status:"denied:nosdc",process:function(){if(!d){d=b.get(a.setup("sdcUrl"),{from:location.toString()},window.IS_TESTS?{}:{jsonp:"JSONP_call",dataType:"jsonp"}).always(function(a){d=null}).then(function(a){return a.body?true:c.reject()})}return d}})});define("toolkit/b-toolkit/b-toolkit.context",[],function(){"use strict";var a;if(window.patron){a=window.patron.toolkit=window.patron.toolkit||{}}else{a={}}return a});define("toolkit/b-toolkit/b-toolkit.cache",["require","exports","module"],function(require,exports){"use strict";var a={};exports.add=function(b){var c=b.uniqid;if(!c){return}a[c]=b};exports.get=function(b){return a[b]};exports.remove=function(b){delete a[b]};exports.getState=function(){var b={},c;for(var d in a){if(!a.hasOwnProperty(d)){continue}c=a[d].bemName;if(!(c in b)){b[c]=0}b[c]++}return b}});define("toolkit/b-toolkit/b-toolkit.core",["require","toolkit/b-toolkit/b-toolkit.context","toolkit/b-toolkit/b-toolkit.cache","jquery"],function(require){"use strict";var a=require("toolkit/b-toolkit/b-toolkit.context"),b=require("toolkit/b-toolkit/b-toolkit.cache"),$=require("jquery");var c=["debug","info","warning","error"];var d=0;var e={template:""};function f(a,b){var c,d,e,g;for(c in b){e=a[c];d=b[c];if(d!==e){g=typeof d;if(g==="object"&&typeof e===g&&!(e instanceof Function)){if(f(e,d)){return c}}else{return c}}}return false}a.setup=function(a,b){if(a===undefined){return e}else{if(b!==undefined){e[a]=b}else if(typeof a==="string"){return e[a]}else{for(var c in a){if(a.hasOwnProperty(c)){e[c]=a[c]}}}}};function g(a,b){var c=$(a),d="."+this.prototype.bemName,e,f;if(!c.is(d)){c=c.find(d);if(!c.length){return}c=c.first()}f=c.getBlock();if(f){return f}try{e=JSON.parse(c.attr("data-model"))}catch(g){e={}}b=$.extend(b,{el:c,data:e,renderMode:"replace"});return new this(b)}function h(b,c){if(!c){if(typeof b==="string"){c={}}else{c=b||{};b=undefined}}return a.create(b,this,c)}a.create=function(b,c,d){if(!d){if(typeof c==="object"){d=c;c=undefined}else{d={}}}if(typeof c!=="function"){if(typeof c==="string"){c=a[c]}else{c=a["b-toolkit"]}}function f(a){c.call(this,a)}f.prototype=f.fn=Object.create(c.prototype);f.prototype.constructor=f;d.bemName=d.bemName||b;d.template=d.template||e.template;d.templateBlock=d.templateBlock||e.templateBlock||d.bemName;$.extend(f.prototype,d);f.extend=h;f.wrap=g;a[b]=f;return f};function i(a){var c,e=a.$el||a.el,f;if(e&&!this.service){c=$(e).attr("data-uniqid");if(c){f=b.get(c)}if(f){f.destroy()}}this.uniqid="toolkit-"+d++;this.uniqId=this.uniqid;$.extend(this,{data:{}},this.defaults,a);var g=$(this);$.each({on:"bind",off:"unbind",fire:"triggerHandler"},function(a,b){this[a]=function(){g[b].apply(g,arguments);return this}}.bind(this));if(this.boundAll){$.each(this.boundAll,function(a,b){this[b]=this[b].bind(this)}.bind(this))}this.setElement(a.el||a.$el);if(!this.deferredInit){this.init()}this.$el.removeAttr("data-model");if(!this.service){this.$el.attr("data-uniqid",this.uniqid);b.add(this)}}a.create("b-toolkit",i,{events:{},defaults:{},eventEmitTo:null,eventEmitPrefix:"",dirtyCheck:false,dataIsChanged:true,init:function(){},bound:function(a){if(typeof a==="string"){a=this[a]}return a.bind(this)},emit:function(a,b){var c=this.eventEmitPrefix,d=$.camelCase("on-"+(c?c+"-":"")+a),e=$.Event(a.replace(/-/g,"")),f=this.eventEmitTo||this;e.target=this;if(f[d]===void 0||f[d].apply(f,[e].concat(b))!==false){if(!e.isImmediatePropagationStopped()){return f.fire(e,b)}}},trigger:function(a,b){this.emit(a,b);this.$el.trigger(a,b)},s:function(a){if(typeof a==="string"&&a.substr(0,2)==="__"){a="."+this.bemName+a}return a},$:function(a){return this.$el.find(this.s(a))},toggleMod:function(b,c){a.toggleMod(this.$el,b,c);return this},getMods:function(){return a.getMods(this.$el)},hasMod:function(b){return a.hasMod(this.$el,b)},setElement:function(a){if(this.$el){this.undelegateEvents()}this.$el=a=$(a);this.el=a[0];if(this.el){this.delegateEvents()}return this},delegateEvents:function(){var a=this,b=a.uniqid;$.each(a.events,function(c,d){c=c.trim().split(/\s+/);if(c[1]){a.$el.delegate(c[1],c[0]+"."+b,a.bound(d))}else{a.on(c[0]+"."+b,a.bound(d))}})},undelegateEvents:function(a){if(a){a.off("."+this.uniqid)}else{$("body").off("."+this.uniqid);$(document).off("."+this.uniqid);this.$el&&this.$el.off("."+this.uniqid)}},setData:function(a){var b=this.data;this.data=a;if(this.dirtyCheck){this.dataIsChanged=f(b,a)}return this},extendData:function(a){var b=this.data,c=Object.assign({},b,a);if(this.dirtyCheck){this.dataIsChanged=f(b,c)}this.data=c;return this},getData:function(){return this.data},getHtml:function(a){var b=this.getData();if(a){b=$.extend({},b,a)}if(this.templateBlock){b={block:this.templateBlock,params:b}}return fest[this.template](b)},set:function(a){$.extend(this,a);return this},toString:function(){return this.getHtml()},render:function(b,c){var d,e;if(typeof b==="boolean"){c=b;b=null}if(!this.dataIsChanged){return this}d=this.getHtml(b);e={el:this.$el,block:this,name:this.bemName,template:this.template,data:b};this.emit("before_render",e);$(window).trigger("b-toolkit:before_render",e);var f=$(d);switch(this.renderMode){case"replace":this._destroyInner();this.$el.replaceWith(f);this.setElement(f);break;case"append":this.$el.append(f);this.setElement(f);break;default:this._destroyInner();this.$el.empty().append(f)}if(typeof d==="string"&&d.indexOf('data-rb="show"')>-1){this.$('[data-rb="show"]').trigger("rb-show")}this.$el.attr("data-uniqid",this.uniqid);if(c||this.inner){this.blocks=a["b-toolkit"].initInner(this.$el,this.template)}this.$el.removeAttr("data-model");this.emit("render",e);this.$el.trigger("b-toolkit:render",e);return this},renderTo:function(a,b){this.setElement(a).render(b)},empty:function(){this.$el.empty()},destroy:function(a,c){this.undelegateEvents();b.remove(this.uniqid);if(!a){this._destroyInner(c)}if(this.$el&&!c){this.empty()}this.$el=this.el=null},_destroyInner:function(a){var b,c,d;if(!this.$el){return}b=this.$el.find("[data-bem]").toArray();while(d=b.pop()){c=$(d).getBlock();c&&c.destroy(true,a)}},log:function(a){var b;if(!this.logHandler){return}if(!c.includes(a)){b=Array.prototype.slice.call(arguments,0);a="debug"}else{b=Array.prototype.slice.call(arguments,1)}if(Array.isArray(this.logLevels)&&this.logLevels.includes(a)||$.isPlainObject(this.logLevels)&&this.logLevels[a]){this.logHandler(a,b)}},initInner:function(){return a["b-toolkit"].initInner(this.$el,this.template)}});a["b-toolkit"].initInner=function(a,b){var c,d,f,g,h=[];b=b||e.template;f=a.find("[data-bem]").toArray();while(d=f.pop()){c=$(d);g=this.initBlock(c,b);h.push(g)}return h};a["b-toolkit"].initBlock=function(a,b){var c;var d;try{c=JSON.parse(a.attr("data-model"))}catch(e){c={}}d={uniqid:a.attr("data-uniqid"),bem:a.attr("data-bem"),model:c};return this.createBlock(a,d,b,"replace")};a["b-toolkit"].setup=a.setup;a["b-toolkit"].createBlock=function(c,d,e,f){var g=a[d.bem],h=b.get(d.uniqid);if(h){return h}if(!g){return null}h=new g({el:c,template:e,renderMode:f,data:d.model||{}});if(h.deferredInit){h.init()}return h};return a["b-toolkit"]});define("toolkit-common/jquery/__classList/jquery__classList",["jquery"],function($){var a=/\s+/,b=$("<div/>"),c=b[0],d=c.classList,e;if(d){d.add("-a","b-");e=/-a/.test(c.className)&&/b-/.test(c.className);$.fn.hasClass=function(a){a=$.trim(a);var b=this.length;while(b--){if(this[b].nodeType===1&&this[b].classList.contains(a)){return true}}return false};$.fn.addClass=f("add");$.fn.removeClass=f("remove")}function f(b){return function(c){var d=typeof c,f=this.length;if("string"===d){c=$.trim(c);if(""!==c){c=c.split(a);var h,i=c.length,j;while(f--){j=this[f].classList;if(1===i){j[b](c[0])}else if(e){j[b].apply(j,c)}else{for(h=0;h<i;h++){j[b](c[h])}}}}}else if(void 0===c&&"remove"===b){while(f--){this[f].className=""}}else if("function"===d){g(this,b+"Class",c)}return this}}function g(a,c,d){a.each(function(a){b[0]=this;b[c](d.call(this,a,b.prop("class")))})}b[0]=c=d=null});define("toolkit-common/jquery/__event-fix/jquery__event-fix",["jquery"],function(){!/PhantomJS/.test(navigator.userAgent)&&Object.defineProperties&&function(a,$){var b=function(a,b,c){if(c!==undefined){Object.defineProperty(a,b,{value:c})}return c},c={pageX:function(b){var c=this.target.ownerDocument||a,d=c.documentElement,e=c.body;return b===void 0?0:b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0)},pageY:function(b){var c=this.target.ownerDocument||a,d=c.documentElement,e=c.body;return b===void 0?0:b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)},relatedTarget:function(a){if(!a){return}return a.fromElement===this.target?a.toElement:a.fromElement},metaKey:function(a){return a&&a.ctrlKey},which:function(a){return a&&(a.charCode!=null?a.charCode:a.keyCode)}};if(!$.event.keyHooks)$.event.keyHooks={props:[]};if(!$.event.mouseHooks)$.event.mouseHooks={props:[]};$.each($.event.keyHooks.props.concat($.event.mouseHooks.props,$.event.props),function(a,d){if(d!=="target"){(function(){Object.defineProperty($.Event.prototype,d,{get:function(){var a=this.originalEvent&&this.originalEvent[d];return this["_"+d]!==undefined?this["_"+d]:b(this,d,c[d]&&a===undefined?c[d].call(this,this.originalEvent):a)},set:function(a){this["_"+d]=a}})})()}});$.event.fix=function(b){if(b[$.expando]){return b}var c=b,d=c.target;b=$.Event(c);if(!d){d=c.srcElement||a}if(d.nodeType===3){d=d.parentNode}b.target=d;return b}}(document,jQuery)});define("toolkit-common/jquery/__event-tap/jquery__event-tap",["jquery"],function(){(function(a,$){var b=a.TapSupportEnabled&&"ontouchstart"in a||a.DocumentTouch&&document instanceof DocumentTouch,c=15,d=100,e=Math.abs,f=[],g=$.event.handle||$.event.dispatch;$.support.touch=b;$.event.touchStart=b?"touchstart":"mousedown";$.event.touchEnd=b?"touchend":"mouseup";function h(b){var c=f[f.length-1];if(!c||c.x!==b.x||c.y!==b.y){f.push(b);a.setTimeout(i,2500)}}function i(){f.shift()}function j(a){a=a.originalEvent||a;var b=a.touches.length?a.touches:a.changedTouches,c=b[0]||{};return{x:c.clientX,y:c.clientY}}if(document.addEventListener){document.addEventListener("click",function(a){for(var b,c=0,g=f.length;c<g;c++){b=f[c];if(e(a.clientX-b.x)<d&&e(a.clientY-b.y)<d){a.stopPropagation();a.preventDefault()}}},true)}$.event.special.tap={setup:function(){var a={};function d(a){var b,c=a.type;a.type="tap";b=g.apply(this,arguments);a.type=c;return b}function f(b){var c=b.originalEvent.touches;if(!/input|select|textarea/i.test(c[0].target.nodeName)){a=j(b);$(this).bind("touchend.tapEvent",i)}}function i(b){$(this).unbind("touchend.tapEvent",i);var f=j(b),g;if(e(f.x-a.x)<c&&e(f.y-a.y)<c){g=d.call(this,b);if(g!==void 0&&!g||b.isDefaultPrevented()||b.isPropagationStopped()){h(a)}}return g}$(this).bind("click.tapEvent",d);if(b&&!$.touchSupportDisabled){$(this).bind("touchstart.tapEvent",f)}},teardown:function(){$(this).unbind(".tapEvent")}};$.fn.tap=function(a){return this.bind("tap",a)}})(window,jQuery)});define("toolkit-common/jquery/__event-scroll/jquery__event-scroll",["jquery"],function($){var a=(new Date).getTime(),b=$.event.special,c=$.event.handle||$.event.dispatch,d="scroll",e=d+"start",f=d+"end",g=d+"."+e+a,h=d+"."+f+a;b.scrollstart={setup:function(){var a,d=function(d){if(a==null){d.type=e;c.apply(this,arguments)}else{clearTimeout(a)}a=setTimeout(function(){a=null},b.scrollend.delay)};$(this).bind(g,d)},teardown:function(){$(this).unbind(g)}};b.scrollend={delay:300,setup:function(){var a,d=function(d){var e=this,g=arguments;clearTimeout(a);a=setTimeout(function(){d.type=f;c.apply(e,g)},b.scrollend.delay)};$(this).bind(h,d)},teardown:function(){$(this).unbind(h)}};$.isScrolled=false;$(window).bind(e+" "+f,function(a){$.isScrolled=a.type==e;$("body")[$.isScrolled?"addClass":"removeClass"]("is-scrolled")})});define("toolkit-common/jquery/__event-mousewheel/jquery__event-mousewheel",["jquery"],function(){var $=window.jQuery;var a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],b="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice,d,e;if($.event.fixHooks){for(var f=a.length;f;){$.event.fixHooks[a[--f]]=$.event.mouseHooks}}var g=$.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener){for(var a=b.length;a;){this.addEventListener(b[--a],h,false)}}else{this.onmousewheel=h}$.data(this,"mousewheel-line-height",g.getLineHeight(this));$.data(this,"mousewheel-page-height",g.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var a=b.length;a;){this.removeEventListener(b[--a],h,false)}}else{this.onmousewheel=null}},getLineHeight:function(a){return parseInt($(a)["offsetParent"in $.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(a){return $(a).height()},settings:{adjustOldDeltas:true}};$.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});function h(a){var b=a||window.event,f=c.call(arguments,1),g=0,h=0,k=0,l=0;a=$.event.fix(b);a.type="mousewheel";if("detail"in b){k=b.detail*-1}if("wheelDelta"in b){k=b.wheelDelta}if("wheelDeltaY"in b){k=b.wheelDeltaY}if("wheelDeltaX"in b){h=b.wheelDeltaX*-1}if("axis"in b&&b.axis===b.HORIZONTAL_AXIS){h=k*-1;k=0}g=k===0?h:k;if("deltaY"in b){k=b.deltaY*-1;g=k}if("deltaX"in b){h=b.deltaX;if(k===0){g=h*-1}}if(k===0&&h===0){return}if(b.deltaMode===1){var m=$.data(this,"mousewheel-line-height");g*=m;k*=m;h*=m}else if(b.deltaMode===2){var n=$.data(this,"mousewheel-page-height");g*=n;k*=n;h*=n}l=Math.max(Math.abs(k),Math.abs(h));if(!e||l<e){e=l;if(j(b,l)){e/=40}}if(j(b,l)){g/=40;h/=40;k/=40}g=Math[g>=1?"floor":"ceil"](g/e);h=Math[h>=1?"floor":"ceil"](h/e);k=Math[k>=1?"floor":"ceil"](k/e);a.deltaX=h;a.deltaY=k;a.deltaFactor=e;a.deltaMode=0;f.unshift(a,g,h,k);if(d){clearTimeout(d)}d=setTimeout(i,200);return($.event.dispatch||$.event.handle).apply(this,f)}function i(){e=null}function j(a,b){return g.settings.adjustOldDeltas&&a.type==="mousewheel"&&b%120===0}});define("toolkit/b-toolkit/b-toolkit",["jquery","toolkit/b-toolkit/b-toolkit.core","toolkit/b-toolkit/b-toolkit.context","toolkit/b-toolkit/b-toolkit.cache","toolkit-common/jquery/__fest/jquery__fest","toolkit-common/jquery/__classList/jquery__classList","toolkit-common/jquery/__event-fix/jquery__event-fix","toolkit-common/jquery/__event-tap/jquery__event-tap","toolkit-common/jquery/__event-scroll/jquery__event-scroll","toolkit-common/jquery/__event-mousewheel/jquery__event-mousewheel"],function($,a,b,c){"use strict";var d=b,e=/\b([\da-z-]+(?:__[\da-z-]+)*)/gi,f=/(?:\b|__)[a-z0-9\-]+[^_]_([a-z0-9\-]+)(?:_([a-z0-9\-]+))?/gi;d.toggleAria=function(a,b,c){switch(b){case"checked":case"disabled":case"expanded":case"hidden":case"invalid":a[c?"attr":"removeAttr"]("aria-"+b,b);a[c?"attr":"removeAttr"](b,b);break}};d.throttle=function(a,b,c){var d,e,f;return function(){var g;f=arguments;if(!d||+new Date-e>=b){g=function(){clearTimeout(d);d=null;e=null;if(f){a.apply(this,f);f=null;d=setTimeout(g,b);e=+new Date}}.bind(c||this);g()}}};d.debounce=function(a,b,c){var d;return function(){clearTimeout(d);d=setTimeout(function(b){a.apply(this,b)}.bind(c||this,arguments),b)}};d.toggleMod=function(a,b,c){if(a){if(!a.jquery)a=$(a);var f=jQuery.Event("toggleMod");f.mod=b;f.modState=c===undefined?!d.hasMod(a,b):!!c;a.trigger(f);if(!f.isDefaultPrevented()){var g=(a.attr("class")+"").match(e);if(g){if(~g[0].indexOf("js"))g.shift();a.toggleClass(g[0]+"_"+b,f.modState);d.toggleAria(a,b,f.modState)}}}};d.getBlock=function(a){return $(a).getBlock()};$.fn.hasMod=function(a){return d.hasMod(this[0],a)};$.fn.toggleMod=function(a,b){return this.each(function(){d.toggleMod(this,a,b)})};$.fn.getMods=function(){return d.getMods(this[0])};$.fn.findBem=function(a){return this.find('[data-bem="'+a+'"]')};$.fn.getBlock=function(){var a=this.attr("data-uniqid");return c.get(a)};d.getMods=function(a){var b={};if(a){if(!a.jquery){a=$(a)}var c=a.attr("class"),d,e;while(d=f.exec(c)){e=d[1];b[e]=d[2]||true}}return b};d.hasMod=function(a,b){return d.getMods(a)[b]!==void 0};d.isDisabledElem=function(a){if(a&&a.jquery){a=a[0]}return!a||!!($.attr(a,"disabled")||$.attr(a,"aria-disabled"))};d.windowWidth=function(){return window.innerWidth?window.innerWidth:document.documentElement?document.documentElement.clientWidth||document.body&&document.body.clientWidth||0:0};d.windowHeight=function(){return window.innerHeight?window.innerHeight:document.documentElement?document.documentElement.clientHeight||document.body&&document.body.clientHeight||0:0};(function(){var a,b;$(function(){var c=$("<div>").css({position:"absolute",width:"100px",height:"100px",overflow:"scroll",top:"-9999px"}).appendTo(document.body);a=c[0].offsetWidth-c[0].clientWidth;b=c[0].offsetHeight-c[0].clientHeight;c.remove()});d.scrollbarWidth=function(){return a};d.scrollbarHeight=function(){return b}})(d);$(document).bind("mouseup drop rb-show",function(a){var b=a.target,c=[],d,e;do{if(c.id==null){c.id=$.attr(b,"data-id")||null;if(c.id!=null&&e===void 0){e=b}}d=$.attr(b,"data-mnemo")||$.attr(b,"data-group")||$.attr(b,"data-name")||$.attr(b,"data-act");if(d){c.push(d);if(e===void 0){e=b}}}while((b=b.parentNode)&&b!==document);if(c.length){c.reverse();if(c.id!=null){c.push(c.id)}$.event.trigger("toolkitclick",{el:e,$el:$(e),id:c.id,root:c[0],name:c.join("."),chain:c,last:c[c.length-1],eventType:a.type})}});var g=d.lang={};g.get=function(a){var b=g[a];if(b===void 0&&a.indexOf(".")!==-1){a=a.split(".");b=g[a[0]];if(b){for(var c=1,d=a.length;c<d;c++){b=b[a[c]];if(b==null){return""}}}}return b==null?"":b};return d});define("toolkit",["toolkit/b-toolkit/b-toolkit"],function(a){return a});define("toolkit/b-userpic/b-userpic",["toolkit/b-toolkit/b-toolkit"],function(a){"use strict";var b=/([?&])width=[^&]+/,c=/([?&])height=[^&]+/,d=32,e=window.patron||{},f=e.avaHost||"filin.mail.ru",g=e.AvatarVersion||"4",h=e.AvatarBuild||"7",i=e.IsRetina;a["b-userpic"]=a["b-toolkit"].extend({});a["b-userpic"].getAvatarSrc=function(a,e,j,k,l){var m;a=encodeURIComponent(a||"default@default");j=j||d;k=k||j;if(i&&j===d){j=45;k=45}if(l){if(!(m=l[j+"x"+k])){if(m=l["default"]){m=m.replace(b,"$1").replace(c,"$1");m+="&width="+j+"&height="+k}}}if(!m){m="//"+f+"/pic?width="+j+"&height="+(k||j)+"&email="+a}if(e){e=encodeURIComponent(e);m+="&name="+e}m+="&version="+g+"&build="+h;return m};return a["b-userpic"]});(function(a){"use strict";var b,c={},d={16:false,18:false,17:false,91:false},e="all",f={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},g={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},h=function(a){return g[a]||a.toUpperCase().charCodeAt(0)},i=[];for(b=1;b<20;b++)g["f"+b]=111+b;function j(a,b){var c=a.length;while(c--)if(a[c]===b)return c;return-1}function k(a,b){if(a.length!=b.length)return false;for(var c=0;c<a.length;c++){if(a[c]!==b[c])return false}return true}var l={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function m(a){for(b in d)d[b]=a[l[b]]}function n(a){o(a);var b,e,g,h,k,l;b=a.keyCode;if(j(i,b)==-1){i.push(b)}if(b==93||b==224)b=91;if(b in d){d[b]=true;for(g in f)if(f[g]==b)s[g]=true;return}m(a);if(!s.filter.call(this,a))return;if(!(b in c))return;l=z();h=c[b].length;while(h--){e=c[b][h];if(e.scope==l||e.scope=="all"||p(e.scope)){k=e.mods.length>0;for(g in d)if(!d[g]&&j(e.mods,+g)>-1||d[g]&&j(e.mods,+g)==-1)k=false;if(e.mods.length==0&&!d[16]&&!d[18]&&!d[17]&&!d[91]||k){if(e.method(a,e)===false){a.preventDefault();a.stopPropagation()}if(a.isImmediatePropagationStopped()){return true}}}}}function o(a){var b=false,c=false,d=a.stopImmediatePropagation;!a.target&&(a.target=a.srcElement);!a.isDefaultPrevented&&(a.isDefaultPrevented=function(){return b});!a.isImmediatePropagationStopped&&(a.isImmediatePropagationStopped=function(){return c});!a.preventDefault&&(a.preventDefault=function(){b=true;a.returnValue=false});!a.stopPropagation&&(a.stopPropagation=function(){a.cancelBubble=false});a.stopImmediatePropagation=function(){c=true;a.stopPropagation();d&&d.call(a)}}function p(a){if(a&&a.nodeType===1){do{if(a===document.body){return true}}while(a=a.parentNode)}return false}function q(a){var b=a.keyCode,c,e=j(i,b);if(e>=0){i.splice(e,1)}if(b==93||b==224)b=91;if(b in d){d[b]=false;for(c in f)if(f[c]==b)s[c]=false}}function r(){for(b in d)d[b]=false;for(b in f)s[b]=false}function s(a,b,d){var e,f,g;e=B(a);if(d===undefined){d=b;b="all"}for(var i=0;i<e.length;i++){f=[];a=e[i].split("+");if(a.length>1){f=C(a);a=[a[a.length-1]]}a=a[0];a=h(a);if(!(a in c))c[a]=[];g=u(a,b,d,f);if(g>-1){c[a].push(c[a].splice(g,1)[0])}else{c[a].push({shortcut:e[i],scope:b,method:d,key:e[i],mods:f})}}}function t(a,b,d){var e,f,g=[],i,j;e=B(a);if(!b||typeof b==="function"){d=b;b="all"}for(i=0;i<e.length;i++){f=e[i].split("+");if(f.length>1){g=C(f)}a=f[f.length-1];a=h(a);if(b===undefined){b=z()}do{j=u(a,b,d,g);if(j>-1){c[a].splice(j,1)}}while(j!=-1)}}function u(a,b,d,e){var f,g,h=c[a];if(h){for(f=0;f<h.length;f++){g=h[f];if(g.scope===b&&(d===undefined||g.method===d)&&k(g.mods,e)){return f}}}return-1}function v(a){if(typeof a=="string"){a=h(a)}return j(i,a)!=-1}function w(){return i.slice(0)}function x(a){var b=a.target.tagName;return!(b=="INPUT"||b=="SELECT"||b=="TEXTAREA")}for(b in f)s[b]=false;function y(a){e=a||"all"}function z(){return e||"all"}function A(a){var b,d,e;for(b in c){d=c[b];for(e=0;e<d.length;){if(d[e].scope===a)d.splice(e,1);
else e++}}}function B(a){var b;a=a.replace(/\s/g,"");b=a.split(",");if(b[b.length-1]==""){b[b.length-2]+=","}return b}function C(a){var b=a.slice(0,a.length-1);for(var c=0;c<b.length;c++)b[c]=f[b[c]];return b}function D(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else if(a.attachEvent)a.attachEvent("on"+b,function(){c(window.event)})}D(document,"keydown",function(a){if(n(a)!==true){var b=key.listeners,c=0,d=b.length;for(;c<d;c++){b[c](a);if(a.isImmediatePropagationStopped()){return true}}}});D(document,"keyup",q);D(window,"focus",r);var E=a.key;function F(){var b=a.key;a.key=E;return b}a.key=s;a.key.setScope=y;a.key.getScope=z;a.key.deleteScope=A;a.key.filter=x;a.key.isPressed=v;a.key.getPressedKeyCodes=w;a.key.noConflict=F;a.key.unbind=t;a.key.on=s;a.key.off=t;a.key.listeners=[];if(typeof module!=="undefined")module.exports=s;define("toolkit-common/keymaster/keymaster",[],function(){return s})})(this);define("toolkit/b-list/b-list",["toolkit/b-toolkit/b-toolkit","toolkit-common/keymaster/keymaster"],function(a,b){"use strict";return a.create("b-list",{init:function(){this.__itemSelector=this.__itemSelector||this.s("__list__item");this.__groupSelector=this.__groupSelector||this.s("__group_scroll");this.__listSelector=this.__listSelector||this.s("__list");this._initEvents();this._hide=this._hide.bind(this);this._onKeyArrows=this._onKeyArrows.bind(this);this._onKeyEnter=this._onKeyEnter.bind(this);a["b-toolkit"].fn.init.apply(this,arguments)},_initEvents:function(){if(!this.$list){this.$list=this.$("__list")}this.$list.on("mouseenter."+this.uniqid,this.__itemSelector,this._onItemHover.bind(this)).on("mouseleave."+this.uniqid,this.__itemSelector,this._onListMouseLeave.bind(this));a["b-toolkit"].fn.init.apply(this,arguments)},onRender:function(){delete this.$list;this._initEvents()},useHotkeys:function(a){b[a?"on":"off"]("esc, left",this.el,this._hide);b[a?"on":"off"]("up, down",this.el,this._onKeyArrows);b[a?"on":"off"]("enter, right",this.el,this._onKeyEnter)},_hide:function(a){},_toggleKeyboard:function(a){this.useHotkeys(a)},_onItemHover:function(a){$(a.currentTarget).toggleMod("selected",true);var b=$(a.target).closest(this.__itemSelector);if(b.length&&!b.hasMod("unselectable")&&!b.hasMod("disabled")){b.toggleMod("selected",true)}},_onListMouseLeave:function(a){var b=this.$el.find(this.__itemSelector);if(b.length){b.toggleMod("selected",false)}else{$(a.currentTarget).toggleMod("selected",false)}},_onKeyArrows:function(a,b){var c=b.key=="up";var d=this._getNextItem(c);d.toggleMod("selected",true);this._checkItemUnderScroll(d);a.preventDefault();a.stopImmediatePropagation()},_onKeyEnter:function(a,b){var c=this.$list.find(this.__itemSelector+"_selected");a.preventDefault();a.stopImmediatePropagation();if(c.length){if(b.key=="right"&&!c.hasMod("nested")){return}c[0].click()}},_getNextItem:function(a){var b=this.$list.find(this.__itemSelector).not(this.__itemSelector+"_unselectable").not(this.__itemSelector+"_disabled"),c,d=-1,e,f=0;for(f=0;f<b.length;f++){c=$(b[f]);if(c.hasMod("selected")){d=f;break}}if(d!=-1){b.toggleMod("selected",false);e=a?d===0?-1:d-1:d===b.length-1?0:d+1}else{e=a?-1:0}return b.eq(e)},_checkItemUnderScroll:function(a){var b=a.closest(this.__groupSelector+","+this.__listSelector);if(b.length){var c=a.offset(),d=a.outerHeight(),e=b.offset(),f=b.height(),g=b.scrollTop(),h=c.top-e.top;if(h<0){b.scrollTop(g+h)}else if(h+d>f){b.scrollTop(g+h+d-f)}}},_unbindEvents:function(){this.$list&&this.$list.off("."+this.uniqid);this.useHotkeys(false)},appendItems:function(b){var c;c=b.map(function(b){return new a[b.block]({$el:$("<div />"),renderMode:"replace",template:this.template,data:b}).render().$el},this);this.data.items=this.data.items.concat(b);this.$list.append(c)},refresh:function(){this._unbindEvents();this.$list=null;this.render();this.init()},destroy:function(){this._unbindEvents();a["b-toolkit"].fn.destroy.apply(this,arguments);this.$list=null}})});define("toolkit/b-dropdown/b-dropdown",["toolkit/b-toolkit/b-toolkit","toolkit/b-list/b-list"],function(a){"use strict";var b="b-dropdown__list__item_current";var c="multiselect";var d=a.create("b-dropdown","b-list",{minListHeight:80,minBottomMargin:15,animation:false,unselectable:false,scroll:null,_expanded:false,init:function(){this._hide=this._hide.bind(this);this._bindOutside=this._bindOutside.bind(this);this.$ctrl=(this.$ctrl||this.$("__ctrl")).on("tap."+this.uniqid,this._onCtrlClick.bind(this));this.$list=(this.$list||this.$("__list")).on("tap."+this.uniqid,"[data-name]",this._onItemClick.bind(this));a["b-list"].fn.init.call(this)},setCurrentItem:function(a){var d="";if(this.hasMod(c)){if(a.num!==void 0){d='[data-num="'+a.num+'"]';this.$("__list__item"+d).toggleClass(b)}}else{this.setTitle(a.text);if(a.image){this.setIcon(a.image)}if(a.color){this.setColor(a.color)}if(a.num!==void 0){d='[data-num="'+a.num+'"]';this.$("__list__item").removeClass(b).filter(d).addClass(b)}}},setActiveItem:function(a){this.$("__list__item_active").toggleMod("active",false);this.$el.find('[data-id="'+a+'"]').toggleMod("active",true);this.data.activeId=a;return this},setTitle:function(a){this.$("__ctrl__text").text(a)},setIcon:function(a){this.$("__ctrl__image").css({"background-image":"url("+a+")"})},setColor:function(a){this.$("__ctrl").css("color",a)},expand:function(){this._expand()},_isAllowHide:function(b){return!(this.unselectable||a.hasMod(b,"unselectable")||this.hasMod(c))},_hideAll:function(a){this.$list.hide().css("zIndex",0);this._unsetScroll();this.emit("collapse");setTimeout(this._toggleKeyboard.bind(this,false),0);if(a.type==="keydown"){this._bindOutside()}},_hide:function(a){var b=$(a.target).closest(this.s("__list__item")),c=this.$list.has(a.target);if(c.length&&!this._isAllowHide(b)){setTimeout(this._bindOutside,0)}else{this.toggleMod("expanded",false);this._expanded=false;this._hideAll.call(this,a)}},_bindOutside:function(){$("body")[this.isExpanded()?"one":"unbind"]("tap."+this.uniqid,this._hide)},_onCtrlClick:function(a){if(!this.$el.is("[aria-disabled]")&&!$(a.target).closest("[data-name],[data-id]",this.$ctrl)[0]){a.preventDefault();this._expand()}},_expand:function(){if(this.isExpanded()){return}this.$list.show().css("zIndex",1e6);this.toggleMod("expanded",true);this._expanded=true;this.emit("expand");this._setScroll();this._toggleKeyboard(true);setTimeout(this._bindOutside,0);this._setMinWidth();this._setScrollPrevent()},_setScrollPrevent:function(){if(this._scrollPreventerReady){return}this.$list.on("wheel mousewheel",this._eventMouseWheel);this._scrollPreventerReady=true},_eventMouseWheel:function(a){if(this.scrollHeight>this.offsetHeight){var b;if("deltaY"in a.originalEvent){b=a.originalEvent.deltaY<0}else{b=a.originalEvent.wheelDelta>0}if(!b&&this.scrollTop>=this.scrollHeight-this.offsetHeight||b&&!this.scrollTop){a.preventDefault();a.stopPropagation()}}},_setMinWidth:function(){this.$list.css("min-width",this.$el.width());var a=this.$el[0].offsetWidth;var b=this.$list[0].offsetWidth;if(b>a){this.$list.css("min-width",a-(b-a))}},_getUIEvent:function(){return a["b-controls-group"].fn._getUIEvent.apply(this,arguments)},_onItemClick:function(b){a["b-controls-group"].fn._emitUIEvent.call(this,b);this.emit("click",b)},isExpanded:function(){return this._expanded},_setScroll:function(){var a=$(window),b=$(this.scroll||window),c=this.$list,d=a.height(),e=c.offset().top-b.scrollTop(),f=c.outerHeight();var g=this.$el.find(".b-dropdown__list__item_current"),h=g.data()||{},i;if(f+e>d){c.css({height:Math.max(this.minListHeight,d-e-this.minBottomMargin),overflow:"auto"})}if(h.num){i=g.outerHeight();c.scrollTop(h.num*i)}},_unsetScroll:function(){this.$list.css({overflow:"",height:""})},destroy:function(){this.undelegateEvents(this.$ctrl);this.undelegateEvents(this.$list);a["b-list"].fn.destroy.apply(this,arguments);this.$ctrl=null}});d.CURRENT_ITEM_CLASS=b;return d});define("mrg-mega-blocks/b-dropdown/b-dropdown",["toolkit/b-dropdown/b-dropdown"],function(a){"use strict";return a.extend("b-dropdown",{})});define("toolkit/btn/btn",["toolkit/b-toolkit/b-toolkit"],function(a){"use strict";return a.create("btn",{toggle:function(a){this.$el.toggleMod("disabled",!a);return this},toggleActive:function(a){this.$el.toggleMod("active",a);if(this.$el.hasMod("mainness")){this.$el.toggleMod("main",a)}return this}})});define("toolkit/b-controls/b-controls",["toolkit/b-toolkit/b-toolkit","toolkit/btn/btn"],function(a){"use strict";return a.create("b-controls",{init:function(){this.next=new a.btn({$el:this.$(".js-next")})},disableNext:function(){this.next.toggleMod("disabled",true)},enableNext:function(){this.next.toggleMod("disabled",false)}})});define("toolkit/extensions/extensions",["jquery"],function($){"use strict";if(!$.fn.display){$.fn.extend({display:function(a){if(a!==void 0&&typeof a!=="string"){a=!a?"none":""}return this.css("display",a)}})}});define("toolkit/b-panel/b-panel",["toolkit/b-toolkit/b-toolkit","toolkit/b-controls/b-controls","toolkit/extensions/extensions"],function(a){"use strict";return a.create("b-panel",{templateBlock:"b-panel",renderMode:"replace",init:function(){this.controls=a["b-controls"].wrap(this.el);this._initElems()},onRender:function(){this._initElems()},_initElems:function(){this.$error=this.$el.find(".b-panel__error");this.$desc=this.$(".b-panel__content__desc")},showError:function(a){this.$error.text(a).display("block")},hideError:function(){this.$error.display(false)},disableNext:function(){this.controls.disableNext()},enableNext:function(){this.controls.enableNext()},setDescription:function(a,b){this.$desc[b?"html":"text"](a)}})});define("mrg-mega-blocks/b-panel/b-panel",["toolkit/b-panel/b-panel"],function(a){"use strict";return a.extend("b-panel",{})});define("serverData",["require","jquery","config","logger"],function(require){"use strict";var $=require("jquery"),a=require("config"),b=require("logger").getScope("config"),c,d;try{c=JSON.parse($("#json").html())}catch(e){b.add("parse error",e);return{}}for(d in c){a.set(d,c[d])}return a});if(!Array.prototype.indexOf){Array.prototype.indexOf=function a(b){for(var c=this,d=0,e=c.length;d<e;++d){if(c[d]===b){return d}}return-1}}if(!Array.prototype.filter){Array.prototype.filter=function b(a,c){for(var d=this,e=[],f=0,g=d.length,h;f<g;++f){h=d[f];if(a.call(c||window,h,f,d)){e.push(h)}}return e}}if(!Array.prototype.find){Array.prototype.find=function(a,b){var c;if(typeof a!=="function"){throw new TypeError("predicate must be a function")}for(var d=0,e=this.length>>>0;d<e;d++){c=this[d];if(a.call(b,c,d,this)){return c}}}}if(!Array.prototype.reduce){Array.prototype.reduce=function(a){if(typeof a!=="function"){throw new TypeError(a+" is not a function")}var b=this.length>>>0,c=0,d;if(arguments.length==2){d=arguments[1]}else{while(c<b&&!c in this){c++}if(c>=b){throw new TypeError("Reduce of empty array with no initial value")}d=this[c++]}for(;c<b;c++){if(c in this){d=a(d,this[c],c,this)}}return d}}if(!Array.prototype.map){Array.prototype.map=function c(a,b){var c=[];for(var d=0,e=this.length;d<e;++d){c.push(a.call(b,this[d],d,this))}return c}}if(!Function.prototype.bind){Function.prototype.bind=function d(a){var b=this,c=arguments.length>1?Array.prototype.slice.call(arguments,1):[];return function(){return c.length===0&&arguments.length===0?b.call(a):b.apply(a,c.concat(Array.prototype.slice.call(arguments,0)))}}}if(!Array.prototype.forEach){Array.prototype.forEach=function e(a,b){for(var c=this,d=0,e=c.length;d<e;++d){a.call(b||window,c[d],d,c)}}}if(!Array.prototype.includes){Array.prototype.includes=function(a,b){return this.indexOf(a,b)!==-1}}if(typeof window.JSON==="undefined"){(function(){var a=Object.prototype.toString,b=Object.prototype.hasOwnProperty,c="{",d="}",e=":",f="[",g="]",h=",",i={PUNCTUATOR:1,STRING:2,NUMBER:3,BOOLEAN:4,NULL:5},j={"{":1,"}":1,"[":1,"]":1,",":1,":":1,'"':2,t:4,f:4,n:5},k={b:"\b",f:"\f",n:"\n",r:"\r",t:"	",'"':'"',"\\":"\\","/":"/"},l=/^(?:[{}:,\[\]]|true|false|null|"(?:[^"\\\u0000-\u001F]|\\["\\\/bfnrt]|\\u[0-9A-F]{4})*"|-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)/,m=/^[\t ]+/,n=/^\r?\n/;function o(a){this.line=1;this.col=1;this._tokLen=0;this._str=a}o.prototype={getNextToken:function(){var a=this._str,b,c;this.col+=this._tokLen;if(!a.length){return"END"}b=l.exec(a);if(b){c=j[b[0].charAt(0)]||i.NUMBER}else if(b=m.exec(a)){this._tokLen=b[0].length;this._str=a.slice(this._tokLen);return this.getNextToken()}else if(b=n.exec(a)){this._tokLen=0;this._str=a.slice(b[0].length);this.line++;this.col=1;return this.getNextToken()}else{this.error("Invalid token")}this._tokLen=b[0].length;this._str=a.slice(this._tokLen);return{type:c,value:b[0]}},error:function(a,b,c){var d=new SyntaxError(a);d.line=b||this.line;d.col=c||this.col;throw d}};function p(a){this.lex=a}p.prototype={parse:function(){var a=this.lex,b=this.getValue();if(a.getNextToken()!=="END"){a.error("Illegal token")}return b},getObject:function(){var a={},b=this.lex,c,f,g,j,k,l=false;while(true){c=b.getNextToken();f=c.value;if(f===d){return a}if(l){if(f===h){j=b.line;k=b.col-1;c=b.getNextToken();f=c.value;if(f===d){b.error("Invalid trailing comma",j,k)}}else{b.error("Illegal token where expect comma or right curly bracket")}}else if(f===h){b.error("Invalid leading comma")}if(c.type!=i.STRING){b.error("Illegal token where expect string property name")}g=this.getString(f);c=b.getNextToken();f=c.value;if(f!=e){b.error("Illegal token where expect colon")}a[g]=this.getValue();l=true}},getArray:function(){var a=[],b=this.lex,c,d,e,f,i=false;while(true){c=b.getNextToken();d=c.value;if(d===g){return a}if(i){if(d===h){e=b.line;f=b.col-1;c=b.getNextToken();d=c.value;if(d===g){b.error("Invalid trailing comma",e,f)}}else{b.error("Illegal token where expect comma or right square bracket")}}else if(d===h){b.error("Invalid leading comma")}a.push(this.getValue(c));i=true}},getString:function(a){return a.slice(1,-1).replace(/\\u?([0-9A-F]{4}|["\\\/bfnrt])/g,function(a,b){return k[b]||String.fromCharCode(parseInt(b,16))})},getValue:function(a){var b=this.lex,d=a||b.getNextToken(),e=d.value;switch(d.type){case i.PUNCTUATOR:if(e===c){return this.getObject()}else if(e===f){return this.getArray()}b.error("Illegal punctoator");break;case i.STRING:return this.getString(e);case i.NUMBER:return Number(e);case i.BOOLEAN:return e==="true";case i.NULL:return null;default:b.error("Invalid value")}}};function q(a,b,c){if(typeof c==="undefined"){delete a[b];return}a[b]=c}function r(c,d,e){var f=c[d],g,h;if(a.call(f).slice(8,-1)==="Array"){for(g=0,h=f.length;g<h;g++){q(f,g,r(f,g,e))}}else if(typeof f==="object"){for(g in f){if(b.call(f,g)){q(f,g,r(f,g,e))}}}return e.call(c,d,f)}function s(a,b){a=String(a);return a.length>=b?a:new Array(b-a.length+1).join("0")+a}window.JSON={parse:function(a,b){var c=new p(new o(a)).parse();if(typeof b==="function"){return r({"":c},"",b)}return c},stringify:function(){var c=arguments[0],d=typeof arguments[1]==="function"?arguments[1]:null,e=arguments[2]||"",f=e?" ":"",g=e?"\n":"",h=a.call(c).slice(8,-1),i,j,k,l,m,n;if(c===null||h==="Boolean"||h==="Number"){return c}if(h==="Array"){i=[];for(m=c.length,l=0,n;l<m;++l){n=d?d(l,c[l]):c[l];n=this.stringify(n,d,e);if(n===undefined||n===null){n="null"}i.push(n)}return"["+g+i.join(","+g).replace(/^/gm,e)+g+"]"}if(h==="Date"){return'"'+c.getUTCFullYear()+"-"+s(c.getUTCMonth()+1,2)+"-"+s(c.getUTCDate(),2)+"T"+s(c.getUTCHours(),2)+":"+s(c.getUTCMinutes(),2)+":"+s(c.getUTCSeconds(),2)+"."+s(c.getUTCMilliseconds(),3)+"Z"+'"'}if(h==="String"){return'"'+c.replace(/"/g,'\\"')+'"'}if(typeof c==="object"){i=[];k=false;for(j in c){if(b.call(c,j)){n=d?d(j,c[j]):c[j];n=this.stringify(n,d,e);if(n!==undefined){k=true;i.push('"'+j+'":'+f+n)}}}if(!k){return"{}"}else{return"{"+g+i.join(","+g).replace(/^/gm,e)+g+"}"}}}}})()}if(typeof Object!=="undefined"&&!Object.keys){Object.keys=function f(a){var b=[],c;for(c in a){if(Object.prototype.hasOwnProperty.call(a,c)){b.push(c)}}return b}}if(!Object.assign){Object.assign=function(a){if(a===undefined||a===null){throw new TypeError("Cannot convert undefined or null to object")}var b=Object(a);for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d!==undefined&&d!==null){for(var e in d){if(d.hasOwnProperty(e)){b[e]=d[e]}}}}return b}}if(!String.prototype.trim){String.prototype.trim=function g(){return this.replace(/^\s+|\s+$/g,"")}}if(!Array.prototype.some){Array.prototype.some=function h(a,b){for(var c=this,d=0,e=c.length;d<e;++d){if(a.call(b||window,c[d],d,c)){return true}}return false}}if(!Array.isArray){Array.isArray=function i(a){return a&&Object.prototype.toString.call(a)==="[object Array]"}}if(!Date.now){Date.now=function(){return(new Date).getTime()}}if(!Date.prototype.toISOString){(function(){function a(a){if(a<10){return"0"+a}return a}Date.prototype.toISOString=function b(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}})()}Number.isNaN=Number.isNaN||function(a){return typeof a==="number"&&isNaN(a)};if(typeof Object.create!="function"){Object.create=function(){var a,b=function(){};return function(c,d){if(typeof c!="object"){throw TypeError("Argument must be an object")}b.prototype=c;a=new b;b.prototype=null;if(d){Object.keys(d).forEach(function(b){a[b]=d[b].value})}return a}}()}define("mrg-polyfills",["mrg-polyfills/index"],function(a){return a});define("mrg-polyfills/index",function(){});define("mrg-auth-client/logger",["require","exports","module","logger"],function(require,exports){return require("logger").getScope("mrg-auth-client")});define("mrg-auth-client/providers/base",function(){});(function(a){var b=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var c=typeof module=="object"&&module&&!module.nodeType&&module;var d=typeof global=="object"&&global;if(d.global===d||d.window===d||d.self===d){a=d}var e,f=2147483647,g=36,h=1,i=26,j=38,k=700,l=72,m=128,n="-",o=/^xn--/,p=/[^\x20-\x7E]/,q=/[\x2E\u3002\uFF0E\uFF61]/g,r={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},s=g-h,t=Math.floor,u=String.fromCharCode,v;function w(a){throw new RangeError(r[a])}function x(a,b){var c=a.length;var d=[];while(c--){d[c]=b(a[c])}return d}function y(a,b){var c=a.split("@");var d="";if(c.length>1){d=c[0]+"@";a=c[1]}a=a.replace(q,".");var e=a.split(".");var f=x(e,b).join(".");return d+f}function z(a){var b=[],c=0,d=a.length,e,f;while(c<d){e=a.charCodeAt(c++);if(e>=55296&&e<=56319&&c<d){f=a.charCodeAt(c++);if((f&64512)==56320){b.push(((e&1023)<<10)+(f&1023)+65536)}else{b.push(e);c--}}else{b.push(e)}}return b}function A(a){return x(a,function(a){var b="";if(a>65535){a-=65536;b+=u(a>>>10&1023|55296);a=56320|a&1023}b+=u(a);return b}).join("")}function B(a){if(a-48<10){return a-22}if(a-65<26){return a-65}if(a-97<26){return a-97}return g}function C(a,b){return a+22+75*(a<26)-((b!=0)<<5)}function D(a,b,c){var d=0;a=c?t(a/k):a>>1;a+=t(a/b);for(;a>s*i>>1;d+=g){a=t(a/s)}return t(d+(s+1)*a/(a+j))}function E(a){var b=[],c=a.length,d,e=0,j=m,k=l,o,p,q,r,s,u,v,x,y;o=a.lastIndexOf(n);if(o<0){o=0}for(p=0;p<o;++p){if(a.charCodeAt(p)>=128){w("not-basic")}b.push(a.charCodeAt(p))}for(q=o>0?o+1:0;q<c;){for(r=e,s=1,u=g;;u+=g){if(q>=c){w("invalid-input")}v=B(a.charCodeAt(q++));if(v>=g||v>t((f-e)/s)){w("overflow")}e+=v*s;x=u<=k?h:u>=k+i?i:u-k;if(v<x){break}y=g-x;if(s>t(f/y)){w("overflow")}s*=y}d=b.length+1;k=D(e-r,d,r==0);if(t(e/d)>f-j){w("overflow")}j+=t(e/d);e%=d;b.splice(e++,0,j)}return A(b)}function F(a){var b,c,d,e,j,k,o,p,q,r,s,v=[],x,y,A,B;a=z(a);x=a.length;b=m;c=0;j=l;for(k=0;k<x;++k){s=a[k];if(s<128){v.push(u(s))}}d=e=v.length;if(e){v.push(n)}while(d<x){for(o=f,k=0;k<x;++k){s=a[k];if(s>=b&&s<o){o=s}}y=d+1;if(o-b>t((f-c)/y)){w("overflow")}c+=(o-b)*y;b=o;for(k=0;k<x;++k){s=a[k];if(s<b&&++c>f){w("overflow")}if(s==b){for(p=c,q=g;;q+=g){r=q<=j?h:q>=j+i?i:q-j;if(p<r){break}B=p-r;A=g-r;v.push(u(C(r+B%A,0)));p=t(B/A)}v.push(u(C(p,0)));j=D(c,y,d==e);c=0;++d}}++c;++b}return v.join("")}function G(a){return y(a,function(a){return o.test(a)?E(a.slice(4).toLowerCase()):a})}function H(a){return y(a,function(a){return p.test(a)?"xn--"+F(a):a})}e={version:"1.3.2",ucs2:{decode:z,encode:A},decode:E,encode:F,toASCII:H,toUnicode:G};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define("punycode",[],function(){return e})}else if(b&&c){if(module.exports==b){c.exports=e}else{for(v in e){e.hasOwnProperty(v)&&(b[v]=e[v])}}}else{a.punycode=e}})(this);define("urijs/punycode",function(){});(function(a,b){"use strict";if(typeof exports==="object"){module.exports=b()}else if(typeof define==="function"&&define.amd){define("urijs/IPv6",b)}else{a.IPv6=b(a)}})(this,function(a){"use strict";var b=a&&a.IPv6;function c(a){var b=a.toLowerCase();var c=b.split(":");var d=c.length;var e=8;if(c[0]===""&&c[1]===""&&c[2]===""){c.shift();c.shift()}else if(c[0]===""&&c[1]===""){c.shift()}else if(c[d-1]===""&&c[d-2]===""){c.pop()}d=c.length;if(c[d-1].indexOf(".")!==-1){e=7}var f;for(f=0;f<d;f++){if(c[f]===""){break}}if(f<e){c.splice(f,1,"0000");while(c.length<e){c.splice(f,0,"0000")}d=c.length}var g;for(var h=0;h<e;h++){g=c[h].split("");for(var i=0;i<3;i++){if(g[0]==="0"&&g.length>1){g.splice(0,1)}else{break}}c[h]=g.join("")}var j=-1;var k=0;var l=0;var m=-1;var n=false;for(h=0;h<e;h++){if(n){if(c[h]==="0"){l+=1}else{n=false;if(l>k){j=m;k=l}}}else{if(c[h]==="0"){n=true;m=h;l=1}}}if(l>k){j=m;k=l}if(k>1){c.splice(j,k,"")}d=c.length;var o="";if(c[0]===""){o=":"}for(h=0;h<d;h++){o+=c[h];if(h===d-1){break}o+=":"}if(c[d-1]===""){o+=":"}return o}function d(){if(a.IPv6===this){a.IPv6=b}return this}return{best:c,noConflict:d}});(function(a,b){"use strict";if(typeof exports==="object"){module.exports=b()}else if(typeof define==="function"&&define.amd){define("urijs/SecondLevelDomains",b)}else{a.SecondLevelDomains=b(a)}})(this,function(a){"use strict";var b=a&&a.SecondLevelDomains;var c={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(a){var b=a.lastIndexOf(".");if(b<=0||b>=a.length-1){return false}var d=a.lastIndexOf(".",b-1);if(d<=0||d>=b-1){return false}var e=c.list[a.slice(b+1)];if(!e){return false}return e.indexOf(" "+a.slice(d+1,b)+" ")>=0},is:function(a){var b=a.lastIndexOf(".");if(b<=0||b>=a.length-1){return false}var d=a.lastIndexOf(".",b-1);if(d>=0){return false}var e=c.list[a.slice(b+1)];if(!e){return false}return e.indexOf(" "+a.slice(0,b)+" ")>=0},get:function(a){var b=a.lastIndexOf(".");if(b<=0||b>=a.length-1){return null}var d=a.lastIndexOf(".",b-1);if(d<=0||d>=b-1){return null}var e=c.list[a.slice(b+1)];if(!e){return null}if(e.indexOf(" "+a.slice(d+1,b)+" ")<0){return null}return a.slice(d+1)},noConflict:function(){if(a.SecondLevelDomains===this){a.SecondLevelDomains=b}return this}};return c});(function(a,b){"use strict";if(typeof exports==="object"){module.exports=b(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains"))}else if(typeof define==="function"&&define.amd){define("urijs/URI",["./punycode","./IPv6","./SecondLevelDomains"],b)}else{a.URI=b(a.punycode,a.IPv6,a.SecondLevelDomains,a)}})(this,function(a,b,c,d){"use strict";var e=d&&d.URI;function f(a,b){var c=arguments.length>=1;var d=arguments.length>=2;if(!(this instanceof f)){if(c){if(d){return new f(a,b)}return new f(a)}return new f}if(a===undefined){if(c){throw new TypeError("undefined is not a valid argument for URI")}if(typeof location!=="undefined"){a=location.href+""}else{a=""}}this.href(a);if(b!==undefined){return this.absoluteTo(b)}return this}f.version="1.17.1";var g=f.prototype;var h=Object.prototype.hasOwnProperty;function i(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function j(a){if(a===undefined){return"Undefined"}return String(Object.prototype.toString.call(a)).slice(8,-1)}function k(a){return j(a)==="Array"}function l(a,b){var c={};var d,e;if(j(b)==="RegExp"){c=null}else if(k(b)){for(d=0,e=b.length;d<e;d++){c[b[d]]=true}}else{c[b]=true}for(d=0,e=a.length;d<e;d++){var f=c&&c[a[d]]!==undefined||!c&&b.test(a[d]);if(f){a.splice(d,1);e--;d--}}return a}function m(a,b){var c,d;if(k(b)){for(c=0,d=b.length;c<d;c++){if(!m(a,b[c])){return false}}return true}var e=j(b);for(c=0,d=a.length;c<d;c++){if(e==="RegExp"){if(typeof a[c]==="string"&&a[c].match(b)){return true}}else if(a[c]===b){return true}}return false}function n(a,b){if(!k(a)||!k(b)){return false}if(a.length!==b.length){return false}a.sort();b.sort();for(var c=0,d=a.length;c<d;c++){if(a[c]!==b[c]){return false}}return true}function o(a){var b=/^\/+|\/+$/g;return a.replace(b,"")}f._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:f.duplicateQueryParameters,escapeQuerySpace:f.escapeQuerySpace}
};f.duplicateQueryParameters=false;f.escapeQuerySpace=true;f.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;f.idn_expression=/[^a-z0-9\.-]/i;f.punycode_expression=/(xn--)/i;f.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;f.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;f.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi;f.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/};f.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};f.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;f.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};f.getDomAttribute=function(a){if(!a||!a.nodeName){return undefined}var b=a.nodeName.toLowerCase();if(b==="input"&&a.type!=="image"){return undefined}return f.domAttributes[b]};function p(a){return escape(a)}function q(a){return encodeURIComponent(a).replace(/[!'()*]/g,p).replace(/\*/g,"%2A")}f.encode=q;f.decode=decodeURIComponent;f.iso8859=function(){f.encode=escape;f.decode=unescape};f.unicode=function(){f.encode=q;f.decode=decodeURIComponent};f.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}};f.encodeQuery=function(a,b){var c=f.encode(a+"");if(b===undefined){b=f.escapeQuerySpace}return b?c.replace(/%20/g,"+"):c};f.decodeQuery=function(a,b){a+="";if(b===undefined){b=f.escapeQuerySpace}try{return f.decode(b?a.replace(/\+/g,"%20"):a)}catch(c){return a}};var r={encode:"encode",decode:"decode"};var s;var t=function(a,b){return function(c){try{return f[b](c+"").replace(f.characters[a][b].expression,function(c){return f.characters[a][b].map[c]})}catch(d){return c}}};for(s in r){f[s+"PathSegment"]=t("pathname",r[s]);f[s+"UrnPathSegment"]=t("urnpath",r[s])}var u=function(a,b,c){return function(d){var e;if(!c){e=f[b]}else{e=function(a){return f[b](f[c](a))}}var g=(d+"").split(a);for(var h=0,i=g.length;h<i;h++){g[h]=e(g[h])}return g.join(a)}};f.decodePath=u("/","decodePathSegment");f.decodeUrnPath=u(":","decodeUrnPathSegment");f.recodePath=u("/","encodePathSegment","decode");f.recodeUrnPath=u(":","encodeUrnPathSegment","decode");f.encodeReserved=t("reserved","encode");f.parse=function(a,b){var c;if(!b){b={}}c=a.indexOf("#");if(c>-1){b.fragment=a.substring(c+1)||null;a=a.substring(0,c)}c=a.indexOf("?");if(c>-1){b.query=a.substring(c+1)||null;a=a.substring(0,c)}if(a.substring(0,2)==="//"){b.protocol=null;a=a.substring(2);a=f.parseAuthority(a,b)}else{c=a.indexOf(":");if(c>-1){b.protocol=a.substring(0,c)||null;if(b.protocol&&!b.protocol.match(f.protocol_expression)){b.protocol=undefined}else if(a.substring(c+1,c+3)==="//"){a=a.substring(c+3);a=f.parseAuthority(a,b)}else{a=a.substring(c+1);b.urn=true}}}b.path=a;return b};f.parseHost=function(a,b){a=a.replace(/\\/g,"/");var c=a.indexOf("/");var d;var e;if(c===-1){c=a.length}if(a.charAt(0)==="["){d=a.indexOf("]");b.hostname=a.substring(1,d)||null;b.port=a.substring(d+2,c)||null;if(b.port==="/"){b.port=null}}else{var f=a.indexOf(":");var g=a.indexOf("/");var h=a.indexOf(":",f+1);if(h!==-1&&(g===-1||h<g)){b.hostname=a.substring(0,c)||null;b.port=null}else{e=a.substring(0,c).split(":");b.hostname=e[0]||null;b.port=e[1]||null}}if(b.hostname&&a.substring(c).charAt(0)!=="/"){c++;a="/"+a}return a.substring(c)||"/"};f.parseAuthority=function(a,b){a=f.parseUserinfo(a,b);return f.parseHost(a,b)};f.parseUserinfo=function(a,b){var c=a.indexOf("/");var d=a.lastIndexOf("@",c>-1?c:a.length-1);var e;if(d>-1&&(c===-1||d<c)){e=a.substring(0,d).split(":");b.username=e[0]?f.decode(e[0]):null;e.shift();b.password=e[0]?f.decode(e.join(":")):null;a=a.substring(d+1)}else{b.username=null;b.password=null}return a};f.parseQuery=function(a,b){if(!a){return{}}a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a){return{}}var c={};var d=a.split("&");var e=d.length;var g,i,j;for(var k=0;k<e;k++){g=d[k].split("=");i=f.decodeQuery(g.shift(),b);j=g.length?f.decodeQuery(g.join("="),b):null;if(h.call(c,i)){if(typeof c[i]==="string"||c[i]===null){c[i]=[c[i]]}c[i].push(j)}else{c[i]=j}}return c};f.build=function(a){var b="";if(a.protocol){b+=a.protocol+":"}if(!a.urn&&(b||a.hostname)){b+="//"}b+=f.buildAuthority(a)||"";if(typeof a.path==="string"){if(a.path.charAt(0)!=="/"&&typeof a.hostname==="string"){b+="/"}b+=a.path}if(typeof a.query==="string"&&a.query){b+="?"+a.query}if(typeof a.fragment==="string"&&a.fragment){b+="#"+a.fragment}return b};f.buildHost=function(a){var b="";if(!a.hostname){return""}else if(f.ip6_expression.test(a.hostname)){b+="["+a.hostname+"]"}else{b+=a.hostname}if(a.port){b+=":"+a.port}return b};f.buildAuthority=function(a){return f.buildUserinfo(a)+f.buildHost(a)};f.buildUserinfo=function(a){var b="";if(a.username){b+=f.encode(a.username);if(a.password){b+=":"+f.encode(a.password)}b+="@"}return b};f.buildQuery=function(a,b,c){var d="";var e,g,i,j;for(g in a){if(h.call(a,g)&&g){if(k(a[g])){e={};for(i=0,j=a[g].length;i<j;i++){if(a[g][i]!==undefined&&e[a[g][i]+""]===undefined){d+="&"+f.buildQueryParameter(g,a[g][i],c);if(b!==true){e[a[g][i]+""]=true}}}}else if(a[g]!==undefined){d+="&"+f.buildQueryParameter(g,a[g],c)}}}return d.substring(1)};f.buildQueryParameter=function(a,b,c){return f.encodeQuery(a,c)+(b!==null?"="+f.encodeQuery(b,c):"")};f.addQuery=function(a,b,c){if(typeof b==="object"){for(var d in b){if(h.call(b,d)){f.addQuery(a,d,b[d])}}}else if(typeof b==="string"){if(a[b]===undefined){a[b]=c;return}else if(typeof a[b]==="string"){a[b]=[a[b]]}if(!k(c)){c=[c]}a[b]=(a[b]||[]).concat(c)}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}};f.removeQuery=function(a,b,c){var d,e,g;if(k(b)){for(d=0,e=b.length;d<e;d++){a[b[d]]=undefined}}else if(j(b)==="RegExp"){for(g in a){if(b.test(g)){a[g]=undefined}}}else if(typeof b==="object"){for(g in b){if(h.call(b,g)){f.removeQuery(a,g,b[g])}}}else if(typeof b==="string"){if(c!==undefined){if(j(c)==="RegExp"){if(!k(a[b])&&c.test(a[b])){a[b]=undefined}else{a[b]=l(a[b],c)}}else if(a[b]===String(c)&&(!k(c)||c.length===1)){a[b]=undefined}else if(k(a[b])){a[b]=l(a[b],c)}}else{a[b]=undefined}}else{throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")}};f.hasQuery=function(a,b,c,d){switch(j(b)){case"String":break;case"RegExp":for(var e in a){if(h.call(a,e)){if(b.test(e)&&(c===undefined||f.hasQuery(a,e,c))){return true}}}return false;case"Object":for(var g in b){if(h.call(b,g)){if(!f.hasQuery(a,g,b[g])){return false}}}return true;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(j(c)){case"Undefined":return b in a;case"Boolean":var i=Boolean(k(a[b])?a[b].length:a[b]);return c===i;case"Function":return!!c(a[b],b,a);case"Array":if(!k(a[b])){return false}var l=d?m:n;return l(a[b],c);case"RegExp":if(!k(a[b])){return Boolean(a[b]&&a[b].match(c))}if(!d){return false}return m(a[b],c);case"Number":c=String(c);case"String":if(!k(a[b])){return a[b]===c}if(!d){return false}return m(a[b],c);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}};f.commonPath=function(a,b){var c=Math.min(a.length,b.length);var d;for(d=0;d<c;d++){if(a.charAt(d)!==b.charAt(d)){d--;break}}if(d<1){return a.charAt(0)===b.charAt(0)&&a.charAt(0)==="/"?"/":""}if(a.charAt(d)!=="/"||b.charAt(d)!=="/"){d=a.substring(0,d).lastIndexOf("/")}return a.substring(0,d+1)};f.withinString=function(a,b,c){c||(c={});var d=c.start||f.findUri.start;var e=c.end||f.findUri.end;var g=c.trim||f.findUri.trim;var h=/[a-z0-9-]=["']?$/i;d.lastIndex=0;while(true){var i=d.exec(a);if(!i){break}var j=i.index;if(c.ignoreHtml){var k=a.slice(Math.max(j-3,0),j);if(k&&h.test(k)){continue}}var l=j+a.slice(j).search(e);var m=a.slice(j,l).replace(g,"");if(c.ignore&&c.ignore.test(m)){continue}l=j+m.length;var n=b(m,j,l,a);a=a.slice(0,j)+n+a.slice(l);d.lastIndex=j+n.length}d.lastIndex=0;return a};f.ensureValidHostname=function(b){if(b.match(f.invalid_hostname_characters)){if(!a){throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available')}if(a.toASCII(b).match(f.invalid_hostname_characters)){throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-]')}}};f.noConflict=function(a){if(a){var b={URI:this.noConflict()};if(d.URITemplate&&typeof d.URITemplate.noConflict==="function"){b.URITemplate=d.URITemplate.noConflict()}if(d.IPv6&&typeof d.IPv6.noConflict==="function"){b.IPv6=d.IPv6.noConflict()}if(d.SecondLevelDomains&&typeof d.SecondLevelDomains.noConflict==="function"){b.SecondLevelDomains=d.SecondLevelDomains.noConflict()}return b}else if(d.URI===this){d.URI=e}return this};g.build=function(a){if(a===true){this._deferred_build=true}else if(a===undefined||this._deferred_build){this._string=f.build(this._parts);this._deferred_build=false}return this};g.clone=function(){return new f(this)};g.valueOf=g.toString=function(){return this.build(false)._string};function v(a){return function(b,c){if(b===undefined){return this._parts[a]||""}else{this._parts[a]=b||null;this.build(!c);return this}}}function w(a,b){return function(c,d){if(c===undefined){return this._parts[a]||""}else{if(c!==null){c=c+"";if(c.charAt(0)===b){c=c.substring(1)}}this._parts[a]=c;this.build(!d);return this}}}g.protocol=v("protocol");g.username=v("username");g.password=v("password");g.hostname=v("hostname");g.port=v("port");g.query=w("query","?");g.fragment=w("fragment","#");g.search=function(a,b){var c=this.query(a,b);return typeof c==="string"&&c.length?"?"+c:c};g.hash=function(a,b){var c=this.fragment(a,b);return typeof c==="string"&&c.length?"#"+c:c};g.pathname=function(a,b){if(a===undefined||a===true){var c=this._parts.path||(this._parts.hostname?"/":"");return a?(this._parts.urn?f.decodeUrnPath:f.decodePath)(c):c}else{if(this._parts.urn){this._parts.path=a?f.recodeUrnPath(a):""}else{this._parts.path=a?f.recodePath(a):"/"}this.build(!b);return this}};g.path=g.pathname;g.href=function(a,b){var c;if(a===undefined){return this.toString()}this._string="";this._parts=f._parts();var d=a instanceof f;var e=typeof a==="object"&&(a.hostname||a.path||a.pathname);if(a.nodeName){var g=f.getDomAttribute(a);a=a[g]||"";e=false}if(!d&&e&&a.pathname!==undefined){a=a.toString()}if(typeof a==="string"||a instanceof String){this._parts=f.parse(String(a),this._parts)}else if(d||e){var i=d?a._parts:a;for(c in i){if(h.call(this._parts,c)){this._parts[c]=i[c]}}}else{throw new TypeError("invalid input")}this.build(!b);return this};g.is=function(a){var b=false;var d=false;var e=false;var g=false;var h=false;var i=false;var j=false;var k=!this._parts.urn;if(this._parts.hostname){k=false;d=f.ip4_expression.test(this._parts.hostname);e=f.ip6_expression.test(this._parts.hostname);b=d||e;g=!b;h=g&&c&&c.has(this._parts.hostname);i=g&&f.idn_expression.test(this._parts.hostname);j=g&&f.punycode_expression.test(this._parts.hostname)}switch(a.toLowerCase()){case"relative":return k;case"absolute":return!k;case"domain":case"name":return g;case"sld":return h;case"ip":return b;case"ip4":case"ipv4":case"inet4":return d;case"ip6":case"ipv6":case"inet6":return e;case"idn":return i;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return j}return null};var x=g.protocol;var y=g.port;var z=g.hostname;g.protocol=function(a,b){if(a!==undefined){if(a){a=a.replace(/:(\/\/)?$/,"");if(!a.match(f.protocol_expression)){throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]")}}}return x.call(this,a,b)};g.scheme=g.protocol;g.port=function(a,b){if(this._parts.urn){return a===undefined?"":this}if(a!==undefined){if(a===0){a=null}if(a){a+="";if(a.charAt(0)===":"){a=a.substring(1)}if(a.match(/[^0-9]/)){throw new TypeError('Port "'+a+'" contains characters other than [0-9]')}}}return y.call(this,a,b)};g.hostname=function(a,b){if(this._parts.urn){return a===undefined?"":this}if(a!==undefined){var c={};var d=f.parseHost(a,c);if(d!=="/"){throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]')}a=c.hostname}return z.call(this,a,b)};g.origin=function(a,b){if(this._parts.urn){return a===undefined?"":this}if(a===undefined){var c=this.protocol();var d=this.authority();if(!d){return""}return(c?c+"://":"")+this.authority()}else{var e=f(a);this.protocol(e.protocol()).authority(e.authority()).build(!b);return this}};g.host=function(a,b){if(this._parts.urn){return a===undefined?"":this}if(a===undefined){return this._parts.hostname?f.buildHost(this._parts):""}else{var c=f.parseHost(a,this._parts);if(c!=="/"){throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]')}this.build(!b);return this}};g.authority=function(a,b){if(this._parts.urn){return a===undefined?"":this}if(a===undefined){return this._parts.hostname?f.buildAuthority(this._parts):""}else{var c=f.parseAuthority(a,this._parts);if(c!=="/"){throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]')}this.build(!b);return this}};g.userinfo=function(a,b){if(this._parts.urn){return a===undefined?"":this}if(a===undefined){if(!this._parts.username){return""}var c=f.buildUserinfo(this._parts);return c.substring(0,c.length-1)}else{if(a[a.length-1]!=="@"){a+="@"}f.parseUserinfo(a,this._parts);this.build(!b);return this}};g.resource=function(a,b){var c;if(a===undefined){return this.path()+this.search()+this.hash()}c=f.parse(a);this._parts.path=c.path;this._parts.query=c.query;this._parts.fragment=c.fragment;this.build(!b);return this};g.subdomain=function(a,b){if(this._parts.urn){return a===undefined?"":this}if(a===undefined){if(!this._parts.hostname||this.is("IP")){return""}var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}else{var d=this._parts.hostname.length-this.domain().length;var e=this._parts.hostname.substring(0,d);var g=new RegExp("^"+i(e));if(a&&a.charAt(a.length-1)!=="."){a+="."}if(a){f.ensureValidHostname(a)}this._parts.hostname=this._parts.hostname.replace(g,a);this.build(!b);return this}};g.domain=function(a,b){if(this._parts.urn){return a===undefined?"":this}if(typeof a==="boolean"){b=a;a=undefined}if(a===undefined){if(!this._parts.hostname||this.is("IP")){return""}var c=this._parts.hostname.match(/\./g);if(c&&c.length<2){return this._parts.hostname}var d=this._parts.hostname.length-this.tld(b).length-1;d=this._parts.hostname.lastIndexOf(".",d-1)+1;return this._parts.hostname.substring(d)||""}else{if(!a){throw new TypeError("cannot set domain empty")}f.ensureValidHostname(a);if(!this._parts.hostname||this.is("IP")){this._parts.hostname=a}else{var e=new RegExp(i(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(e,a)}this.build(!b);return this}};g.tld=function(a,b){if(this._parts.urn){return a===undefined?"":this}if(typeof a==="boolean"){b=a;a=undefined}if(a===undefined){if(!this._parts.hostname||this.is("IP")){return""}var d=this._parts.hostname.lastIndexOf(".");var e=this._parts.hostname.substring(d+1);if(b!==true&&c&&c.list[e.toLowerCase()]){return c.get(this._parts.hostname)||e}return e}else{var f;if(!a){throw new TypeError("cannot set TLD empty")}else if(a.match(/[^a-zA-Z0-9-]/)){if(c&&c.is(a)){f=new RegExp(i(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(f,a)}else{throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]')}}else if(!this._parts.hostname||this.is("IP")){throw new ReferenceError("cannot set TLD on non-domain host")}else{f=new RegExp(i(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(f,a)}this.build(!b);return this}};g.directory=function(a,b){if(this._parts.urn){return a===undefined?"":this}if(a===undefined||a===true){if(!this._parts.path&&!this._parts.hostname){return""}if(this._parts.path==="/"){return"/"}var c=this._parts.path.length-this.filename().length-1;var d=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?f.decodePath(d):d}else{var e=this._parts.path.length-this.filename().length;var g=this._parts.path.substring(0,e);var h=new RegExp("^"+i(g));if(!this.is("relative")){if(!a){a="/"}if(a.charAt(0)!=="/"){a="/"+a}}if(a&&a.charAt(a.length-1)!=="/"){a+="/"}a=f.recodePath(a);this._parts.path=this._parts.path.replace(h,a);this.build(!b);return this}};g.filename=function(a,b){if(this._parts.urn){return a===undefined?"":this}if(a===undefined||a===true){if(!this._parts.path||this._parts.path==="/"){return""}var c=this._parts.path.lastIndexOf("/");var d=this._parts.path.substring(c+1);return a?f.decodePathSegment(d):d}else{var e=false;if(a.charAt(0)==="/"){a=a.substring(1)}if(a.match(/\.?\//)){e=true}var g=new RegExp(i(this.filename())+"$");a=f.recodePath(a);this._parts.path=this._parts.path.replace(g,a);if(e){this.normalizePath(b)}else{this.build(!b)}return this}};g.suffix=function(a,b){if(this._parts.urn){return a===undefined?"":this}if(a===undefined||a===true){if(!this._parts.path||this._parts.path==="/"){return""}var c=this.filename();var d=c.lastIndexOf(".");var e,g;if(d===-1){return""}e=c.substring(d+1);g=/^[a-z0-9%]+$/i.test(e)?e:"";return a?f.decodePathSegment(g):g}else{if(a.charAt(0)==="."){a=a.substring(1)}var h=this.suffix();var j;if(!h){if(!a){return this}this._parts.path+="."+f.recodePath(a)}else if(!a){j=new RegExp(i("."+h)+"$")}else{j=new RegExp(i(h)+"$")}if(j){a=f.recodePath(a);this._parts.path=this._parts.path.replace(j,a)}this.build(!b);return this}};g.segment=function(a,b,c){var d=this._parts.urn?":":"/";var e=this.path();var f=e.substring(0,1)==="/";var g=e.split(d);if(a!==undefined&&typeof a!=="number"){c=b;b=a;a=undefined}if(a!==undefined&&typeof a!=="number"){throw new Error('Bad segment "'+a+'", must be 0-based integer')}if(f){g.shift()}if(a<0){a=Math.max(g.length+a,0)}if(b===undefined){return a===undefined?g:g[a]}else if(a===null||g[a]===undefined){if(k(b)){g=[];for(var h=0,i=b.length;h<i;h++){if(!b[h].length&&(!g.length||!g[g.length-1].length)){continue}if(g.length&&!g[g.length-1].length){g.pop()}g.push(o(b[h]))}}else if(b||typeof b==="string"){b=o(b);if(g[g.length-1]===""){g[g.length-1]=b}else{g.push(b)}}}else{if(b){g[a]=o(b)}else{g.splice(a,1)}}if(f){g.unshift("")}return this.path(g.join(d),c)};g.segmentCoded=function(a,b,c){var d,e,g;if(typeof a!=="number"){c=b;b=a;a=undefined}if(b===undefined){d=this.segment(a,b,c);if(!k(d)){d=d!==undefined?f.decode(d):undefined}else{for(e=0,g=d.length;e<g;e++){d[e]=f.decode(d[e])}}return d}if(!k(b)){b=typeof b==="string"||b instanceof String?f.encode(b):b}else{for(e=0,g=b.length;e<g;e++){b[e]=f.encode(b[e])}}return this.segment(a,b,c)};var A=g.query;g.query=function(a,b){if(a===true){return f.parseQuery(this._parts.query,this._parts.escapeQuerySpace)}else if(typeof a==="function"){var c=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);var d=a.call(this,c);this._parts.query=f.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!b);return this}else if(a!==undefined&&typeof a!=="string"){this._parts.query=f.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!b);return this}else{return A.call(this,a,b)}};g.setQuery=function(a,b,c){var d=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof a==="string"||a instanceof String){d[a]=b!==undefined?b:null}else if(typeof a==="object"){for(var e in a){if(h.call(a,e)){d[e]=a[e]}}}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}this._parts.query=f.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof a!=="string"){c=b}this.build(!c);return this};g.addQuery=function(a,b,c){var d=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);f.addQuery(d,a,b===undefined?null:b);this._parts.query=f.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof a!=="string"){c=b}this.build(!c);return this};g.removeQuery=function(a,b,c){var d=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);f.removeQuery(d,a,b);this._parts.query=f.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof a!=="string"){c=b}this.build(!c);return this};g.hasQuery=function(a,b,c){var d=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return f.hasQuery(d,a,b,c)};g.setSearch=g.setQuery;g.addSearch=g.addQuery;g.removeSearch=g.removeQuery;g.hasSearch=g.hasQuery;g.normalize=function(){if(this._parts.urn){return this.normalizeProtocol(false).normalizePath(false).normalizeQuery(false).normalizeFragment(false).build()}return this.normalizeProtocol(false).normalizeHostname(false).normalizePort(false).normalizePath(false).normalizeQuery(false).normalizeFragment(false).build()};g.normalizeProtocol=function(a){if(typeof this._parts.protocol==="string"){this._parts.protocol=this._parts.protocol.toLowerCase();this.build(!a)}return this};g.normalizeHostname=function(c){if(this._parts.hostname){if(this.is("IDN")&&a){this._parts.hostname=a.toASCII(this._parts.hostname)}else if(this.is("IPv6")&&b){this._parts.hostname=b.best(this._parts.hostname)}this._parts.hostname=this._parts.hostname.toLowerCase();this.build(!c)}return this};g.normalizePort=function(a){if(typeof this._parts.protocol==="string"&&this._parts.port===f.defaultPorts[this._parts.protocol]){this._parts.port=null;this.build(!a)}return this};g.normalizePath=function(a){var b=this._parts.path;if(!b){return this}if(this._parts.urn){this._parts.path=f.recodeUrnPath(this._parts.path);this.build(!a);return this}if(this._parts.path==="/"){return this}b=f.recodePath(b);var c;var d="";var e,g;if(b.charAt(0)!=="/"){c=true;b="/"+b}if(b.slice(-3)==="/.."||b.slice(-2)==="/."){b+="/"}b=b.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");if(c){d=b.substring(1).match(/^(\.\.\/)+/)||"";if(d){d=d[0]}}while(true){e=b.search(/\/\.\.(\/|$)/);if(e===-1){break}else if(e===0){b=b.substring(3);continue}g=b.substring(0,e).lastIndexOf("/");if(g===-1){g=e}b=b.substring(0,g)+b.substring(e+3)}if(c&&this.is("relative")){b=d+b.substring(1)}this._parts.path=b;this.build(!a);return this};g.normalizePathname=g.normalizePath;g.normalizeQuery=function(a){if(typeof this._parts.query==="string"){if(!this._parts.query.length){this._parts.query=null}else{this.query(f.parseQuery(this._parts.query,this._parts.escapeQuerySpace))}this.build(!a)}return this};g.normalizeFragment=function(a){if(!this._parts.fragment){this._parts.fragment=null;this.build(!a)}return this};g.normalizeSearch=g.normalizeQuery;g.normalizeHash=g.normalizeFragment;g.iso8859=function(){var a=f.encode;var b=f.decode;f.encode=escape;f.decode=decodeURIComponent;try{this.normalize()}finally{f.encode=a;f.decode=b}return this};g.unicode=function(){var a=f.encode;var b=f.decode;f.encode=q;f.decode=unescape;try{this.normalize()}finally{f.encode=a;f.decode=b}return this};g.readable=function(){var b=this.clone();b.username("").password("").normalize();var c="";if(b._parts.protocol){c+=b._parts.protocol+"://"}if(b._parts.hostname){if(b.is("punycode")&&a){c+=a.toUnicode(b._parts.hostname);if(b._parts.port){c+=":"+b._parts.port}}else{c+=b.host()}}if(b._parts.hostname&&b._parts.path&&b._parts.path.charAt(0)!=="/"){c+="/"}c+=b.path(true);if(b._parts.query){var d="";for(var e=0,g=b._parts.query.split("&"),h=g.length;e<h;e++){var i=(g[e]||"").split("=");d+="&"+f.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26");if(i[1]!==undefined){d+="="+f.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26")}}c+="?"+d.substring(1)}c+=f.decodeQuery(b.hash(),true);return c};g.absoluteTo=function(a){var b=this.clone();var c=["protocol","username","password","hostname","port"];var d,e,g;if(this._parts.urn){throw new Error("URNs do not have any generally defined hierarchical components")}if(!(a instanceof f)){a=new f(a)}if(!b._parts.protocol){b._parts.protocol=a._parts.protocol}if(this._parts.hostname){return b}for(e=0;g=c[e];e++){b._parts[g]=a._parts[g]}if(!b._parts.path){b._parts.path=a._parts.path;if(!b._parts.query){b._parts.query=a._parts.query}}else if(b._parts.path.substring(-2)===".."){b._parts.path+="/"}if(b.path().charAt(0)!=="/"){d=a.directory();d=d?d:a.path().indexOf("/")===0?"/":"";b._parts.path=(d?d+"/":"")+b._parts.path;b.normalizePath()}b.build();return b};g.relativeTo=function(a){var b=this.clone().normalize();var c,d,e,g,h;if(b._parts.urn){throw new Error("URNs do not have any generally defined hierarchical components")}a=new f(a).normalize();c=b._parts;d=a._parts;g=b.path();h=a.path();if(g.charAt(0)!=="/"){throw new Error("URI is already relative")}if(h.charAt(0)!=="/"){throw new Error("Cannot calculate a URI relative to another relative URI")}if(c.protocol===d.protocol){c.protocol=null}if(c.username!==d.username||c.password!==d.password){return b.build()}if(c.protocol!==null||c.username!==null||c.password!==null){return b.build()}if(c.hostname===d.hostname&&c.port===d.port){c.hostname=null;c.port=null}else{return b.build()}if(g===h){c.path="";return b.build()}e=f.commonPath(g,h);if(!e){return b.build()}var i=d.path.substring(e.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");c.path=i+c.path.substring(e.length)||"./";return b.build()};g.equals=function(a){var b=this.clone();var c=new f(a);var d={};var e={};var g={};var i,j,l;b.normalize();c.normalize();if(b.toString()===c.toString()){return true}i=b.query();j=c.query();b.query("");c.query("");if(b.toString()!==c.toString()){return false}if(i.length!==j.length){return false}d=f.parseQuery(i,this._parts.escapeQuerySpace);e=f.parseQuery(j,this._parts.escapeQuerySpace);for(l in d){if(h.call(d,l)){if(!k(d[l])){if(d[l]!==e[l]){return false}}else if(!n(d[l],e[l])){return false}g[l]=true}}for(l in e){if(h.call(e,l)){if(!g[l]){return false}}}return true};g.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=!!a;return this};g.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this};return f});define("urijs",["urijs/URI"],function(a){return a});define("mrg-auth-client/utils/helper",["require","exports","module","urijs"],function(require,exports){var a=require("urijs");exports.href=function(a){return a.location.href};exports.redirect=function(a,b){a.location.href=b};exports.extendUrl=function(b,c,d){var e=a(b),f=[];c=c||{};d=d||[];d.forEach(function(a){e.removeQuery(a);delete c[a]});Object.keys(c).forEach(function(a){if(e.hasQuery("string",a)){e.removeQuery(a)}e.addQuery(a,c[a])});return e.href()}});define("mrg-auth-client/providers/social",["require","exports","module","../logger","../utils/helper"],function(require,exports){var a=require("../logger").scope("social"),b=require("../utils/helper");exports.signin=function(c,d,e){var f;f={client_id:c.appid,page:e.page,fail:b.extendUrl(b.href(window),{errno:2,social_type:c.id},["mode","modal","oauth_type"])};a.add("signin");return d.signin(b.extendUrl(e.authOrigin+"/cgi-bin/oauth2_"+c.id,f))}});define("mrg-auth-client/providers/oauth",["require","exports","module","../logger","../utils/helper"],function(require,exports){var a=require("../logger").scope("wwp"),b=require("../utils/helper");exports.signin=function(c,d,e){var f;f={login:c.login,lang:c.lang,page:e.page,fail:b.extendUrl(b.href(window),{errno:3,oauth_type:c.type},["mode","modal","oauth_type"])};a.add("signin");return d.signin(b.extendUrl(e.authOrigin+"/cgi-bin/oauth2_"+c.type,f))}});define("mrg-auth-client/gates/basic",["require","exports","module","Promise","../logger","../utils/helper"],function(require,exports){var a=require("Promise"),b=require("../logger").scope("basic"),c=require("../utils/helper");var d=false;exports.load=function(){var c=new a;b.add("basic load");d=true;c.resolve();return c.promise()};exports.signin=function(d){var e=new a;b.add("basic signin");c.redirect(window,d);e.resolve();return e.promise()};exports.resize=function(c){var d=new a;b.add("basic resize",c);d.resolve();return d.promise()};exports.auth=function(c){var d=new a,e=c.successUrl;b.add("basic auth");if(e){b.add("basic redirect after auth - "+e);window.location.assign(e)}d.resolve();return d.promise()};exports.hide=function(){throw new Error("can't hide")};exports.unload=function(){d=false}});define("mrg-auth-client/utils/ag",["require","exports","module","Promise","../logger"],function(require,exports){var a=require("Promise"),b=require("../logger").scope("main gate");var c;exports.load=function(d){var e=new a;if(!d){b.add("No authgate for gate");throw new Error("No authgate for gate")}else{e.resolve(c=d)}return e.promise()};exports.call=function(){var d=arguments;return new a(function(a,e){if(!c){b.add("gate need to be loaded");return e("no gate, load first")}try{c.call.apply(c,d);a()}catch(f){b.add(f);e(f)}})}});define("mrg-auth-client/gates/portal",["require","exports","module","Promise","../logger","../utils/ag"],function(require,exports){var a=require("Promise"),b=require("../logger").scope("portal"),c=require("../utils/ag");var d=false;exports.load=function(b){var e=new a;if(!b){e.reject();throw new Error("no authgate")}else{c.load(b).then(function(){d=true;e.resolve()})}return e.promise()};exports.signin=function(a){return c.call("click:extauth",a).then(function(){b.add("click:extauth",a)})};exports.hide=function(){return c.call("form:hide").then(function(){b.add("form:hide")})};exports.unload=function(){d=false};exports.auth=function(){return c.call("auth").then(function(){b.add("auth")})};exports.resize=function(a){return c.call("form:resize",a).then(function(){b.add("resize",a)})}});define("mrg-auth-client/main",["require","exports","module","mrg-polyfills","Promise","./logger","jquery","./providers/base","./providers/social","./providers/oauth","./gates/basic","./gates/portal"],function(require,exports){"use strict";require("mrg-polyfills");var a=require("Promise"),b=require("./logger"),$=require("jquery");var c={base:require("./providers/base"),social:require("./providers/social"),oauth:require("./providers/oauth")},d={basic:require("./gates/basic"),portal:require("./gates/portal")};
var e=function(a,b){this.config=$.extend({},b);this.gate=a};e.prototype.signin=function(d,e){var f=new a;if(!c[d]){b.add("signin type is incorrect");f.reject(new Error("provider type is incorrect"))}else{c[d].signin(e,this.gate,this.config).then(f.resolve).fail(f.reject)}return f.promise()};e.prototype.hide=function(){return this.gate.hide()};exports.load=function(b){return new a(function(a,c){var f;if(!b){return c(new Error("no options for client"))}f=b.authgate?d.portal:d.basic;f.load(b.authgate).then(function(){exports.client=new e(f,b);exports.AG=b.authgate;a()}).fail(c)})}});define("mrg-auth-client",["mrg-auth-client/main"],function(a){return a});define("mrg-counter/counter/counter",["require","exports","module"],function(require,exports){var a=function(a,b,c){c=c||{};var d=""+Object.keys(c).map(function(a){return a+"="+c[a]}).join("&");if(d)d="&"+d;(new Image).src="//rs.mail.ru/"+a+b+".gif?_="+Math.random()+d};exports.rbd=function(b,c){a("d",b,c)};exports.rbsb=function(b,c){a("sb",b,c)}});define("mrg-counter/counter/main",["require","mrg-polyfills","logger","mrg-counter/counter/counter"],function(require){require("mrg-polyfills");var a=require("logger").getScope("counters"),b=require("mrg-counter/counter/counter");return function(c,d){var e=d.chain,f=c;for(var g=0,h=e.length,i;g<h;g++){i=e[g];if(f){if(f["$"+d.eventType]){f=f["$"+d.eventType]}if(f[i]===void 0&&f[i.toLowerCase()]===void 0){f=f["$ANY"];break}else{f=f[i]||f[i.toLowerCase()]}}}if(typeof f==="object"&&!f[0]){f=f[d.eventType==="rb-show"?"$SHOW":"$ROOT"]}f&&[].concat(f).forEach(function(c,e){if(typeof c==="string"){c=new Function("ui","return ("+c+");")}if($.isFunction(c)){try{c=c(d)}catch(f){c=0;a.add("counters.fn.error:",f)}}if(c){if(d.eventType==="rb-show"){a.add("rb.cnt.show."+e+":",c,d.chain.join("."));b.rbd(c,d.params)}else{a.add("rb.cnt.click."+e+":",c,d.chain.join("."));b.rbsb(c,d.params)}}})}});define("mrg-counter/radar/utils",["require","exports","module"],function(require,exports){"use strict";exports.toQuery=function(a){var b=[];var c;if(!a){return""}if(typeof a==="string"){return a}for(var d in a){c=a[d];if(typeof c==="undefined"||c===null||!a.hasOwnProperty(d)){continue}if(!Array.isArray(c)){c=[c]}b=b.concat(c.map(function(a){return d+"="+encodeURIComponent(a)}))}return b.join("&")};exports.toObject=function(a,b){b=b||{};if(a=new String(a)){if(a.indexOf("?")>-1)a=a.split("?")[1];try{a=decodeURIComponent(a)}catch(c){a=unescape(a)}a=a.split("&");for(var d=0,e=a.length;d<e;d++){a[d]=a[d].split("=");b[a[d][0]]=a[d][1]!==undefined?a[d][1]:""}return b}return b};exports.each=function(a,b){var c=0,d,e;if((d=a.length)!==undefined){while(c<d){e=a[c];if(b.call(e,c++,e)===false){break}}}else{for(c in a){e=a[c];if(b.call(e,c,e)===false){break}}}return c}});define("mrg-counter/radar/radar",["require","exports","module","Promise","RPC","logger","mrg-counter/radar/utils"],function(require,exports){"use strict";var a=require("Promise"),b=require("RPC"),c=require("logger").getScope("radars"),d=require("mrg-counter/radar/utils");var e=1e3,f=/[\d]{7,}/gi,g=1,h=new Date,i="stat.radar.imgsmail.ru";if(!j){var j={}}function k(a,b,e,f){var j;f=f||{};f.v=g;f.email=a||"";f.p=f.p||"account";f.t=b.substr(0,64);f.i=typeof e==="undefined"?1:e;f.rnd=h++;j=new Image;j.src="//"+i+"/update?"+d.toQuery(f);c.add("radar.cnt"+":",b);return j}exports.lazySend=function(c,d,g,h){var i=g&&g.email||b.setup("email");var j;c=c.filter(function(a){return!f.test(a)&&typeof a==="string"});j=k(i,c.join("_"),d,g);if(!h){return a.resolve()}return new a(function(a,b){var c;c=setTimeout(a,e);j.onload=function(){clearTimeout(c);a()};j.onerror=function(){clearTimeout(c);b()}})}});define("mrg-counter/radar/main",["require","mrg-counter/radar/radar"],function(require){var a=require("mrg-counter/radar/radar");var b={};return function(c,d,e){var f=d.chain,g=d.value,h=d.params||{},i,j=c;if(e&&typeof e==="object"){b=e}for(var k in b){if(b.hasOwnProperty(k)){h[k]=h[k]||b[k]}}for(var k=0,l=f.length;k<l;k++){i=f[k];if(j){if(j[i]===void 0&&j[i.toLowerCase()]===void 0){j=j["*"];break}else{j=j[i]||j[i.toLowerCase()]}}}if(j){if($.isFunction(j)){try{j=j(d)}catch(m){ajs.log("radars.fn.error:",m)}}else if(j===true){a.lazySend(f,g,h)}else if(typeof j==="string"){f[l-1]=j;a.lazySend(f,g,h)}}else if(j!==false){a.lazySend(f,g,h)}}});define("mrg-counter/main",["require","exports","module","Promise","mrg-counter/counter/main","mrg-counter/radar/main"],function(require,exports){"use strict";var a=require("Promise");exports.load=function(b){return new a(function(a){if(b.counters){exports.rb=require("mrg-counter/counter/main").bind(null,b.counters)}if(b.radars){exports.radar=require("mrg-counter/radar/main").bind(null,b.radars)}a()})}});define("mrg-counter",["mrg-counter/main"],function(a){return a});define("modules/counterParams",["require","exports","module","config"],function(require,exports){"use strict";var a=require("config");exports.getParams=function(){var b={};var c=a.get("rbSiteZone");if(c){b.sz=c}var d=a.get("rbTestId");if(d){b.test_id=d}return b}});define("blocks/b-panel/b-panel",["require","toolkit/b-panel/b-panel","toolkit/b-toolkit/b-toolkit","config","serverData","mrg-auth-client","mrg-counter","modules/counterParams"],function(require){"use strict";var a=require("toolkit/b-panel/b-panel"),b=require("toolkit/b-toolkit/b-toolkit"),c=require("config"),d=require("serverData"),e=require("mrg-auth-client"),f=require("mrg-counter"),g=require("modules/counterParams");b["b-panel"]=a.extend({init:function(){a.prototype.init.call(this);if(this.getData().close){this.$el.find("[data-name=close]").on("click",this.onClose.bind(this,"button"));this.$el.on("keyup",this.onClose.bind(this,"escape"))}},onClose:function(a,b){if(a==="escape"&&b.keyCode!==27){return}f.rb({chain:[c.get("pageId"),c.get("opener"),"close",a],params:g.getParams()});e.client.hide()}});return b["b-panel"]});define("toolkit/b-input/b-input",["toolkit/b-toolkit/b-toolkit"],function(a){"use strict";var b={space:32};return a.create("b-input",{init:function(){var a=this.getData().prevent||[];a=a.map(function(a){return b[a]||a});this.$el.on("change input",function(){this.emit("change",this.$el.val())}.bind(this));this.$el.on("focus",function(){this.emit("focus",this.$el.val())}.bind(this));this.$el.on("blur",function(){this.emit("blur")}.bind(this));this.$el.on("keydown",function(b){if(a.includes(b.which)){return false}this._previousVal=this.$el.val();return true}.bind(this));this.$el.on("keyup",function(){var a=this.$el.val();if(this._previousVal!==a){this.emit("change",a)}}.bind(this))},getValue:function(){return this.$el.val()},setValue:function(a){this.$el.val(a)},focus:function(){var a=this.getValue(),b=a.length,c=this.$el.get(0);this.$el.focus();if(c.setSelectionRange){c.setSelectionRange(b,b)}},validate:function(a){return a(this.$el,this.$el.val())}})});define("mrg-mega-blocks/b-input/b-input",["toolkit/b-input/b-input"],function(a){"use strict";return a.extend("b-input",{})});define("toolkit/b-select/b-select",["require","toolkit/b-toolkit/b-toolkit","toolkit/b-dropdown/b-dropdown"],function(require){"use strict";var a=require("toolkit/b-toolkit/b-toolkit");require("toolkit/b-dropdown/b-dropdown");var b="multiselect";var c="";var d="";var e=0;var f=1;var g=2;return a.create("b-select",{toggle:function(a){this._toggleItem(a);var b=[];for(var c=0;c<this._selectedItem.length;c++){b.push(this._selectedItem[c].value)}this.$("__input").val(b.join(","));this.dropdown.setCurrentItem(a);this.updateTitle()},select:function(a){this.$("__input").val(a.value);this._selectedItem=[a];this.dropdown.setCurrentItem(a);this.$select.val(a.value)},init:function(){var c=this.data.items||[],d;if(c){c=c.map(function(a,b){a.num=b;return a})}var e=this.data.defaultIndex;this.initInner();this.dropdown=this.$('[data-blockid="dropdown"]').getBlock();this.data.props=this.data.props||{};this.updateTitle=a.debounce(this._updateTitle,100);this.dropdown.on("item",function(a,c){var d=c.$el.data();if(this.hasMod(b)){this.toggle(d)}else{this.select(d)}this.emit("change",d)}.bind(this));this.$select=this.$(".b-select__list");this.$select.on("change",this._onNativeSelectChange.bind(this));this.dropdown.on("toggleall",function(a,b){var c=b.$el.data();var d=this._getItems(f);if(this._selectedItem.length===d.length){while(this._selectedItem.length){this.toggle(this._selectedItem[0])}}else{for(var e=0;e<d.length;e++){var g=d[e];var h=false;for(var i=0;i<this._selectedItem.length;i++){if(this._selectedItem[i].num===g.num){h=true}}if(!h){this.toggle(g)}}}this.emit("change",c)}.bind(this));d=c.filter(function(a){return a.selected});if(this.hasMod(b)){for(var g=0;g<d.length;g++){this.toggle(d[g])}}else{if(d.length){this.select(d[0])}else if(e!==void 0&&c[e]){this.select(c[e])}else if(c[0]&&!this.data.props.placeholder){this.select(c[0])}}return this},_onNativeSelectChange:function(){var a=this.$select.val();var c=this._getItemFromValue(a);if(this.hasMod(b)){this.toggle(c)}else{this.select(c)}this.emit("change",c)},render:function(){a["b-toolkit"].prototype.render.apply(this,arguments);if(this.dropdown){this.dropdown.destroy();this.init()}return this},destroy:function(){this.dropdown.destroy();this.dropdown=null;a["b-toolkit"].fn.destroy.apply(this,arguments)},getValue:function(){if(this.hasMod(b)){return this._selectedItem}else{return this._selectedItem[0]||null}},_selectedItem:[],_onSelectItem:function(){},_toggleItem:function(a){var b=-1;var c=0;while(c<this._selectedItem.length&&b==-1){if(this._selectedItem[c].num===a.num){b=c}c++}if(b!=-1){this._selectedItem.splice(b,1)}else{this._selectedItem.push(a)}this._selectedItem.sort(function(a,b){if(a.num===b.num){return 0}else if(a.num>b.num){return 1}else{return-1}})},_getItems:function(a){if(!a){a=e}var b=this.data.items;var c=[];for(var d=0;d<b.length;d++){if(a===e){c.push(b[d])}else if(a===f&&!b[d].disabled){c.push(b[d])}else if(a===g&&b[d].disabled){c.push(b[d])}}return c},_updateTitle:function(){var a=[];var b=this._getItems(f);if(this._selectedItem.length===b.length){a.push(this.data.props.allChecked||"")}else if(this._selectedItem.length===0){a.push(this.data.props.notChecked||"")}else{for(var c=0;c<this._selectedItem.length;c++){a.push(this._selectedItem[c].text)}}this.dropdown.setTitle(a.join(", "))},_getItemFromValue:function(a){var b=null;this.data.items.forEach(function(c){if(b)return;if(c.value===a){b=c}});return b}})});define("mrg-mega-blocks/b-select/b-select",["toolkit/b-select/b-select"],function(a){"use strict";return a.extend("b-select",{})});define("toolkit/b-email/b-email",["toolkit/b-toolkit/b-toolkit","toolkit/b-select/b-select","toolkit/b-input/b-input"],function(a){"use strict";return a.create("b-email",{deferredInit:true,init:function(){this.$el.on("change."+this.uniqid,"input",this._onInput.bind(this)).on("keyup."+this.uniqid,"input",this._onInput.bind(this));this._changeEmail();this._initElems()},onRender:function(){this._initElems()},focus:function(){this.bInputLogin.focus()},_initElems:function(){this.bSelect=this.$(".b-select").getBlock();this.bSelect.off();this.bSelect.on("change",this._onSelectChange.bind(this));this.bInputLogin=this.$("__name .b-input").getBlock();this.bInputLogin.on("input",function(a,b){this.emit("inputname",b)}.bind(this)).on("focus",function(a,b){this.emit("focusname",b);this.emit("focus",this.getValue())}.bind(this)).on("blur",function(a,b){this.emit("blur",b)}.bind(this))},_onSelectChange:function(a,b){this.emit("select",b);this._changeEmail(true)},_onInput:function(){this.onChangeEmail.apply(this,arguments)},_changeEmail:function(a){var b=this.$("__input .b-input"),c=false,d=this.getName(),e=this.getDomain();if(this.hasMod("permanent-expand")){c=true}else{if(!this.isComposite()){c=true}}if(c){b.val(d)}else{b.val(d+"@"+e)}this.toggle(c);if(a){this.emit("change",this.getValue());this.emit("update",this.getEmailData())}},onChangeEmail:function(){this._changeEmail(true)},setName:function(a){this.$("__name .b-input").val(a)},setDomain:function(a){var b=this.getEmailData(),c=this.bSelect.data.items.find(function(b){return b.value===a});if(c){this.setName(b.name);this.bSelect.select(c)}else{this.setName(b.name+"@"+a)}this._changeEmail()},getEmailData:function(){var a=this._parseEmail(this.getLogin());if(this.isComposite()&&!this.hasMod("permanent-expand")&&!this.hasMod("expanded")){a.domain=this.getDomain()}return a},getName:function(){return this._getVal("__name .b-input")},getDomain:function(){return this._getVal("__domain .b-select__input")},getValue:function(){var a=this.getEmailData();return a.name+"@"+a.domain},setValue:function(a){var b=this._parseEmail(a);this._setLogin(b.name+"@"+b.domain);this.setDomain(b.domain)},getLogin:function(){return this._getVal("__input .b-input")},_setLogin:function(a){this.$("__input .b-input").val(a)},toggle:function(a){this.toggleMod("expanded",a)},isComposite:function(){return!/@/.test(this.getName())},_getVal:function(a){return $.trim(this.$(a).val())},_parseEmail:function(a){var b=a.match(/([^\@]*)(?:\@(.*))?/),c="",d="";if(b){c=b[1]||"";d=b[2]||""}return{name:c,domain:d}},validate:function(a){var b=this.$("__input .b-input"),c=b.val();if(/^@/.test(c)){c=""}return a(this.$el,c)},toggleMod:function(b,c){a["b-toolkit"].fn.toggleMod.call(this,b,c);if(b==="permanent-expand"&&c){this.toggleMod("expanded",true)}}})});define("mrg-mega-blocks/b-email/b-email",["toolkit/b-email/b-email"],function(a){"use strict";return a.extend("b-email",{})});define("modules/oauth",["require","exports","module","mrg-i18n-utils","modules/domains"],function(require,exports){"use strict";var i18n=require("mrg-i18n-utils"),a=require("modules/domains");var b={goauth:{name:"Gmail",type:"google",text:i18n("Для авторизации через Google OAuth вам не нужно вводить пароль, а достаточно предоставить доступ к вашему аккаунту Gmail."),domains:[]},msoauth:{name:"Live connect",type:"outlook",text:i18n("Для авторизации в Outlook вам не нужно вводить пароль, достаточно предоставить доступ к вашему аккаунту через Live connect."),domains:[]},yaoauth:{name:"Яндекс",type:"yandex",text:i18n("Для авторизации через Яндекс OAuth вам не нужно вводить пароль, а достаточно предоставить доступ к вашему аккаунту Яндекс."),domains:[]}};var c=function(a){for(var c in b){if(b[c].domains.indexOf(a)>-1){return b[c]}}return null};exports.load=function(){return new Promise(function(d,e){a.list.forEach(function(a){var c=a.data.authType,d=a.name;if(b[c]){b[c].domains.push(d)}});exports.list=b;exports.getData=c;d(b)})}});define("modules/domains",["require","exports","module","jquery","Promise","./oauth","config"],function(require,exports){"use strict";var $=require("jquery"),a=require("Promise"),b=require("./oauth"),c=require("config");var d=function(a){var b;b=this.list.filter(function(b){return a?true:!b.data.external});b=b.map(function(a){return a.name});return b};exports.load=function(){return new a(function(a,b){$.ajax({url:c.get("urls").portalOrigin+"/Domains",data:{v2:1,extra:1},dataType:"jsonp",cache:false}).then(function(b){var c=[],e;for(e in b.Domains){c.push({name:e,data:b.Domains[e]})}c=c.sort(function(a,b){return a.data.priority-b.data.priority});exports.list=c;exports.getDomainsNames=d;a(c)},b)})}});define("modules/providers",["require","exports","module","mrg-i18n-utils","modules/domains","modules/oauth"],function(require,exports){"use strict";var i18n=require("mrg-i18n-utils"),a=require("modules/domains"),b=require("modules/oauth");var c=[{name:"mail.ru",domains:[]},{name:"yandex.ru",domains:[]},{name:"gmail.com",domains:[]},{name:"yahoo.com",domains:[]},{name:"other",domains:[],text:i18n("Другой")}];var d=function(a,b){var e=c.length,f,b=b!==undefined?b:true,g;if(!b){return d("mail.ru")}g=c.filter(function(b){return b.name==a})[0];return g||d("other")};var e=function(a){var b=c.filter(function(b){return b.domains.indexOf(a)>-1})[0];return b?b.name:"other"};var f=function(a){return d(a).domains};exports.load=function(){return new Promise(function(b,g){a.list.forEach(function(a){var b=d(a.name,a.data.external);b.domains.push(a.name)});exports.list=c;exports.getProvider=e;exports.getDomains=f;b(c)})}});define("blocks/b-email/b-email",["require","toolkit/b-email/b-email","toolkit/b-toolkit/b-toolkit","modules/domains","modules/providers","config"],function(require){"use strict";var a=require("toolkit/b-email/b-email"),b=require("toolkit/b-toolkit/b-toolkit"),c=require("modules/domains"),d=require("modules/providers"),e=require("config");b["b-email"]=a.extend({init:function(){this.extendData({domains:c.getDomainsNames(e.get("allow_external"))});this.render(true);a.prototype.init.call(this)},selectDomain:function(a){var b=d.getDomains(a)[0];this.setDomain(b)}});return b["b-email"]});define("toolkit/b-captcha/b-captcha",["toolkit/b-toolkit/b-toolkit","toolkit/b-input/b-input"],function(a){"use strict";return a.create("b-captcha",{refresh:function(a){var b=this.$el.find(".js-captcha-img"),c=b.attr("src"),d=(new Date).getTime();b.attr("src",c.replace(/\?(.*)/,"?"+d));this.$input=this.$el.find('[data-bem="b-input"]');this.$input.val("");this.emit("reload");if(a){a.preventDefault()}},deferredInit:true,init:function(){this.$el.bind("refresh",this.refresh.bind(this)).delegate(".js-captcha-reload","tap",this.refresh.bind(this));this.$input=this.$el.find('[data-bem="b-input"]');this.input=this.$input.getBlock();this.input.on("change",function(){this.emit("change")}.bind(this))},getValue:function(){return this.$input.val()},validate:function(a){return a(this.$input,this.$input.val())},showError:function(a){var b=this._getError(a);if(b){this.$(".b-captcha__error-msg").html(b.text||"")}this.toggleMod("invalid",true)},toggleMod:function(b,c){a["b-toolkit"].fn.toggleMod.call(this,b,c);this.input.toggleMod(b,c)},hideError:function(){this.$(".b-captcha__error-msg").html("");this.toggleMod("invalid",false)},_getError:function(a){var b=null;var c=this.getData().errors||[];c.forEach(function(c){if(b)return;if(c.type===a){b=c}});return b}})});define("mrg-mega-blocks/b-captcha/b-captcha",["toolkit/b-captcha/b-captcha"],function(a){"use strict";return a.extend("b-captcha",{})});define("blocks/b-input-btn/b-input-btn",["require","toolkit/b-toolkit/b-toolkit"],function(require){"use strict";var a=require("toolkit/b-toolkit/b-toolkit");return a.create("b-input-btn",{init:function(){this.$input=this.$(".b-input");this.input=this.$input.getBlock();this.input.on("change",function(a,b){this.emit("change",b)}.bind(this))},getValue:function(){return this.$input.val()},setValue:function(a){this.$input.val(a)},focus:function(){var a=this.getValue(),b=a.length;this.$input.focus();this.$input.get(0).setSelectionRange(b,b)},onRender:function(){},validate:function(a){return a(this.$input,this.$input.val())}})});define("toolkit/b-segment-input/b-segment-input",["toolkit/b-toolkit/b-toolkit","toolkit/b-input/b-input"],function(a){"use strict";return a.create("b-segment-input",{init:function(){var a=this.getData();this._maskSymbol=a.maskSymbol||"*";this._initElems()},deferredInit:true,onRender:function(){this._initElems()},_initElems:function(){this.$hiddenInput=this.$el.find(".b-segment-input__hidden");this.$input=this.$el.find(".b-input");this.$input.on("input change",this._onInputChange.bind(this));this.$input.on("tap",this._onClick.bind(this));this.$input.on("focus",function(){this.emit("focus")}.bind(this));if(!this.$hiddenInput.attr("name")){this.$hiddenInput.attr("name",this.uniqid+"_address")}this._updateValue()},toggleEdit:function(a){this.toggleMod("editable",a)},getValue:function(){return this.$hiddenInput.val()},isFullyFilled:function(){var a=this.getValue();var b=this._getEffectiveSymbols(this.getMask(),true);return b.length===a.length},getMask:function(){var a="";try{a=this.getData().props.text}catch(b){}return a},getMaskSymbol:function(){return this._maskSymbol},getFormatedValue:function(){return this._formatedValue},_onClick:function(a){a.preventDefault()},_getEffectiveSymbols:function(a,b){var c=this.getMaskSymbol();var d=c==="*"?"":"\\*";var e=b?"\\"+c:"";return a.replace(new RegExp("[^\\d"+d+e+"]","g"),"")},_onInputChange:function(){this.emit("change");this._updateValue()},_updateValue:function(){var a;var b=this.getMask();if(b){var c=this.getMaskSymbol();a=b;var d=this.$input.val().slice(0,this._getNeededSymbols()).split("");d.forEach(function(b){a=a.replace(c,b)});this._formatedValue=a;a=this._getEffectiveSymbols(a)}else{this._formatedValue="";a=""}this.$hiddenInput.val(a)},_getNeededSymbols:function(){var a=this.getMask();var b=a.replace(new RegExp("[^"+this.getMaskSymbol()+"]","g"),"");return b.length}})});define("inherit",[],function(){function a(a,b){if(typeof a==="function"){a.parent=b}return a}function b(c,d){if(arguments.length===1){d=c;c=d.constructor;c.fn=c.prototype=d;return b.apply(c)}var e,f=a(d.hasOwnProperty("constructor")?d.constructor:function(a,b,d){var e;switch(arguments.length){case 1:e=c.call(this,a);break;case 2:e=c.call(this,a,b);break;case 3:e=c.call(this,a,b,d);break;default:e=c.apply(this,arguments);break}if(e!==void 0){return e}},c);for(e in c){if(c.hasOwnProperty(e)){f[e]=c[e]}}f.prototype=function(){var a=function(){};a.prototype=c.fn;return new a}();f.fn=f.prototype;for(e in d){f.fn[e]=a(d[e],f.fn[e])}f.fn.constructor=f;return b.apply(f)}b.apply=function(a){a.extend=a.extend||function(a){return b(this,a)};return a};return b});(function(){"use strict";function a(b,c){if(b===c){return false}var d=typeof c;if(d==="string"||d==="number"||d==="boolean"||b===null&&c!==null||b!==null&&c===null){return b!=c}var e,f=typeof b;if(f===d){if(c instanceof Array){e=c.length;while(e--){if(a(b[e],c[e])){return true}}}else if(c instanceof Object){for(e in c){if(a(b[e],c[e])){return true}}}}return false}function b(b,c){var d;if(typeof b==="function"){d=c?function(a,d,e){return b.call(c,a,d,e)}:b}else{var e=Object.keys(b),f=e[0],g=e.length,h=b[f];if(g===1){d=f.indexOf(".")===-1?function(b){return!a(b[f],h)}:function(b,c){return!a(c.get(f),h)}}else{d=function(c,d){var h=g;while(h--){f=e[h];if(a(f.indexOf(".")===-1?c[f]:d.get(f),b[f])){return false}}return true}}d.keys=e;d.isWhere=true}return d}function c(a,c,d){if(!a){return[]}var e=[],f=0,g=a.length;if(g>0){c=b(c,d);for(;f<g;f++){if(c(a[f],f,a)){e.push(a[f])}}}else if(a instanceof Object){c=b(c,d);for(f in a){if(a.hasOwnProperty(f)&&c(a[f],f,a)){e.push(a[f])}}}return e}c.version="0.1.4";c.notEqual=a;c.createIterator=b;if(typeof define==="function"&&(define.amd||define.ajs)){define("filter",[],function(){return c})}else if(typeof module!="undefined"&&typeof module.exports!="undefined"){module.exports=c}else{window["filter"]=c}})();define("Model.List",["utils/util","filter","inherit","RPC","Emitter"],function(a,b,c,d,e){"use strict";var f=[],g=f.push,h=f.join,i=f.sort,j=f.slice,k=f.splice,l=f.indexOf,m=f.some,n=f.every,o=f.reduce,p="sync change remove destroy",q=JSON.stringify,r=function(a,b,c,d){var e=a.get(c),f=b.get(c),g=e-f;if(g!==g){if(e&&e.localeCompare){g=e.localeCompare(f)}else{g=e==f?0:e>f?1:-1}}return g*(d?-1:1)};function s(b,c){this._index={};this._safedStore={};this.length=0;this._debounceTriggerUpdate=a.debounce(function(){this.trigger("update",this)},0);if(b instanceof Array||b instanceof s){this.set(b,true)}else if(c){this.on=this._lazyOn;this.get=this._lazyGet}}s.fn=s.prototype={constructor:s,comparator:null,Model:null,length:0,local:false,_indexes:null,_lazyOn:function(a,b){var c=e.fn.on,d=this.length;this.on=c;while(d--){this[d].on(p,this)}return c.call(this,a,b)},_lazyGet:function(a){var b=s.fn.get,c=this.length,d,e=this._index;this.get=b;while(c--){d=this[c];e[d.id]=e[d.cid]=d;this._addToIndex!==void 0&&this._addToIndex(d)}return b.call(this,a)},_prepareModel:function(a){var b=this.Model,c=a,d=b.all,e;if(!(a instanceof b)){e=a.cid||a[b.fn.idAttr];c=this.get(e)||!this.local&&d.get(e);if(!c){c=new b(a);!this.local&&d.set([c])}else{c.set(a)}}return c},handleEvent:function(a,b){var c=a.type;if(c==="remove"||c==="destroy"){this.remove(b)}else{b.id!==null&&(this._index[b.id]=b);a.list=this;this.trigger(a,b)}this._changed=c==="change";if(this._changing!==true){this._debounceTriggerUpdate()}},each:function(a,b){for(var c=0,d=this.length;c<d;c++){a.call(b,this[c],c,this)}return this},map:function(a,b){var c=[];for(var d=0,e=this.length;d<e;d++){c.push(a.call(b,this[d],d,this))}return c},some:function(a,b){return m.call(this,a,b||this)},every:function(a,b){return n.call(this,a,b||this)},reduce:function(a,b){return o.apply(this,arguments)},sum:function(a){var b=0;this.each(function(c){b+=c.get(a)});return b},avg:function(a){return this.sum(a)/this.length},filter:function(a,c,d){var e=new this.constructor(null,true),f=0,g=this.length,h,i=0,j;a=b.createIterator(a,c);j=a.isWhere;for(;f<g;f++){h=this[f];if(j===true){if(a(h.attributes,h)){e[i++]=h}}else if(a(h,f,this)){e[i++]=h}if(i===1&&d){return e[0]}}if(d){return}e.length=i;return e},first:function(){return this[0]},last:function(){return this[this.length-1]},find:function(a,b){return this.filter(a,b,true)},pluck:function(a){return this.map(function(b){return b.get(a)})},contains:function(a){return!!this.get(a)},indexOf:function(a){if(!(a instanceof Object)){a={id:a,cid:a}}var b=this.length,c;while(b--){c=this[b];if(c.id===a.id||c.cid===a.cid){return b}}return-1},sort:function(a,b){if(!a){a=this.comparator||this.Model.fn.idAttr}var c=this,d=typeof a,e,f,g;if(b){f=b===true||b.silent;g=b.reverse;if(b.clone){c=c.clone()}}if(d==="string"){e=function(b,c){return r(b,c,a,g)}}else if(d==="object"){var h=Object.keys(a),j=h.length;e=function(b,c){var d=0,e=0;for(;d<j;d++){e=r(b,c,h[d],a[h[d]]^g);if(e!==0){return e}}return e}}else{e=function(b,c){return a.call(this,b,c)*(g?-1:1)}}i.call(c,e);!f&&c.trigger("sort",c);return c},eq:function(a){return this[a]},get:function(a){return a==null?void 0:this._index[a.cid||a[this.Model.fn.idAttr]||a]},getSafe:function(a){var b=this.get(a);var c=this.Model.all._safedStore;if(b===void 0){a=a&&(a[this.Model.fn.idAttr]||a);b=c[a];if(b===void 0){b=new this.Model({id:a});c[a]=b}}return b},create:function(a,b){var c=this._prepareModel(a);this.set([c],b);return c},set:function(a,b){var c,d,f=new e.Event("add"),g,h,i,j=this._index,l=this.length,m=false,n=true,o=false,q=false,r=false,s=!!this.comparator,t=false;a=a&&a.slice?a.slice():[];if(b){m=b.clone;n=b.merge!==false;o=b.reset;q=b.silent||b===true;if(b.sort!==void 0){s=b.sort}}if(o){i=k.call(this,0,l);c=l;o=l>0||a.length>0;r=o;while(c--){i[c].off(p,this)}l=0;j=this._index={}}for(c=0,d=a.length;c<d;c++){this._changed=false;this._changing=true;h=this._prepareModel(a[c]);g=h.cid;a[c]=h;r=r||this._changed;if(j[g]===void 0){j[g]=h;h.id!==null&&(j[h.id]=h);this._addToIndex!==void 0&&this._addToIndex(h);this[l]=h;this.length=++l;h.on(p,this);if(!q){r=true;f.list=this;f.target=h;this.trigger(f,h)}}if(s==="preset"&&this[c]!==h){t=true;this[this.indexOf(h)]=this[c];this[c]=h}}if(n===false){c=l;while(c--){if(a.indexOf(this[c])===-1){r=true;this.remove(this[c])}}}if(r&&s===true&&!t){t=true;this.sort(null,{silent:true})}this._changing=false;if(!q){t&&this.trigger("sort",this);o&&this.trigger({type:"reset",models:this,previousModels:i},this);if(t||r){this._debounceTriggerUpdate.cancel();this.trigger("update",this)}}if(m){return new this.constructor(a)}return this},toArray:function(){return j.call(this)},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},slice:function(a,b){var c=a===void 0?this:j.call(this,a,b===void 0?this.length:b),d=c.length,e=new this.constructor(null,true);while(d--){e[d]=c[d]}e.length=c.length;return e},reset:function(a,b){b=b||{};if(b===true){b={silent:true}}b.reset=true;b.clone=false;return this.set(a,b)},remove:function(a){var b,c=l.call(this,a);if(c!==-1){a.off(p,this);k.call(this,c,1);delete this._index[a.id];delete this._index[a.cid];b=new e.Event("remove");b.list=this;b.target=a;this.trigger(b,a);if(this._changing!==true){this._debounceTriggerUpdate()}}return this},save:function(a,b,c){return d.batch(function(){this.each(function(d){d.save(a,b,c)})}.bind(this))},drop:function(a){return d.batch(function(){this.each(function(b){b.remove(a)})}.bind(this))},destroy:function(){var a=this.length;while(a--){this[a]&&this[a].destroy()}return this},fetch:function(a,b){b=b||{};var c=this,d=c.Model,e=d.all,f=d.fetchData(a,null,b.force).then(function(a){!c.local&&e.set(a);c[b.reset?"reset":"set"](a,b);return c}).fail(function(a){c.emit("error",a)});f.list=c;return f},clone:function(){return this.slice()}};s.fn.forEach=s.fn.each;s.fn.where=s.fn.filter;s.fn.findWhere=s.fn.find;e.apply(s.fn);c.apply(s);s.addIndex=function(a,b){var c=this.fn._indexes;if(!c){c=this.fn._indexes=[]}c.push({attr:a,uniq:b});this.fn._addToIndex=Function("model",c.map(function(a){var b=q(a.attr),c=b.indexOf(".")>-1?"model.get("+b+")":"model.attributes["+b+"]";if(a.uniq){return"this._index["+c+"] = model;"}else{throw"todo: Нужно думать"}}).join("\n"))};s.pluck=function(a,b){return s.fn.pluck.call(a,b)};s.version="0.12.0";return s});define("Model",["inherit","logger","request","Promise","Emitter","Model.List","config"],function(a,b,c,d,e,f,g){"use strict";var h=e.Event;var i={}.toString;var j=JSON.stringify;var k=function(a){return a===null?"null":i.call(a).toLowerCase().slice(8,-1)};var l=function(a,b,c,d,e,f){var g=b.lastIndexOf("."),h=a.attributes,i=a._attributes,j=h[c];if(g!==-1){c=b.substr(g+1);j=a.get(b)}if(a.nested[b]!==void 0){a.get(b).set(d,{reset:true})}else if(a.scheme[b]==="set"){for(var k in d){l(a,b+"."+k,k,d[k],e,f)}}else if(p(j,d)){if(b!==c){var m=b.split("."),n=m.length,o=0,q=n-1,r,s;for(;o<q;o++){r=m[o];if(h[r]===void 0){h[r]={}}if(i[r]===void 0){i[r]={}}if(e[r]===void 0){e[r]={}}h=h[r];i=i[r];e=e[r];if(h.set!==void 0){h.set(m.slice(o+1).join("."),d,{reset:true});return}s=s===void 0?r:s+"."+r;if(f.byKey[s]===void 0){f.byKey[s]=h;f.push(s)}}}i[c]=j;e[c]=d;h[c]=d;f.push(b);f.byKey[b]=d}};function m(a,b,c){var d=a.length;while(d--){var e=a[d];var f=e.attr;b.push(f);b.byKey[f]=e.changes;if(f.indexOf(".")>-1){var g=f.split(".");var h=g.length-1;var i=c;for(var j=0;j<h;j++){if(i[g[j]]===void 0){i=i[g[j]]={}}else{i=i[g[j]]}}i[g[h]]=e.changed}else{c[f]=e.changed}var k=e.changes;for(var l=0,m=k.length;l<m;l++){var n=f+"."+k[l];b.push(n);b.byKey[n]=k.byKey[k[l]]}}}var n=1;function o(a,b){var c,d,e=a;if(b!==true&&a instanceof Array){c=a.length;e=[];while(c--){e[c]=o(a[c])}}else if(b===true||a instanceof Object){if(a.toJSON!==void 0){e=a.toJSON()}else{e={};for(d in a){e[d]=o(a[d])}}}return e}function p(a,b){if(a===b){return false}var c=typeof b;if(c==="string"||c==="number"||c==="boolean"){return a!=b}var d,e=typeof a;if(e===c){if(a===null){return true}if(b instanceof Array){d=b.length;if(a.length!==d){return true}while(d--){if(p(a[d],b[d])){return true}}}else if(b instanceof Object){var f,g=Object.keys(b);d=g.length;if(Object.keys(a).length!==d){return true}while(d--){f=g[d];if(p(a[f],b[f])){return true}}}return false}return true}function q(a,b){var c=function(a){var b=this.$,c=this.scheme,d=this.nested,e=b[a=this.shortcuts[a]||a],f,g;if(e===void 0&&a.indexOf(".")!==-1){a=a.split(".");f=a[0];g=a.length;if(d[f]!==void 0){e=b[f];if(c[f]==="model.list"){e=g===2?e[a[1]]:e[a[1]].get(a.slice(2).join("."))}else{e=e.get(g===2?a[1]:a.slice(1).join("."))}}else if(g===2){e=b[f]&&b[f][a[1]]}else{for(var h=0,i=g-1;h<i;h++){f=a[h];b=b[f];if(b==null){return}else if(b.get!==void 0){if(b.Model!==void 0){e=b[a[h+1]];if(h+2<=i){e=e.get(a.slice(h+2).join("."))}return e}else{return b.get(a.slice(h+1).join("."))}}}e=b[a[i]]}}return e}.toString();if(b){c=c.replace(/(return)\s+(.+,\s*)?(\w+)/g,function(a,b,c,d){return b+(c||"")+"!!"+d}).replace(/(return)(.*?)(;|})/,function(a,b,c,d){return b+(c?c+",":"")+" false"+d})}return Function("return "+c.replace("this.$","this."+a))()}function r(a,b,c,d){var e=c.length;var f=new h(a);f.target=b;f.changes=c;f.allChanged=d;while(e--){var g=c[e];f.attr=g;f.type=a+":"+g;f.changed=c.byKey[g];b.emit(f.type,[f,b])}f.type=a;f.attr=void 0;f.changed=d;b.emit(f.type,[f,b])}function s(a){var b,c=this.valueValidator,d,e=this.attributes={},f=this.defaults;
this.cid="c"+n++;this.changed={};this._attributes={};if(a){for(b in a){d=a[b];if(c!==null){d=c(d,b,a,this)}e[b]=d}}for(b in f){if(e[b]===void 0){d=f[b];if(d!==null&&typeof d==="object"){d=o(d)}e[b]=d}}if(e[this.idAttr]!==void 0){this.id=e[this.idAttr]}if(this._activateNested!==void 0){this._activateNested(e)}if(this._updateGetters!==void 0){this._updateGetters(e,e)}}s.fn=s.prototype={constructor:s,className:"Model",cid:null,id:null,idAttr:"id",nested:{},scheme:{},defaults:{},getters:false,triggers:{},valueValidator:null,changed:{},_attributes:{},shortcuts:{},request:c,storage:null,url:"",findUrl:"",findOneUrl:"",addUrl:"",saveUrl:"",removeUrl:"",_changing:false,is:q("attributes",true),get:q("attributes"),previous:q("_attributes"),_callTrigger:function(a,b){var c=this.triggers[a];c&&c.call(this,b)},_nestedHandleEvent:function(a,b){var c=b.type;var d=b.changed||b.target;var e=b.changes;if(c==="update"){c="change"}if(e===void 0){e=[a];e.byKey={};e.byKey[a]=d}if(this._changing&&c==="change"){if(this._nestedChanges===void 0){this._nestedChanges=[]}this._nestedChanges.push({attr:a,changed:d,changes:e})}else if(c==="add"||c==="remove"){var f=new h({type:c+":"+a,attr:a,list:b.list,target:b.target});this.emit(f.type,[f,this])}else{var g={};var i=[];i.byKey={};m([{attr:a,changed:d,changes:e}],i,g);r(c,this,i,g)}},set:function(a,b,c){var d,e=[],f,g=this.changed,h=this.valueValidator;e.byKey={};this._changing=true;if(typeof a==="object"){d=a;c=c||b}else{(d={})[a]=b}if(c instanceof Object){f=c.silent;if(c.clean){g={}}}else{f=c===true}if(d[this.idAttr]!==void 0){this.id=d[this.idAttr]}for(a in d){b=d[a];a=this.shortcuts[a]||a;if(h!==null){b=h(b,a,d,this)}l(this,a,a,b,g,e)}if(this._nestedChanges!==void 0){m(this._nestedChanges,e,g)}if(this._updateGetters!==void 0&&e.length>0){this._updateGetters(g,d)}if(e.length>0&&!f){r("change",this,e,g)}this._changing=false;this._nestedChanges=void 0;return this},increment:function(a,b,c){if(arguments.length==1||b instanceof Object){c=b;b=1}b=parseInt(b,10);return Number.isNaN(b)?this:this.set(a,this.get(a)+b,c)},toJSON:function(a){var b=this.attributes;return a?b:o(b,true)},isNew:function(){return this.id===null},queue:function(a){var c=b.meta(-2),e=this,f=function(){if(e.removed){var b=new Error("MODEL_REMOVED");b.model=e;return d.reject(b)}return a(e,c)};if(!this._queue){this._queue=new d(function(a){a()})}this._queue=this._queue.then(f,f);return this._queue},isDataFully:function(){return true},hasChanged:function(a){if(a){return this.changed[a]}for(var b in this.changed){if(this.changed.hasOwnProperty(b)){return true}}return this.isNew()},fetch:function(a){a=a||{};a[this.idAttr]=this.id;return this.constructor.findOne(a)},parse:function(a,b){return a},prepareSendData:function(a,b){return b},save:function t(a,b,c){if(a){this.set(a,b,c)}return this.queue(function(a,b){if(a.hasChanged()){var c=a.isNew(),d=a[c?"attributes":"changed"],e=a.addUrl&&c?"add":"save",f=a.constructor.url(e,a.attributes),g=a.changed;a._callTrigger(c?"beforeadd":"beforeupdate",d);a._callTrigger("beforesave",d);if(!c){d[a.idAttr]=a.id}d=a.prepareSendData(e,d);a.changed={};a.storage&&a.storage.update(a.toJSON());return a.request.post(f,d,{logger:a.className+".save",loggerMeta:b}).then(function(b){var e=a.parse(b.body,b);e&&a.set(e,{clean:true});a.constructor.all.set([a]);a.trigger("sync",a);a._callTrigger(c?"add":"update",d);a._callTrigger("save",d);return a}).fail(function(){a.changed=g})}else{return a}})},remove:function u(a){return this.queue(function(b,c){a=a||{};a[b.idAttr]=b.id;a=b.prepareSendData("remove",a);b._callTrigger("beforeremove",a);return b.request.call(b.constructor.url("remove",b),a,{logger:b.className+".remove",loggerMeta:c,type:"DELETE"}).done(function(){b.removed=true;b.trigger({type:"remove",model:b},b);b.destroy();b._callTrigger("remove",a)})})},destroy:function(){var a=this;if(!a.destroyed){a.destroyed=true;a.storage&&a.storage.remove(a.id);a.trigger({type:"destroy",model:a},a);a.off();a._deactivateNested!==void 0&&a._deactivateNested(this.attributes)}},meta:function(a,b){var c=this._meta,d=arguments.length;if(c===void 0||a===null){this._meta=c=g({})}if(d===0){return c}else if(d===2){c.set(a,b)}else if(d===1){if(typeof a==="object"){c.set(a)}else{return c.get(a)}}return this},expire:function(){this.expired=true;return this}};s.extend=function(b){var c=a(this,b),d=c.fn,e=d.scheme={},g=d.nested={},h=d.defaults,i=d.getters;c.List=c.List.extend({Model:c});c.all=new c.List;c.all.local=true;if(h){(function o(a,b){var c=Object.keys(a);if(c.length){b=b?b+".":"";c.forEach(function(c){var d=a[c];c=b+c;if(d instanceof Object){if(d instanceof s){g[c]=d.constructor;e[c]="model"}else if(d instanceof f){g[c]=d.constructor;e[c]="model.list"}else{e[c]="set";o(d,c)}}else{e[c]=k(d)}})}else{e[b]=k(a)}})(h)}var l=Object.keys(g);if(l.length){var m=[];var n=[];l.forEach(function(a){var b='attrs["'+a.replace(/\./g,'"]["')+'"]';var c=(e[a]==="model"?"change":"update")+" add remove destroy reset";m.push("var _this = this;",'var Class = this.nested["'+a+'"];','var isList = this.scheme["'+a+'"] == "model.list";','var callback = this["_nested:'+a+'"] = function (evt) {','  _this._nestedHandleEvent("'+a+'", evt);',"};",b+" = (Class.map ? Class.map("+b+") : new Class("+b+')).on("'+c+'", callback);');n.push(b+'.off("'+c+'", this["_nested:'+a+'"]);')},this);d._activateNested=Function("attrs",m.join("\n"));d._deactivateNested=Function("attrs",n.join("\n"))}else{d._activateNested=void 0;d._deactivateNested=void 0}if(i){if(i===true){i={};Object.keys(h).forEach(function(a){i[a]=null})}d._updateGetters=Function(Object.keys(i).map(function(a,b){b=i[a];if(d.hasOwnProperty(a)){throw"Unable to create a getter `"+a+"`, this key is already in use"}else if(typeof b==="function"){d["__getter__"+a]=b;b="this.__getter__"+a+"()"}else if(typeof d[b]==="function"){b="this."+b+"()"}else if(b===null||typeof b==="string"){b="this.get("+j(b||a)+")"}return"this."+a+" = "+b}).join("\n"))}return c};s.List=f;s.List.fn.Model=s;s.all=new f;s.all.local=true;s.set=function(a,b){return this.all.set(a,b)};s.get=function(a){return this.all.get(a)};s.getSafe=function(a){return this.all.getSafe(a)};s.mock=function(a){for(var b in a){var c,d=[].concat(a[b]),e=0,f=d.length,g;for(;e<f;e++){c=this.url(b,d[e].query||{});g=b=="add"?new this(d[e].query).toJSON():d[e].query;this.fn.request.mock({url:c,once:d[e].once,type:/^find/.test(b)?"GET":/remove/.test(b)&&!this.fn.request.setup("emulateHTTP")?"DELETE":"POST",data:/^(add|save|remove)$/.test(b)?this.fn.prepareSendData(b,g):g,status:d[e].status,body:d[e].body,responseText:d[e].result})}}};s.url=function(a,b){var c=this.fn[a+"Url"]||this.fn.url;if(typeof c==="function"){c=c(b)}return String(c).replace(/:([a-z_]+)/g,function(a,c){return b[c]||""}).replace(/([^$\/])\/+/g,"$1/")};s.fetchData=function(a,c,d){var e=b.meta(-2),f=this,g=f.fn.storage,h=c?"findOne":"find",i,j=function(){var b=f.url(h,a);return f.fn.request.get(b,a,{logger:f.fn.className+"."+h,loggerMeta:e,dataType:"json"}).then(function(b){var c=f.fn.parse(b.body,b);g&&g.save(h,a,c);return c})};a=a||{};if(g&&!d){i=b.wrap("[["+f.fn.className+".storage."+h+"]]",a,g[h](a))["catch"](j)}else{i=j()}i.__logger__&&(i.__logger__.meta=e);i.__noLog=true;return i};s.find=function v(a,b){return(new this.List).fetch(a,b)};s.findOne=function w(a){var b=this,c=b.fn.idAttr,e=!!(b.fn.findOneUrl||b.fn.url),f,g,h,i;if(a!=null&&!(a instanceof Object)){g=a;(a={})[c]=g}else{a=a||{}}g=a[c];i=j(a);f=b.all.get(g);if(f&&!f.expired&&f.isDataFully(a)){h=d.resolve(f)}else{h=this.fetchData(e?a:{},e).then(function(h){var i;if(!e||g==null){h=g==null?h instanceof Array?h[0]:h:h.filter(function(a){return a[c]==g})[0]}if(h){f=b.all.getSafe(h[c]);f.expired=false;f.set(h,{clean:true,query:a});b.all.set([f]);return f}else{return d.reject(new Error("MODEL_NOT_FOUND"))}})}return h};s.save=function(a){var b=new this(a);return b.save()};s.map=function(a){var b=this.all.set([].concat(a),{clone:true});return a instanceof Array?b:b[0]};s.observe=function(a,b,c){if(!c){if(b instanceof Function){c=b}b=this.all}if(!(b instanceof Array||b instanceof f)){b=[b]}a=a||"log";var d=function(b,d){d.forEach(function(c){var d=c.name,e=b===""?this[d]:this.get((b.indexOf(".")>0?b.substr(b.indexOf(".")+1)+".":"")+d);console[a](this.className+"("+this.id+")"+(b?"."+b:"")+".{"+d+"} is "+(c.type==="add"?"added":"updated")+": {"+c.oldValue+"} → {"+e+"}")},this);c&&c(this,a,type,d);if(a==="error"){debugger}};b.forEach(function(a){Object.observe(a,d.bind(a,""));(function b(c,e){if(e instanceof Object&&!e.set){Object.observe(e,d.bind(a,c.join(".")));Object.keys(e).forEach(function(a){b(c.concat(a),e[a])})}})(["attributes"],a.attributes)})};e.apply(s.fn);s.version="0.11.0";return s});define("Action",["logger","inherit","Promise","Emitter","Model","Model.List"],function(a,b,c,d,e,f){"use strict";var g=function(a){var b,c=a;if(a&&typeof a==="object"){if(a.toLogJSON){c=a.toLogJSON()}else if(a instanceof e){c=a.id}else if(a instanceof f){c=a.pluck("id")}else if(Array.isArray(a)){b=a.length;c=[];while(b--){c[b]=g(a[b])}}else{c={};Object.keys(a).forEach(function(b){c[b]=g(a[b])})}}return c};var h=b(d,{name:"abstract",constructor:function(a,b){this.params=a;this.options=b;this._data;this.pending=false;this.status;this.error=null;this.result=null;return b.logScope.call(this._execute.bind(this))},_execute:function(){var a=this,b=a.params,d=a.options,e=d.logScope;a.pending=true;!d.silent&&h.trigger("start",[a,b,d]);return new c(function(c){c(a.prepare(b,d))}.logger(a.name+".prepare")).then(function(f){if(f===null){e.add("operation:exit");a._resolve("done",f);return a}if(f===void 0){f=b}a._data=f;return new c(function(c){a.trigger("operation",[f,b,d]);c(a.operation(f,b,d))}.logger(a.name+".operation")).then(function(b){e.add("operation:done");a._resolve("done",b);return a},function(b){e.add("operation:fail",b);a.rollback();a._resolve("fail",b);return c.reject(a)})},function(b){e.add("prepare:fail",b);a._resolve("fail",b);return c.reject(a)})},undo:function(){var b=this,d=[b._data,b.params,b.options],e=b._undoPromise,f;if(!e){f=a.scope("[["+b.name+".undo]]");b._undoPromise=e=new c(f.wrap(function(a){b.trigger.apply(b,["undo"].concat(d));!b.options.silent&&h.trigger.apply(b,["undo",b].concat(d));a(b.undoOperation.apply(b,d))}));e.then(b._resolveUndo.bind(b,f,true),b._resolveUndo.bind(b,f,false))}return e},prepare:function(a,b){},operation:function(a,b,c){},undoOperation:function(b,c,d){a.add("NOT_IMPLEMENTED");throw"NOT_IMPLEMENTED"},rollbackOperation:function(b,c,d){a.add("NOT_IMPLEMENTED")},rollback:function(){var b=this,c=b.options;c.logScope.call("[["+b.name+".rollback]]",function(){try{b.rollbackOperation(b._data,b.params,c)}catch(d){a.add("error",d)}})},_resolve:function(a,b){this.pending=false;this.status=a;this[a=="done"?"result":"error"]=b;this.trigger(a,b);this.trigger("complete",[this,a,b]);if(!this.options.silent){h.trigger(a,[this,b]);h.trigger("complete",[this,a,b])}},_resolveUndo:function(a,b,c){var d=[this,b,c];a.add("undo:"+(b?"done":"fail"),b?void 0:c);this.trigger("undo:complete",d);!this.options.silent&&h.trigger("undo:complete",d)},emit:function(a,b){var c=this.options;if(c["on"+a]){c["on"+a].apply(this,b)}return d.fn.emit.apply(this,arguments)}});d.apply(h);h.register=function(a,b){this[a]=b;b.prototype.name=a;b.execute=function(b,c){return h.execute(a,b,c)};return b};h.execute=function(b,d,e){var f=this[b],h=a.scope("[[Action:"+b+"]]",g(d)),i="ACTION_NOT_FOUND:"+b;if(!f){h.add(i)}e=e||{};e.logScope=h;return f?new f(d,e):c.reject(i)};h.waitFor=function i(a,b){var e=new d.Event(a),f;h.trigger(e,[].concat(this,b));if(e.result!=null){if(e.result.then){f=e.result}else{f=c.cast(e.result)}}else{f=c.reject()}return f};h.version="0.2.0";return h});define("mail/actions/PasswordRecovery",["require","Action","Promise","RPC","utils/util"],function(require){"use strict";var a=require("Action"),b=require("Promise"),c=require("RPC"),d=require("utils/util");var e=a.extend({regToken:{target:"user/password/restore",format:"default"},urls:{options:"user/password/restore",send:"tokens/send",check:"tokens/check",changePassword:"user/password/restore/confirm"},required:{getOptions:["email"],sendToken:["by","token"],checkToken:["by","token","value"],changePassword:["restoreToken","password"]},_processResponse:function(a){return a.body},_getOptions:function(a){return c.call(this.urls.options,{email:a.email}).then(this._processResponse.bind(this))},_sendToken:function(a){var b=this.regToken;b.transport=a.by;b.id=a.token;b.address=a.address;b.index=a.index;return c.call(this.urls.send,{email:a.email,capcha:a.captcha,reg_token:JSON.stringify(b)}).then(this._processResponse.bind(this))},_checkToken:function(a){var b=this.regToken;b.transport=a.by;b.id=a.token;b.value=a.value;if(a.captcha){b.captcha=a.captcha}return c.call(this.urls.check,{email:a.email,reg_token:JSON.stringify(b)}).then(this._processResponse.bind(this))},_changePassword:function(a){var b={email:a.email,reg_token_check:a.restoreToken,password:a.password};if(a.redirectUri){b.redirect_uri=a.redirectUri}return c.call(this.urls.changePassword,b).then(this._processResponse.bind(this))},_validate:function(a){var b={},c=JSON.parse(JSON.stringify(this.required[a.method]))||[];c=c.filter(function(b){return!a.hasOwnProperty(b)});if(!c.length){return null}c.forEach(function(a){b[a]="required"});return b},operation:function f(a){var c,d;if(!a.method){return b.reject({method:"required"})}d=this["_"+a.method];if(typeof d!=="function"){return b.reject({method:"invalid"})}c=this._validate(a);if(c){return b.reject(c)}return d.call(this,a)}});e.methods={OPTIONS:"getOptions",SEND:"sendToken",CHECK:"checkToken",CHANGE_PASSWORD:"changePassword"};e.transports={PHONE:"phone"};a.register("mail.PasswordRecovery",e);e.version="0.2.1";return e});define("blocks/b-phone-btn/b-phone-btn",["require","toolkit/b-toolkit/b-toolkit","RPC","Promise","mail/actions/PasswordRecovery"],function(require){"use strict";var a=require("toolkit/b-toolkit/b-toolkit");var b=require("RPC");var c=require("Promise");var d=require("mail/actions/PasswordRecovery");return a.create("b-phone-btn",{init:function(){this.input=this.$("b-input").getBlock()},onRender:function(){}})});define("toolkit/b-controls-group/b-controls-group",["toolkit/b-toolkit/b-toolkit","toolkit/b-dropdown/b-dropdown"],function(a){"use strict";var b='input[type="text"][data-name],'+'input[type="number"][data-name],'+'input[type="password"][data-name],'+"textarea[data-name]";return a.create("b-controls-group",{service:true,init:function(){this._iCtrlEvents();this._initDropdowns()},setElement:function(b){if(this.$el){this.$el.off("."+this.uniqId);$(document).unbind("."+this.uniqid)}a["b-toolkit"].fn.setElement.call(this,b);this._iCtrlEvents();return this},_iCtrlEvents:function(){var a=this.uniqid+".ctrl.events";if(!this.$el.data(a)){this.$el.data(a,true).on("tap"+"."+this.uniqid,"[data-name]",this._emitUIEvent.bind(this)).on("mousedown"+"."+this.uniqid+" touchstart"+"."+this.uniqid,".b-dropdown",this._initDropdownData.bind(this)).on("mousedown"+"."+this.uniqid+" mouseup"+"."+this.uniqid,".b-toolbar__btn",this._mouseActions.bind(this));this.$el.on("keyup"+"."+this.uniqid+" change"+"."+this.uniqid,b,this._emitUIEvent.bind(this));$(document).unbind("."+this.uniqid,this._mouseActions.bind(this)).bind("mouseup"+"."+this.uniqid,this._mouseActions.bind(this))}},delegateEvents:function(){a["b-toolkit"].fn.delegateEvents.call(this);this._iCtrlEvents()},undelegateEvents:function(){a["b-toolkit"].fn.undelegateEvents.call(this);this.$el.data(this.uniqid+".ctrl.events",false)},_initDropdownData:function(a){var b=$(a.currentTarget),c=b.find(".b-dropdown__list");if(!c.is(":visible")){var d=b.attr("data-group");var e=this._getDropdownItems(d);if(Array.isArray(e)){c.fest(this.template,{block:"b-dropdown__list",group:d,items:e})}}},_mouseActions:function(b){if(b.button){return}var c,d=null,e=b.type=="mousedown",f,g=this;if("mousedown mouseup".indexOf(b.type)!==-1){if(b.currentTarget==document){if(this.__currentBtn){c=this.__currentBtn}}else{c=b.currentTarget}if(c){f=c.getAttribute("role");if(f=="menuitemradio"){if(b.type=="mouseup"){c=null}else{c=$(c);g=c.closest("[role=menubar],[role=menu]",this.$el);a.toggleMod(g.find(".b-toolbar__btn_active"),"active",false);c=c[0]}}else{if(!e&&c!==this.__currentBtn){a.toggleMod(this.__currentBtn,"active",false)}d=c}if(c&&!c.getAttribute("aria-disabled")){a.toggleMod(c,"active",e);g.__currentBtn=e&&d||null}}}},_getDropdownItems:function(a){},_getUIEvent:function(a){var b=$(a.currentTarget);var c=b.closest("[data-group]",this.el);var d=b.attr("data-id");var e=b.attr("data-name");if(!c.length){c=this.$el.filter("[data-group]")}return{el:b[0],$el:b,id:d||b.closest("[data-id]",this.el).attr("data-id"),name:e,group:c.attr("data-group"),disabled:b.is("[aria-disabled]")||c.is("[aria-disabled]"),event:a}},_emitUIEvent:function(a){var b=this._getUIEvent(a),c=(b.group||b.name||"no-name").replace(/_/g,"-");if(b.disabled){a.preventDefault()}else{if(b.$el){var d=b.$el.closest("a");if(!(d.attr("href")||d.attr("rel")=="history")){a.preventDefault()}}this.emit(c,b);if(b.group&&(b.name||b.id)){this.emit(c+":"+(b.name||b.id),b);if(b.name&&b.id){this.emit(c+":"+b.name+":"+b.id,b)}}}},_initDropdowns:function(){this.$el.find(".b-dropdown").each(function(b,c){new a["b-dropdown"]({el:c,scroll:this.scroll})}.bind(this))},render:function(b){a["b-toolkit"].fn.render.call(this,b);this._initDropdowns()},getItemElem:function(a){var b=this.$el;a=a.split(".");if(a[1]){b=b.find('[data-group="'+a.shift()+'"]')}b=b.find('[data-name="'+a[0]+'"]');if(!b[0]){b=this.$el.find('[data-group="'+a[0]+'"]')}return b},enable:function(){return this.setDisabledState(false)},disable:function(){return this.setDisabledState(true)},setDisabledState:function(b){this.$el&&this.$el.children().each(function(c,d){a.toggleMod($(d),"disabled",b)}.bind(this));return this},setMod:function(b,c,d){var e=this.getItemElem(b);a.toggleMod(e,c,d);return this},destroy:function(b){this.$el.off("."+this.uniqId);a["b-toolkit"].fn.destroy.apply(this,arguments);$(document).unbind("."+this.uniqid)}})});define("toolkit/b-tooltip/b-tooltip",["require","toolkit/b-toolkit/b-toolkit","toolkit/b-controls-group/b-controls-group"],function(require){"use strict";var a=require("toolkit/b-toolkit/b-toolkit");var b=require("toolkit/b-controls-group/b-controls-group");function c(a,b){return!(a.left<b.left||a.top<b.top||a.right>b.right||a.bottom>b.bottom)}return a.create("b-tooltip",{templateBlock:"b-tooltip",mods:["tc","lc","rc","bc"],offset:{x:10,y:10},_initControlsGroup:function(){if(this.controls){return}this.controls=new b({$el:this.$el});this.controls.on("close",this._onCloseClick.bind(this))},_destroyControlsGroup:function(){if(this.controls){this.controls.undelegateEvents(this.$el)}},isVisible:function(){return this._state},moveTo:function(a){this.$el.css(a.rectangle);if(typeof a.corner!=="undefined"){this.$("__corner").css(a.corner)}return this},show:function(){this._toggleAnimateClass(true);this.$el.width(this.$el.width());this.setPosition();this._clearTimeout();this._initControlsGroup();if(this.$el.hasMod("closable")){setTimeout(this._bindOutsideClick.bind(this),0)}this.emit("show")},hide:function(a){if(a){this._clearTimeout();this._toggleAnimateClass(false);this.emit("hide")}else{this.animateId=setTimeout(function(){this._toggleAnimateClass(false);this.emit("hide")}.bind(this),200)}},_toggleAnimateClass:function(a){this.$el.toggleMod("animate",a);this._state=a},_bindOutsideClick:function(){$(document).on("click.tooltip",function a(b){if(!($.contains(this.$el[0],b.target)||this.$el[0]===b.target)){$(document).off("click.tooltip",a);this.destroy()}}.bind(this))},_onCloseClick:function(){this.destroy()},destroy:function(){this._destroyControlsGroup();this.$el.remove()},_clearTimeout:function(){if(this.animateId){clearTimeout(this.animateId)}},setPosition:function(){var a=this.getPositionInfo({relative:this.relative});if(this._mod){this.toggleMod(this._mod,false)}this._mod=a.mod;this.toggleMod(this._mod,true);this.moveTo({rectangle:{top:a.rectangle.top,left:a.rectangle.left},corner:a.corner})},getPositionInfo:function(a){a=$.extend({mods:this.mods,$target:this.$target,offset:this.offset,fitIntoWindow:this.fitIntoWindow},a);function b(a,b,c){a=$.extend({},a);["left","top","bottom","right"].forEach(function(d){if(c){a.rectangle[d]-=b[d]}if(a.corner){a.corner[d]-=b[d]}});return{mod:a.mod,rectangle:a.rectangle,corner:a.corner}}function d(a,b){var c,d;var e=a.rectangle;c=Math.max(b.left-e.left,0);if(!c){c=Math.min(b.right-e.right,0)}d=Math.max(b.top-e.top,0);if(!d){d=Math.min(b.bottom-e.bottom,0)}if(c){e.left+=c;e.right+=c}if(d){e.top+=d;e.bottom+=d;if(a.corner){a.corner.top+=d;a.corner.bottom+=d}}return a}var e=a.offset;var f={width:this.$el.width(),height:this.$el.height()};var g;var h=function(a){var b=a.scrollLeft(),c=a.scrollTop();return{top:c,right:b+a.width(),bottom:c+a.height(),left:b}}($(window.$Scroll||window));var i=this._targetRectangle||function(b){var c=a.$target.offset(),d=b.outerWidth(),e=b.outerHeight(),f=c.left,g=c.top,i=f+d,j=g+e;if(f<h.right&&i>h.right){d=h.right-f}if(f<h.left&&i>h.left){d=i-h.left;f=h.left}return{top:g,right:i,bottom:j,left:f,width:d,height:e}}(a.$target);g=[{mod:"tc",rectangle:{left:i.left+i.width/2-f.width/2,top:i.top+i.height+e.y}},{mod:"tr",corner:{right:i.right+i.width/2,top:i.top},rectangle:{left:i.left+i.width-f.width,top:i.top+i.height+e.y}},{mod:"tl",corner:{left:i.left+i.width/2,top:i.top},rectangle:{left:i.left,top:i.top+i.height+e.y}},{mod:"lc",rectangle:{left:i.left+i.width+e.x,top:i.top+i.height/2-f.height/2}},{mod:"rc",rectangle:{left:i.left-f.width-e.x,top:i.top+i.height/2-f.height/2}},{mod:"bc",rectangle:{left:i.left+i.width/2-f.width/2,top:i.top-f.height-e.y}}].filter(function(b){b.rectangle.right=b.rectangle.left+f.width;b.rectangle.bottom=b.rectangle.top+f.height;return a.mods.includes(b.mod)});g=g.filter(function(a){return c(a.rectangle,h)})[0]||(a.fitIntoWindow?d(g[0],h):g[0]);return b(g,i,a.relative)}})});define("mrg-form/b-form-simple-helper/b-form-simple-helper",["require","toolkit/b-toolkit/b-toolkit"],function(require){"use strict";var a=require("toolkit/b-toolkit/b-toolkit");return a.create("b-form-simple-helper",{update:function(a){this.$("__value").text(a)}})});define("mrg-form/b-form-tooltip/b-form-tooltip",["require","jquery","toolkit/b-toolkit/b-toolkit.core","toolkit/b-toolkit/b-toolkit","Promise"],function(require){"use strict";var $=require("jquery"),a=require("toolkit/b-toolkit/b-toolkit.core"),b=require("toolkit/b-toolkit/b-toolkit"),c=require("Promise");return b.create("b-form-tooltip",{$target:null,mods:["responsive"],init:function d(){var a=this.getData();this.bTooltip=this.$el.find("[data-bem]").getBlock();this.bTooltip.relative=true;if(this.hasMod("bottom-wide")){this.bTooltip.mods=["tc"];this.bTooltip.on("show",function(){this.bTooltip.$el.css({width:"100%",left:"0"})}.bind(this))}else{this.bTooltip.mods=["lc"]}this.mods=a.mods||this.mods;this.$el.find("[data-bem]").toArray().forEach(function(a){var b=$(a).getBlock();if(b){b.on("updateValue",function(a,b){this.emit("updateValue",b)}.bind(this));if(this.hasMod("responsive")){b.toggleMod("responsive",true)}}}.bind(this))},show:function(){this.bTooltip.$target=this.$target;this.emit("show",this.bTooltip.hasMod("inline"));this.bTooltip.show()},hide:function(){this.bTooltip.hide();this.emit("hide")},update:function(a){this.$el.find("[data-bem]").toArray().forEach(function(b){var c=$(b).getBlock();if(c&&typeof c.update==="function"){c.update(a)}})},check:function(a,b){var d=[];this.$el.find("[data-bem]").toArray().forEach(function(c){var e=$(c).getBlock();if(e&&typeof e.check==="function"){d.push(e.check(a,b))}});var e=c.all(d);e.always(function(){this.$el.toggleMod("hidden",!this.hasNotHiddenContent());this.bTooltip.$el.css({width:""});this.emit("needshow")}.bind(this));return e},hasNotHiddenContent:function(){var a=false;var b=this.$el.find(".b-tooltip__content > [data-bem]");b.toArray().forEach(function(b){var c=$(b).getBlock();if(c&&!c.hasMod("hidden")){a=true}});if(this.bTooltip.getData().text){a=true}return a},destroy:function(){this.bubble.destroy();a.prototype.destroy.call(this)}})});define("mrg-form/b-form-field/b-form-field",["require","toolkit/b-toolkit/b-toolkit","mrg-form/b-form-tooltip/b-form-tooltip"],function(require){"use strict";var a=require("toolkit/b-toolkit/b-toolkit");require("mrg-form/b-form-tooltip/b-form-tooltip");var b=13;return a.create("b-form-field",{throttling:300,error:null,init:function(){var a=this.$("__input>[data-bem]"),b=this.$("__tooltip>[data-bem]");if(a.length){this._initInput(a)}else{this.$nativeInput=this._findNativeInput()}if(b.length){this._initTooltip(b,this.$("__tooltip"));this.tooltip.$target=a}this.name=this.$el.attr("data-field-name");this.notValidated=this.$el.hasMod("not-validated");this.compact=this.$el.hasMod("compact");this.hidden=this.$el.hasMod("hidden");this.$mediaProp=this.$(".b-form-field__media-phone")},_initInput:function(a){this.input=a.getBlock();this.input.on("focus",this.onFocus.bind(this)).on("blur",this.onBlur.bind(this)).on("change",this.onInputChange.bind(this))},_findNativeInput:function(){var a=null;var b=this.$("input");if(b.length){a=$(b[0])}return a},_initTooltip:function(a,b){this.tooltip=a.getBlock();this.tooltip.on("show",this._onTooltipShow.bind(this,b));this.tooltip.on("hide",this._onTooltipHide.bind(this));this.tooltip.on("needshow",this._onTooltipNeedshow.bind(this));this.tooltip.on("updateValue",this._onTooltipUpdateValue.bind(this))},getValue:function(){var a;if(this.input){if(typeof this.input.getValue==="function"){a=this.input.getValue()||""}else{a=this.input.$el.val()}if(typeof a==="object"){a=a.value}}else if(this.$nativeInput){if(this.$nativeInput.attr("type")==="checkbox"){a=this.$nativeInput.prop("checked")}else{a=this.$nativeInput.val()}}return a},setValue:function(a){if(typeof this.input.setValue==="function"){return this.input.setValue(a)}else{return this.input.$el.val(a)}},toggleMod:function(b,c){a["b-toolkit"].fn.toggleMod.call(this,b,c);this.input.toggleMod(b,c);if(this.tooltip){this.tooltip.toggleMod(b,c)}if(b==="not-validated"){this.notValidated=c}},focus:function(){this.$el.find("input, select, textarea").focus()},showError:function(a){if(this._ownError){return}if(this.input&&typeof this.input.showError==="function"){this.input.showError(a)}else{this.error=a;this.$("__errors").find(".js-"+a).toggleMod("visible",true);this.$el.toggleMod("invalid",true)}},_showOwnError:function(){this.showError.apply(this,arguments);this._ownError=true},_hideOwnError:function(){this._ownError=false;this.hideErrors()},hasOwnError:function(){return!!this._ownError},hideErrors:function(a){if(a){this._ownError=false}if(this._ownError)return;if(this.input&&typeof this.input.hideError==="function"){this.input.hideError()}else{this.error=null;this.$("__errors").find(".js-error").toggleMod("visible",false);this.$el.toggleMod("invalid",false)}},onFocus:function(a,b){this.$el.toggleMod("focused",true);var c=this.error;this._showTooltip();this._checkTooltip(b);this.error=c},onBlur:function(){this.$el.toggleMod("focused",false);this._hideTooltip()},_showTooltip:function(){if(this.tooltip){if(this.tooltip.hasNotHiddenContent()){this.tooltip.show()}}},_hideTooltip:function(){if(this.hasMod("not-hidden-tooltip")&&this.$mediaProp.css("content")==='"phone"'){}else{if(this.tooltip){this.tooltip.hide()}}},setGetterFormData:function(a){this._getFormData=a},onInputChange:function(a,c){if(a.which!==b){if(c!==""){this.hideErrors()}}this._checkTooltip(c)},_checkTooltip:function(a){if(!this.tooltip){return}if(this._previousCheckValue===a)return;this._previousCheckValue=a;var b=this._getFormData?this._getFormData():{};this.tooltip.check(a,b).then(this._hideOwnError.bind(this),this._showOwnError.bind(this,"invalid"))},validate:function(a){if(!this.input||typeof this.input.validate!=="function"){return null}return this.input.validate(a)},destroy:function(){if(this.input){this.input.off("focus").off("blur").off("change")}a["b-toolkit"].fn.destroy.apply(this,arguments)},toggleShowMessage:function(a,b){this.toggleMod("hide-message",!a);if(typeof b==="string"){var c=this.$(".b-form-field__message");c.text(b)}},_onTooltipShow:function(a,b,c){this.toggleMod("tooltip-visible",true);if(!this.tooltip.hasMod("responsive")){var d=this._getWidth(this.$el.parent())-this._getWidth(this.$("__label"));var e={width:"",position:"",top:""};if(!c){e.width=d+"px";e.position="absolute";e.top="0"}a.css(e)}},_onTooltipUpdateValue:function(a,b){this._hideOwnError();this.input.setValue(b);this.input.focus()},_onTooltipHide:function(){this.toggleMod("tooltip-visible",false)},_onTooltipNeedshow:function(){if(this.$el.hasMod("focused")){this._showTooltip()}else{this._hideTooltip()}},_getWidth:function(a){return parseInt(a.css("width"))}})});define("mrg-form/b-form-row/b-form-row",["require","toolkit/b-toolkit/b-toolkit"],function(require){"use strict";var a=require("toolkit/b-toolkit/b-toolkit");return a.create("b-form-row",{init:function(){},_initInput:function(){},toggleMod:function(b,c){a["b-toolkit"].fn.toggleMod.call(this,b,c)}})});define("mrg-form/b-form/b-form.validators",[],function(){"use strict";return{required:function(a,b){return a.attr("required")&&!b},maxbytes:function(a){var b=a.data("maxbytes"),c;if(b<=0){return false}c=encodeURI(a.val()).split(/%..|./);return c.length-1>b},maxlength:function(a){var b=a.data("maxlength"),c=a.val();if(b<=0){return false}return c.length-1>b},pattern:function(a,b){return!new RegExp(a.data().pattern||"").test(b)}}});define("mrg-form/b-form/b-form",["require","mrg-form/b-form-field/b-form-field","mrg-form/b-form-row/b-form-row","jquery","toolkit/b-toolkit/b-toolkit","mrg-form/b-form/b-form.validators","toolkit/btn/btn"],function(require){"use strict";require("mrg-form/b-form-field/b-form-field");require("mrg-form/b-form-row/b-form-row");var $=require("jquery"),a=require("toolkit/b-toolkit/b-toolkit"),b=require("mrg-form/b-form/b-form.validators");require("toolkit/btn/btn");var c=a.create("b-form",{init:function(){this._initForm()},onRender:function(){this._initForm()},_initForm:function(){this.$el.off("submit").on("submit",this.onSubmit.bind(this));this.$form=this.$("form").length!==0?this.$("form"):this.$el;this.$form.attr("novalidate","novalidate");var a=this.getFields().filter(function(a){return!a.hidden});a.forEach(function b(a){a.setGetterFormData(this.getFormData.bind(this))}.bind(this));if(a.length){setTimeout(function(){a[0].focus()},100)}},onSubmit:function(a){var b=this.getData();if(!this.validate()){a.preventDefault();this._focusErrorField();return}if(!b.nativesubmit){a.preventDefault();this.onPost(this.getFormData())}},_focusErrorField:function(){var a=this.getFields("invalid");if(a[0]){a[0].focus()}},onPost:function(){},getEchoParams:function(a){var b={};if(!a){return b}if(typeof a==="object"){Object.keys(a).forEach(function(c){b[c]=this.getEchoParams(a[c])},this)}if(typeof a==="string"){try{b=JSON.parse(a)}catch(c){b=a}}return b},validate:function(a,b){a=a||this.getFormData(b);var c={},d=false,e=false;this.hideErrors();this._validateProcess(a,"",c);this.getFields().forEach(function(a){if(e===true)return;if(a.hasOwnError())e=true});if(!$.isEmptyObject(c)){this.showErrors(c);d=true}if(e||d){return false}else{return true}},getField:function(a){var b=null;this.getFields().forEach(function(c){if(b)return;if(c.name===a){b=c}});return b},getFields:function(a){return this.$form.findBem("b-form-field").toArray().map(function(a){return $(a).getBlock()}).filter(function(b){if(a&&b.hasMod(a)||!a){return!!b}})},_getControls:function(a){return this.$(".b-form__controls .b-form__control").toArray().map(function(a){return $(a).find("[data-bem]").getBlock()}).filter(function(b){if(a&&b.hasMod(a)||!a){return!!b}})},_validateProcess:function(a,c,d){var e,f,g,h;for(g in a){e=c||g;h=this.getField(c?c+"__"+g:g);if(typeof a[g]==="object"){this._validateProcess(a[g],g,d);
continue}if(!h){continue}if(h.notValidated){continue}var i=h.name||g;for(f in b){if(h.validate(b[f])){d[c||i]=f;break}}}},_serialize:function(){var a=this.getFields().map(function(a){return{value:a.getValue(),name:a.name}});var b=this.$el.find(".b-form-row > div:not(.b-form-field) input");a=a.concat(b.toArray().map(function(a){return{name:a.name,value:a.value}}));return a},getFormData:function(a){var b=this._serialize(),c=/(.*)__(.*)/i,d={};a=a||{};function e(b,c){if(typeof b!=="string"){return b}if(!a.keepSpaces){b=b.trim()}if(c==="echo_params"){return b}if(a.keepQuotes){return b}return b.replace(/\"/gi,"")}b.forEach(function(a){var b=a.name;if(c.test(a.name)){b=a.name.replace(c,"$1");d[b]=d[b]||{};d[b][a.name.replace(c,"$2")]=e(a.value,a.name)}else{d[a.name]=e(a.value,a.name)}}.bind(this));if(d.echo_params){d=$.extend({},this.getEchoParams(d.echo_params),d);delete d.echo_params}return d},showErrors:function(a){var b,c,d;for(d in a){b=typeof a[d]==="object"?a[d].error:a[d];c=this.getField(d);if(c){c.showError(b)}}},hideErrors:function(a){this.getFields().forEach(function(b){b.hideErrors(a)})},setFormData:function(a){Object.keys(a).forEach(function(b){var c=this.getField(b);if(c){c.setValue(a[b])}}.bind(this))},destroy:function(){this.$el.unbind(".b-form__row__widget","change keyup");this.$el.unbind("submit");a["b-toolkit"].fn.destroy.apply(this,arguments)},toggleMod:function(b,c){a["b-toolkit"].fn.toggleMod.call(this,b,c);this.getFields().forEach(function(a){a.toggleMod(b,c)});this._getControls().forEach(function(a){a.toggleMod(b,c)})}});c.registerValidator=function(a,c){b[a]=c};return c});define("toolkit/b-checkbox/b-checkbox",["toolkit/b-toolkit/b-toolkit"],function(a){"use strict";return a.create("b-checkbox",{onRender:function(){this._initEvents()},init:function(){this.data.checked=this.data.checked||false;this._initEvents()},toggle:function(a){this._checked=a;this.$el.off();this.data.props.value=a?"1":"0";this.extendData({checked:a}).render()},_onTap:function(a){a.preventDefault();if(this.data.disabled||this.hasMod("disabled")){return}var b=!this._checked;setTimeout(function(){this.toggle(b)}.bind(this),0);if(this._silent){return}this.emit("change",this._checked)},_initEvents:function(){this.data.mods=this.data.mods||[];this._silent=this.data.mods.includes("silent");this._checked=this.data.checked;this.$el.on("tap",this._onTap.bind(this))}})});define("mrg-mega-blocks/b-checkbox/b-checkbox",["toolkit/b-checkbox/b-checkbox"],function(a){"use strict";return a.extend("b-checkbox",{})});define("toolkit/b-link/b-link",["toolkit/b-toolkit/b-toolkit"],function(a){"use strict";return a.create("b-link",{})});define("mrg-mega-blocks/b-link/b-link",["toolkit/b-link/b-link"],function(a){"use strict";return a.extend("b-link",{})});define("blocks/b-btn-social/b-btn-social",["require","toolkit/b-toolkit/b-toolkit","toolkit/b-controls-group/b-controls-group","mrg-auth-client"],function(require){"use strict";var a=require("toolkit/b-toolkit/b-toolkit"),b=require("toolkit/b-controls-group/b-controls-group"),c=require("mrg-auth-client");var d=function(){};return a.create("b-btn-social",{init:function(){this.socials=new b({$el:this.$("__item_social")});this.socials.on("social",this.onSocial.bind(this))},onSocial:function(a,b){c.client.signin("social",b.$el.data()).then(d)}})});define("toolkit/b-email-providers/b-email-providers",["toolkit/b-toolkit/b-toolkit"],function(a){"use strict";return a.create("b-email-providers",{onClick:function(a){var b=$(a.currentTarget),c=b.data("provider");this.select(c);this.emit("select",c)},select:function(a){var b=this.$el.find("."+this.activeClass),c=$('[data-provider="'+a+'"]');b.removeClass(this.activeClass);c.addClass(this.activeClass)},getValue:function(){var a=this.$el.find("."+this.activeClass);return a.data("provider")},init:function(){this.activeClass=this.bemName+"__list__item_selected";this.$el.delegate("."+this.bemName+"__list__item","click",this.onClick.bind(this))}})});define("blocks/b-email-providers/b-email-providers",["require","toolkit/b-email-providers/b-email-providers","toolkit/b-toolkit/b-toolkit","modules/providers"],function(require){"use strict";var a=require("toolkit/b-email-providers/b-email-providers"),b=require("toolkit/b-toolkit/b-toolkit"),c=require("modules/providers");b["b-email-providers"]=a.extend({selectProvider:function(a){this.select(c.getProvider(a.domain))}});return b["b-email-providers"]});define("blocks/b-phone-restore/b-phone-restore",["require","toolkit/b-toolkit/b-toolkit","RPC","mail/actions/PasswordRecovery","blocks/b-phone-btn/b-phone-btn"],function(require){"use strict";var a=require("toolkit/b-toolkit/b-toolkit");var b=require("RPC");var c=require("mail/actions/PasswordRecovery");require("blocks/b-phone-btn/b-phone-btn");var d={PHONE_INVALID:"1",CAPCHA_INVALID:"2",PHONE_WAS_INPUT_INCORRECT:"3",CAPCHA_EMPTY:"4",JSON_PARSE:"5",MANY_REQUESTS:"6",TOKEN_ID_INVALID:"7",UNKNOWN_ERR:"99999"};return a.create("b-phone-restore",{init:function(){this.email=this.data.email;this.tokenId=this.data.tokenId;this.index=this.data.index;if(!this.email){throw new Error("Нельзя инициализировать компонент "+"без email, он требуется обязательно")}},onRender:function(){this.form=this.$el.find('[name="restore"]').getBlock();this.form.$el.on("submit",this._onSubmit.bind(this));this.segmentInput=this.$el.find('[data-bem="b-segment-input"]').getBlock();this.segmentInput.render(true)},_onSubmit:function(){var a;$.event.trigger("ui-abstract-action",{chain:["restore","send"]});if(this.segmentInput.isFullyFilled()){a=this.segmentInput.getValue()}else{this._initError(d.PHONE_WAS_INPUT_INCORRECT);return}if(!a){this._initError(d.PHONE_WAS_INPUT_INCORRECT);return}if(!this.form.validate()){return}this._setBtnDisabled();this._sendSmsForUser(this.email,a,this.tokenId,this._onSmsSended.bind(this),this._initError.bind(this))},_onSmsSended:function(a,b){this._setBtnEnable();this.emit("sms-sended",{length:a,wait:b,email:this.email,phoneMask:this.segmentInput.getMask(),phoneStr:this.segmentInput.getFormatedValue(),tokenId:this.tokenId,index:this.index})},_setBtnDisabled:function(){this.form.$('[data-bem="btn"]').toArray().forEach(function(a){var b=$(a).getBlock();if(b){b.toggleMod("disabled",true)}})},_setBtnEnable:function(){this.form.$('[data-bem="btn"]').toArray().forEach(function(a){var b=$(a).getBlock();if(b){b.toggleMod("disabled",false)}})},_initError:function(a){this._setBtnEnable();if(a===d.CAPCHA_INVALID){this.emit("need-captcha",{email:this.email,phoneMask:this.segmentInput.getMask(),phoneStr:this.segmentInput.getFormatedValue(),phoneVal:this.segmentInput.getValue(),tokenId:this.tokenId,index:this.index})}else{var b=this.getData();b.errno=a;this.render(true)}},onSelect:function(){},_sendSmsForUser:function(a,e,f,g,h){b.setup("email",a);c.execute({method:c.methods.SEND,by:c.transports.PHONE,email:a,token:f,address:e}).then(i.bind(this),j.bind(this));function i(a){var b=a.result.length;var c=a.result.wait;g(b,c)}function j(a){var b=a.error.body;if(b.capcha){h(d.CAPCHA_INVALID);return}if(b["reg_token.address"]){h(d.PHONE_INVALID);return}if(b["reg_token.id"]){h(d.TOKEN_ID_INVALID);return}h(d.UNKNOWN_ERR)}}})});define("blocks/b-login/b-login",["require","toolkit/b-toolkit/b-toolkit","config","mrg-auth-client","mrg-counter","urijs","modules/providers","modules/oauth","RPC","blocks/b-phone-restore/b-phone-restore","mail/actions/PasswordRecovery","modules/counterParams","blocks/b-input-btn/b-input-btn"],function(require){"use strict";var a=require("toolkit/b-toolkit/b-toolkit"),b=require("config"),c=require("mrg-auth-client"),d=require("mrg-counter"),e=require("urijs"),f=require("modules/providers"),g=require("modules/oauth"),h=require("RPC"),i=require("blocks/b-phone-restore/b-phone-restore"),j=require("mail/actions/PasswordRecovery"),k=require("modules/counterParams");require("blocks/b-input-btn/b-input-btn");var l={login:"Login",password:"Password"},m=["mode","page","success_redirect","errno","captcha","fail","abfsecond","email"];return a.create("b-login",{_initExternal:function(){},init:function(){this.form=this.$el.find('[name="login"]').getBlock();this.form.$el.on("submit",this.onSubmit.bind(this));this.email=this.$el.find(".b-email").getBlock();if(this.data.allow_external){this.providers=this.$el.find(".b-email-providers").getBlock();this.email.on("update",this.onSelect.bind(this,"domain"));this.providers.on("select",this.onSelect.bind(this,"provider"))}if(c.AG){c.AG.on("focus",this.setFocus.bind(this))}if(this.data.email){this.email.setValue(this.data.email);this.onSelect("domain",{},this.email.getEmailData());this.form.getField("Password").setValue("")}this.setFocus(this.data.focus);if(this.data.email&&this.data.restore==="phone"){this._getRestorePhone(this.data.email,this._showPhoneRestoreForm.bind(this))}this._initSignUpBtn();this._captchaRb();this.toggleMod("ready")},_captchaRb:function(){if(this.data.captcha){d.rb({chain:[b.get("pageId"),b.get("opener"),"captcha"],eventType:"rb-show",params:k.getParams()})}},_initSignUpBtn:function(){this.$('[data-name="signup-link"]').on("click",function(a){d.rb({chain:[b.get("pageId"),b.get("opener"),"signup"],params:k.getParams()})})},setFocus:function(a){a=a||this.data.focus;this.form.getField(l[a]).focus();return this},onSubmit:function(a){d.radar({chain:[b.get("pageId"),"submit"]});if(!this.form.validate()){d.rb({chain:[b.get("pageId"),b.get("opener"),"error"],params:k.getParams()})}if(a.isDefaultPrevented()){return}var c=this._getOauthData();this._setCounter();if(this.disabled){return false}else{this.disabled=true}if(c){a.preventDefault();this._oauthSubmit(c.type)}else{this._nativeSubmit()}},onSelect:function(a,b,c){var d=this._getDomain(c),e=this.getData(),f,h;if(a==="provider"){if(c==="other"){this.email.toggleMod("permanent-expand",true)}else{this.email.toggleMod("permanent-expand",false);d=this._getDomain(c);if(d){this.email.setDomain(d)}}}else if(a==="domain"){if(this.data.allow_external){this.providers.selectProvider(c)}}if(!this.data.allow_external){return}var i=this.providers.getValue();this.toggleMod("wwp",i!=="mail.ru");h=g.getData(d);f=h&&c!=="other";this.toggleMod("oauth",f);this.form.getField("Password").toggleMod("not-validated",f);var j=this.form.$el.find(".b-form-field_submit_btn").getBlock();if(f&&h){j.toggleShowMessage(true,h.text)}else{j.toggleShowMessage(false,"")}var k=e.socials.some(function(a){return a.active});this.toggleMod("thin-restore",(i!=="mail.ru"&&!h||c==="other")&&!k&&!e.captcha);this.emit("changeElemSizes")},hideErrors:function(){this.form.hideErrors(true)},_oauthSubmit:function(a){c.client.signin("oauth",{login:this.email.getLogin(),lang:"ru_RU",type:a})},_nativeSubmit:function(){var a=e(location.href);m.forEach(function(b){a.removeQuery(b)});this.form.setFormData({FromAccount:a.query()||1})},_setCounter:function(){var a=this.form.getFormData(),c="nosaveauth";if(a.saveauth==="1"){c="saveauth"}d.rb({chain:[b.get("pageId"),b.get("opener"),"signin",c],params:k.getParams()})},_getOauthData:function(){if(!this.data.allow_external){return null}var a=this.email.getEmailData();return g.getData(a.domain)},_getDomain:function(a){return typeof a==="string"?f.getDomains(a)[0]:a.domain},_getProvider:function(a){return typeof a==="string"?a:f.getProvider(a.domain)},_getRestorePhone:function(a,b){h.setup({email:a,version:1,baseUrl:"/api/",timeout:window.dev?2e5:1e4,htmlencode:false});j.execute({method:j.methods.OPTIONS,email:a}).then(function(c){var d=c.result;var e=0;var f=d.phones[e];if(f){var g=d.id;b(f,a,g,e)}$.event.trigger("ui-abstract-action",{chain:["restore","open"]})},function(a,b){$.event.trigger("ui-abstract-action",{chain:["restore","not-opened"]})})},_showPhoneRestoreForm:function(a,b,c,d){try{this.$el.find(".b-login_container-for-restore").show();var e=this.getData().mods;var f=[];if(e.includes("responsive")){f.push("responsive")}var g={name:"restore",captcha:true,mods:["popup"],block:"b-form",action:"/cgi-bin/auth",urls:"",method:"post",target:"_parent",fields:[{block:"b-phone-btn",mods:["in-row"].concat(f),errors:[{type:"required",text:"Поле с телефоном должно быть заполнено"},{type:"fixlength",text:"Не все заполнено"}],phone:{block:"b-segment-input",mods:["editable"].concat(f),props:{text:a,type:"text",name:"phone",required:"required"},maskSymbol:"x"},btn:{mods:["stylish","single","fluid","form"].concat(f),name:"submit",text:i18n("Выслать код")},props:{name:"phone"}}],nativesubmit:false};var h=this.$el.find('[name="b-phone-restore"]');var j=new i({el:h,template:this.template,renderMode:"replace",data:{tokenId:c,email:b,form:g,index:d},onSmsSended:function(a,b){this.emit("showSmsConfirm",{smsData:b})}.bind(this),onNeedCaptcha:function(a,b){this.emit("showSmsSend",{smsData:b})}.bind(this)});j.render(true);if(f.length){f.forEach(function(a){j.toggleMod(a,true)})}this.emit("changeElemSizes")}catch(k){throw k}}})});define("blocks/b-choice-item/b-choice-item",["require","toolkit/b-toolkit/b-toolkit"],function(require){"use strict";var a=require("toolkit/b-toolkit/b-toolkit");return a.create("b-choice-item",{init:function(){this._initElems();this._email=this.data.item.email},onRender:function(){this._initElems()},_initElems:function(){this.$el.on("tap",this._onTap.bind(this))},_onTap:function(){this.emit("click",{email:this._email})}})});define("blocks/b-choice/b-choice",["require","toolkit/b-toolkit/b-toolkit","mrg-counter","config","modules/counterParams"],function(require){"use strict";var a=require("toolkit/b-toolkit/b-toolkit"),b=require("mrg-counter"),c=require("config"),d=require("modules/counterParams");return a.create("b-choice",{init:function(){this._initElems()},onRender:function(){this._initElems()},_initElems:function(){var a=c.get("email");var e=this.$(".b-choice__wrapper .b-choice-item").toArray().map(function(a){return $(a).getBlock()});e.forEach(function(e){e.on("click",function(e,f){b.rb({chain:[c.get("pageId"),c.get("opener"),a?"email-switch-user":"switch-user"],params:d.getParams()});this.emit("choiceItemActivate",f)}.bind(this))}.bind(this));var f=this.$('.btn[data-name="signin"]').getBlock();f.$el.on("click",function(){b.rb({chain:[c.get("pageId"),c.get("opener"),a?"email-enter-other-mail":"enter-other-mail"],params:d.getParams()});this.emit("showLoginPage")}.bind(this));var g=this.$('.b-form[name="choice"]').getBlock();if(g){g.$el.on("submit",function(){b.rb({chain:[c.get("pageId"),c.get("opener"),"email-signin"]})})}}})});define("bundles/all/all",["toolkit/b-toolkit/b-toolkit","toolkit/b-userpic/b-userpic","toolkit/b-list/b-list","toolkit/b-dropdown/b-dropdown","mrg-mega-blocks/b-dropdown/b-dropdown","toolkit/b-controls/b-controls","toolkit/b-panel/b-panel","mrg-mega-blocks/b-panel/b-panel","blocks/b-panel/b-panel","toolkit/b-input/b-input","mrg-mega-blocks/b-input/b-input","toolkit/b-select/b-select","mrg-mega-blocks/b-select/b-select","toolkit/b-email/b-email","mrg-mega-blocks/b-email/b-email","blocks/b-email/b-email","toolkit/b-captcha/b-captcha","mrg-mega-blocks/b-captcha/b-captcha","blocks/b-input-btn/b-input-btn","toolkit/b-segment-input/b-segment-input","blocks/b-phone-btn/b-phone-btn","toolkit/b-tooltip/b-tooltip","mrg-form/b-form-simple-helper/b-form-simple-helper","mrg-form/b-form-tooltip/b-form-tooltip","mrg-form/b-form-field/b-form-field","mrg-form/b-form-row/b-form-row","mrg-form/b-form/b-form","toolkit/b-checkbox/b-checkbox","mrg-mega-blocks/b-checkbox/b-checkbox","toolkit/b-link/b-link","mrg-mega-blocks/b-link/b-link","blocks/b-btn-social/b-btn-social","toolkit/b-email-providers/b-email-providers","blocks/b-email-providers/b-email-providers","blocks/b-phone-restore/b-phone-restore","blocks/b-login/b-login","blocks/b-choice-item/b-choice-item","blocks/b-choice/b-choice"],function(){});define("modules/ag",["require","exports","module","mrg-auth-client","logger","Promise","utils/util","../serverData"],function(require,exports){"use strict";var a=require("mrg-auth-client"),b=require("logger").getScope("authgate"),c=require("Promise"),d=require("utils/util"),e=require("../serverData");var f=e.get("urls").page;if(/\?\w+/.test(f)){f+="&back=1"}else{f+="?back=1"}var g={page:f,authOrigin:e.get("urls").authOrigin,authgate:e.get("mode")==="simple"?window.__AG:null};exports.load=function(){return a.load(g)};exports.call=function(b,c){return a.client.gate[b](c)}});(function(a){"use strict";var b=a.performance||{};b.now=function(){return b.now||b.mozNow||b.msNow||b.oNow||b.webkitNow}();var c=0,d=function(){},e=void 0,$=a.jQuery||a.Zepto||a.ender||a.$||function(a){return a},f=a.Deferred||$.Deferred,g=a.Emitter&&Emitter.Event||$.Event,h=a.history,i=a.document,j=a.location,k=/\s+/,l=/^(?:https?|file)/i,m=/(?:^(?:https?|file):\/\/[^\/]*|[?#].*)/g,n=[].slice,o={}.toString,p=function(a,b){var c=n.call(arguments,2);return b.bind?b.bind.apply(b,[a].concat(c)):function(){return b.apply(a,c.concat(n.call(arguments)))}},q=Array.isArray||$.isArray,r=f.all||f.when||function(a){return $.when.apply($,a)},s=function(a,b){var c=a.accessPermission,d=z.access[c];return c===void 0||(d?d(b):false)},t=b.now?function(){return b.now()}:function(){return(new Date).getTime()},u=function(a,b){a._profilerTimers.push([b,t(),0])},v=function(a,b){a._profilerTimers.push([b,t(),1])};function w(a,b,c,d,e){if(a){try{c.trigger(d,e)}catch(f){if(f instanceof Object){f.name=d.replace("-","")}b.trigger("error",f,e);c.setRouteError(f)}}else{c.trigger(d,e)}}var x=function(a){var b=function(){if(b.fn.singleton){if(b.__inst__){return b.__inst__}b.__inst__=this}this.cid=this.uniqId=++c;this.__lego.apply(this,arguments)};b.fn=b.prototype=a||{};b.fn.__self=b.fn.constructor=b;b.extend=function(a){var c=x();d.prototype=this.fn;c.prototype=new d;E(c,this);D(a,function(a,b){if(typeof a==="function"){a.parent=c.prototype[b]}c.prototype[b]=a});c.fn=c.prototype;c.fn.__fn=c.fn.__super__=this.fn;c.fn.__self=c.fn.__self__=b.fn.constructor=c;return c};return b};var y=x(a.Emitter&&Emitter.fn||{__withoutEvents__:false,__lego:function(){if(this.__withoutEvents__){this.trigger=d}else{var a=$(this);D({on:"bind",off:"unbind",fire:"triggerHandler"},function(b,c){this[c]=function(){a[b].apply(a,arguments);return this}},this)}},on:function(){return this},off:function(){return this},trigger:function(a,b){var c=("on-"+a).replace(/-(.)/g,function(a,b){return b.toUpperCase()}),d=g(a.replace(/-/g,"").toLowerCase()),f;d.target=this;if(this[c]===e||this[c].apply(this,[d].concat(b))!==false){if(!d.isImmediatePropagationStopped()){f=this.fire(d,b)}}return f}});y.prototype.emit=y.prototype.trigger;var z=y.extend({__lego:function K(b){y.prototype.__lego.call(this);this.options=b=E({el:null,selector:"a[href],[data-nav]",basePath:"/",production:a.Pilot&&a.Pilot.production,hashBang:"#!",useHistory:false},b);this.items=[];this.itemsIdx={};this.request=this.referrer=z.parseURL(z.getLocation());this.history=[];this.historyIdx=0;if(b.useHistory){$(a).bind("popstate hashchange",p(this,function(){this.nav(z.getLocation())}))}if(b.profile){G(this,"emit",true);D({prepare:"_getUnits","load data":"_loadUnits","do routes":"_doRouteUnits"},function(a,b){G(this,a,0,0,b)},this);var c=this._nav;this._nav=function(){var a=this,b=a._profilerTimers=[],d=function(){v(a,"Pilot");a.trigger("profile",[b]);H(a.request.path,b)};u(a,"Pilot");return c.apply(a,arguments).done(d).fail(d)}}b.el&&$()&&$(b.el).delegate(b.selector,"click tap",p(this,function(a){var b=a.currentTarget,c=b.getAttribute("data-nav")||b.getAttribute("href");if(b.target!=="_blank"&&b.target!=="_self"){a.preventDefault();if(c==="back"||c==="forward"){this[c]()}else{this.nav(z.getLocation(c))}}}));this.init()},init:function(){},route:function(a,b,c,d,e){var f=this.addRoute(a,b,c,d,e);return e?f:this},addRoute:function(a,b,c,d,f){if(!/string|regexp/i.test(o.call(b))){d=c;c=b;b=a;a=e}if(c&&!c.fn){var g=c;c=B.extend(typeof g!="function"?g:{init:function(){this.on("routestart routechange"+(d===true?" routeend":""),g)}})}if(!b.source){b=(this.options.basePath+(b=="."?"":b)).replace(/\/\//,"/")}var h=[],i=this,j=d&&d.paramsRules||c&&c.fn.paramsRules||{},k;if(f){i=new z({basePath:b,paramsRules:j});i.items=this.items;i.itemsIdx=this.itemsIdx;i.parentRouter=this;b+="*"}if(c){k=this.items.push({id:a,path:b,keys:h,regexp:I(b,h,E({},i.options.paramsRules,j)),unit:c||z.View,options:d});if(a){this.itemsIdx[a]=k-1}}return f?i:k},removeRoute:function(a){a=this.itemsIdx[a]||a;this.items.splice(a,1)},createGroup:function(a,b,c,d){return this.route(a,b,c,d,true)},closeGroup:function(){return this.parentRouter||this},_getUnits:function(a,b){var c=[];D(b,function(b){var d=b.unit,f=[];if(J(a,b.regexp,b.keys,f)){if(d.__self===e){b.unit=d=new d(E({id:b.id,router:this,inited:false},b.options))}d.requestParams=f;c.push(d)}},this);return c},_loadUnits:function(a,b){var c=[],d=[],e,g,h,i,j,k,l=this.options.production,m=function(a,b){if(!a.__self){if(!a.fn||!a.fn.__lego){a=C.extend(a)}a=new a({router:this.router,inited:false,parentRoute:this,subrouteName:b});a.el=a.el||'[data-subview-id="'+b+'"]';this.subroutes[b]=a}a.requestParams=this.requestParams;j.push(a)};j=b.concat();while(e=j.shift()){if(e&&e.isActive(b)){a.params=e.requestParams;g=null;e.setRouteError(null);h=s(e,a);i=e.accessDeniedRedirectTo&&{redirectTo:e.accessDeniedRedirectTo,redirectParams:e.requestParams};if(!h){e.trigger("accessDenied",a);return f().reject(i)}else if(h.then){h.denied=i;d.push(h)}D(e.subroutes,m,e);if(e.templateUrl){c.push(z.loadTemplate(e.templateUrl,e).then(p(e,e.setTemplate)))}if(e.loadData){if(!h||!h.then){if(l){try{g=e.loadData(a,this._navByHistory)}catch(n){g=f().reject(n);if(n instanceof Object){n.name="loadData"}this.trigger("error",n,a)}}else{g=e.loadData(a,this._navByHistory)}}else{g=p(e,"loadData",a,this._navByHistory)}}if(g){if(typeof g.then==="function"){g.then(p(e,e.setLoadedData),p(e,e.setRouteError));c.push(g)}}if(!g||typeof g.then!=="function"){e.setLoadedData(g)}delete a.params}}if(d.length){k=f();r(d).then(function(){r(c).then(k.resolve,k.reject)},function(){k.reject(h.denied)})}else{k=r(c)}return k},_doRouteUnits:function(a,b){var c=this.options,d=c.profile,e=c.production;D(b,function(b){var c=b.unit,f=true,g=[],h=a.clone();if(d&&c.__self){u(this,"#"+c.getRouteName())}h.params=g;if(J(h,b.regexp,b.keys,g)&&c.isActive(this.activeUnits)){c.request=h;if(c.inited!==true){c.__init()}if(c.active!==true){f=false;c.active=true;w(e,this,c,"routeStart",h)}else if(true){}w(e,this,c,"route",h);if(f){w(e,this,c,"routeChange",h)}}else if(c.active===true&&!~$.inArray(c,this.activeUnits)){c.active=false;c.request=h;w(e,this,c,"routeEnd",h)}if(d&&c.__self){v(this,"#"+c.getRouteName())}},this)},_doRouteDone:function(a){if(this.activeRequest===a){if(this.request.url!=a.url){this.referrer=this.request;if(this.options.useHistory){z.setLocation(a)}}this.request=a;if(!this._navByHistory){this.history=this.history.slice(0,this.historyIdx+1);this.historyIdx=this.history.push(a.url)-1}this.trigger("routeStart",[a]);if(this.items.length){this._doRouteUnits(a,this.items)}var b=new Date-this.__ts;this.trigger("route",[a,b]);this.trigger("routeEnd",[a,b]);if(!this.options.profile){this.log("Pilot.nav: "+b+"ms ("+a.path+a.search+")")}}},_doRouteFail:function(a,b){b=b||{};if(this.activeRequest===a){var c=b.redirectTo;this.activeRequest=null;if(c){if(c===".."){c=a.path.split("/");if(c.pop()===""){c.pop();c.push("")}c=c.join("/")}else if(typeof c==="function"){c=c.call(this,a)}else if(this.get(c)){c=this.getUrl(c,b.redirectParams)}this.request=a;this.nav(c)}else{this.trigger("routeFail",a,b)}}},log:function(b){if(!this.options.production&&a.console){console.log(b)}},error:function(b){if(!this.options.production){if(a.console&&console.error){console.error(b)}else{this.log(b)}}},getFailRoutes:function(){return $(this.activeUnits).filter(function(a,b){return!!b.getRouteError()}).get()},get:function(a){var b=this.getItem(a);return b&&b.unit},getItem:function(a){return this.items[this.itemsIdx[a]]},getUrl:function(a,b,c){var d=this.getItem(a),e,f,g=0;if(d){b=E({},b,c);e=d.keys;f=d.path.replace(/:(\w+)\??(\/?)/g,function(a,c,d,f){c=e[g++];f=c&&b[c.name];return f?f+(d||""):"("+a+")"}).replace(/\(.*?:[^)]+\)+\??/g,"").replace(/\(|\)\??/g,"").replace(/\/+/g,"/").replace(/[+*]$/g,"")}return(z.pushState?"":this.options.hashBang)+f},start:function(a){if(!this.started){this._nav(a||this.request,false,true)}},_nav:function(a,b,c){var d=f(),e=z.parseURL(a.href||a.url||a,this.request.url,this);this.started=true;this._navByHistory=!!b;if(c||!this.activeRequest||this.activeRequest.url!=e.url){this.__ts=+new Date;this.trigger("beforeRoute",[e,this.__ts]);var g=this._getUnits(e,this.items);this.activeUnits=g;this.activeRequest=e;if(g.length){this._loadUnits(e,g).done(p(this,this._doRouteDone,e)).fail(p(this,this._doRouteFail,e)).then(d.resolve,d.reject)}else{this._doRouteDone(e);this.trigger("404",e);d.reject()}}else{d.resolve()}return d},nav:function(a,b,c){if(typeof b==="function"){c=b;b=false}return this._nav(a.replace(/^#!/,""),false,b).then(c,c)},parseURL:function(a,b){var c=this.getItem(a);b=z.parseURL(b);c&&J(b,c.regexp,c.keys,b.params);return b},go:function(a,b){var c=this.getUrl(a,b);return c?this.nav(c):f().reject()},hasBack:function(){return this.historyIdx>0},hasForward:function(){return!!this.history[this.historyIdx+1]},back:function(){if(this.hasBack()){return this._nav(this.history[--this.historyIdx],true)}return f().resolve()},forward:function(){if(this.hasForward()){return this._nav(this.history[++this.historyIdx],true)}return f().resolve()}});z.parseURL=function(a,b,c){return new A(a,b,c)};function A(a,b,c){a=a.toString();if(!l.test(a)){if("/"==a.charAt(0)){a="//"+j.hostname+a}else{a=j.pathname.substr(0,j.pathname.lastIndexOf("/")+1)+a}if("//"==a.substr(0,2)){a=j.protocol+a}else{a=j.hostname+a}if(!l.test(a)){a=j.protocol+"//"+a}}a=a.substr(0,7)+a.substr(7).replace(/\/+/g,"/");var d=(a.split("?")[1]||"").replace(/#.*/,""),e=F(d),f=a.replace(m,""),g=this;if(d){d="?"+d}g.url=a;g.href=a;g.query=e;g.search=d;g.path=f;g.pathname=f;g.hash=a.replace(/^.*?#/,"");g.params={};g.referrer=b;g.router=c}A.fn=A.prototype={constructor:A,is:function(a){a=a.split(k);var b=this.router?this.router.activeUnits:[],c=b.length,d=a.length,e;while(d--){e=c;while(e--){if(b[e].id===a[d]){return true}}}return false},getUrl:function(a,b){var c=this.router;return c!==void 0?c.getUrl(a,b,this.params||this.query):null},clone:function(){return new A(this.url,this.referrer,this.router)},toString:function(){return this.url}};z.setLocation=function(a){if(z.pushState&&h.pushState){h.pushState(null,i.title,a.url)}else{j.hash="#!"+a.path+a.search}};z.getLocation=function(a){a=a||j.toString();if(!z.pushState){a=a.split(/#!?/).pop()}return z.parseURL(a).url};z.loadTemplate=function(a,b){throw"Router.loadTemplate("+a+", "+b+") -- should be implemented"};var B=y.extend({data:{},boundAll:[],paramsRules:{},subroutes:null,parentRouteId:null,__lego:function L(a){y.prototype.__lego.call(this);E(this,a);if(this.loadDataOnce){this.loadData=function(a){var b=this.loadDataOnce(a);this.loadData=function(){return b};return b}}this.subroutes=this.subroutes||this.subviews;D(this.boundAll,function(a){this[a]=this.bound(a)},this);if(this.router&&this.router.options.profile){G(this,"__initSub",0,1,"subroutes");D({init:0,loadData:0,render:0,trigger:1},function(a,b){G(this,b,a,1)},this)}this.on("routestart route routechange routeend",this.bound(function(a,b){var c=a.type.substr(5);c=c?"route"+c.charAt(0).toUpperCase()+c.substr(1):"route";D(this.subroutes,function(a){a.trigger(c,b)})}));if(this.inited!==false){this.__init()}},__init:function(){this.inited=true;this.trigger("beforeInit");this.init();this.subroutes&&this.__initSub();this.trigger("init")},__initSub:function(){for(var a in this.subroutes){this.subroutes[a].__init()}},_exception:function(a,b){throw"["+this.uniqId+"."+a+"]: "+b},isActive:function(){return true},bound:function(a){if(typeof a==="string"){if(this[a]===e){this._exception("bound",a+" -- method not found")}a=this[a]}return p(this,a)},setRouteError:function(a){this._routeError=a;return this},getRouteError:function(){return this._routeError},init:d,loadData:d,loadDataOnce:null,destroy:d,getUrl:function(a,b,c){if(typeof a!="string"){c=b;b=a;a=this.id}return this.router.getUrl(a,b,c)},setTemplate:function(a){this.template=a;return this},setLoadedData:function(a){this.loadedData=a;return this},getLoadedData:function(){return this.loadedData},setData:function(a,b){if(b){E(this.data,a)}else{this.data=a}return this},getData:function(){return this.data},getRouteName:function(){return(this.parentRoute?this.parentRoute.getRouteName()+".":"")+(this.id||this.subrouteName||this.uniqId)},getParentRoute:function(){return this.router.get(this.parentRouteId)}});var C=B.extend({el:null,$el:$(),tag:null,tagName:null,className:"",parentNode:null,template:null,templateUrl:null,toggleEffect:"toggle",events:{},__init:function M(){var a=this.el,b=this.parentNode;this.inited=true;this.__init=d;if(a){if(typeof a==="string"){if(!b){b=this.getParentRouteNode()}a=$(a,b)}else if(a.nodeType){a=$(a)}this.setElement(a)}else if(this.tagName||this.tag){var c=this.tagName,f=this.className;if(this.tag){c=this.tag.match(/^(#[^\s]+)?\s*([^\.]+)\.?([^$]+)?/);if(c[1]){b=c[1]}if(c[3]){f=c[3].split(".").join(" ")}c=c[2]}this.el=i.createElement(c);this.$el=$(this.el);if(f){this.$el.addClass(f)}if(b){if($.isReady){this.$el.appendTo(b)}else{$(this.bound(function(){this.$el.appendTo(b)}))}}}else if(this.$el){this.$el[0]=e;this.$el.length=0}this.on("routestart routeend",this.bound(function(a,b){this._toggleView(a.type!="routeend",b)}));B.prototype.__init.call(this);D(this.subroutes,function(a){a.parentNode=this.el;a.__init()},this)},_toggleView:function(a,b){var c=C.toggleEffect[this.toggleEffect];this.$el&&c&&c.call(this,this.$el,a,b)},getParentRouteNode:function(){var a,b=this;while(b=b.getParentRoute()){a=b.el;if(a&&a.nodeType){return a}}return null},setElement:function(a){if(a){this.$el=a.jquery?a:$(a);this.delegateEvents()}else{this.undelegateEvents();this.$el[0]=e;this.$el.length=0}this.el=this.$el[0];return this},delegateEvents:function(a){this.undelegateEvents();D(a||this.events,function(a,b){b=b.match(/^([^\s]+)\s+(.+)/);this.$el.delegate(b[2],b[1]+".delegateEvents"+this.cid,this.bound(a))},this);return this},undelegateEvents:function(){if(this.$el&&this.$el.unbind){this.$el.unbind(".delegateEvents"+this.cid)}return this},$:function(a){var b=this.$el;if(a!==void 0){b=typeof a=="string"?b.find(a):$(a)}return b},getHtml:function(a){if(a){a=E({},this.getData(),a)}else{a=this.getData()}return this.template(a)},render:function(){var a=this.getHtml();if(typeof a==="string"){this.trigger("beforeRender");this.$el.empty().each(function(){this.innerHTML=a});this.trigger("render")}}});C.toggleEffect=function(a,b){if(b){C.toggleEffect[a]=b}return C.toggleEffect[a]};C.toggleEffect("fade",function(a,b){a[b?"fadeIn":"fadeOut"]()});C.toggleEffect("fadeIn",function(a){C.toggleEffect.fade(a,true)});C.toggleEffect("fadeOut",function(a){C.toggleEffect.fade(a,false)});C.toggleEffect("show",function(a,b){b&&C.toggleEffect.toggle(a,true)});C.toggleEffect("toggle",function(a,b){a.css("display",b?"":"none")});function D(a,b,c){if(a){var d=0,f=a.length;if(d in a&&f!==e){for(;d<f;d++){b.call(c,a[d],d,a)}}else{for(d in a){if(a.hasOwnProperty(d)){b.call(c,a[d],d,a)}}}}}function E(a,b){var c=arguments,d=1,e=c.length,f;a=a||{};for(;d<e;d++){b=c[d];if(b&&/object|function/.test(typeof b)){for(f in b){if(b.hasOwnProperty(f)){a[f]=b[f]}}}}return a}function F(a){var b={};if(typeof a==="string"){var c=a.split("&"),d=0,e=c.length,f,g,h;for(;d<e;d++){f=c[d].split("=");g=f[0];h=f[1]===void 0?"":f[1];try{h=decodeURIComponent(h)}catch(i){h=unescape(h)}if(g.length>0){if(b[g]===void 0){b[g]=h}else if(b[g]instanceof Array){b[g].push(h)}else{b[g]=[b[g],h]}}}}return b}function G(a,b,c,d,e){var f=a[b];a[b]=function(g){var h=d?a.router:a,i,j=(d?"#"+a.getRouteName()+".":"")+(e||b)+(c?"."+g:"");(!c||g!=="profile")&&u(h,j);i=f.apply(a,arguments);(!c||g!=="profile")&&v(h,j);return i
}}function H(a,b){var c=0,d=b.length,e=[],f,g,h,i=["#ccc","#666","#333","#c00","red"];for(;c<d;c++){f=b[c];g=b[c+1];if(g&&f[0]==g[0]&&g[2]){h=f[1]-b[c-1][1];if(h>.1){e.push({name:"<<between>>",dt:h})}e.push({name:f[0],dt:g[1]-f[1]});c++}else if(f[2]){e.dt+=f[1];e=e.parent}else{var j=[];j.parent=e;j.name=f[0];j.dt=-f[1];e.push(j);e=j}}function k(a){return a.toFixed(4)}function l(a,b){var c=0,d=a.length;if(d){console[b&&d>2&&console.groupCollapsed?"groupCollapsed":"group"](a.name,"~",k(a.dt));for(;c<d;c++){l(a[c],1)}console.groupEnd()}else{var e=k(a.dt);console.log("%c "+a.name+": "+e,"color: "+i[(e<1)+(e>1)+(e>4)+(e>8)+(e>10)]+(e>20?"; font-weight: bold":""))}}e[0].name="Pilot "+a;l(e[0])}function I(a,b,c){if(a instanceof RegExp){return a}if(q(a)){a="("+a.join("|")+")"}a=a.concat("/?").replace(/(\/\(|\(\/)/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\([^?].*?\)))?(\?)?(\*)?/g,function(a,d,e,f,g,h,i){b.push({name:f,optional:!!h,rule:c[f]});d=d||"";return""+(h?"":d)+"(?:"+(h?d:"")+(e||"")+(g||(e&&"([^/.]+?)"||"([^/]+?)"))+")"+(h||"")+(i?"(/*)?":"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)");return new RegExp("^"+a+"$","i")}function J(a,b,c,d){if(c){var e=1,f,g,h,i=b.exec(a.path);if(!i){return false}for(f=i.length;e<f;++e){g=c[e-1];h="string"==typeof i[e]?decodeURIComponent(i[e]):i[e];if(g){if(g.rule==null||g.rule(h,a)===true){d[g.name]=h}else{return false}}}return true}return b.test(a.path)}z.utils={each:D,extend:E,qs:{parse:F,stringify:$.param}};z.access={extend:function(a){E(this,a)}};z.Route=B;z.View=C;z.Class=x;z.Emitter=y;z.Request=A;z.create=function(a,b){if(!b){b=a;a={}}var d=function f(a,b,d){var e,g,h={id:a.id||++c,opts:{},path:b=b.replace(/\/\.?\/+/g,"/")},i=[h];h.opts.el=a.id?'[data-view-id="'+h.id+'"]':null;if(d){h.opts.parentRouteId=d.id;if(d.paramsRules){h.paramsRules=E({},d.paramsRules,h.paramsRules)}}if("function"===typeof a){h.opts.onRoute=function(b,c){var e=this.router.get(d.id);a.call(e,c)}}else{for(e in a){g=a[e];if("id"==e||"ctrl"==e){h[e]=g}else if("404"==e){h.dir=true;h[e]=f(g,b,h)[0]}else if(/^\.?\//.test(e)){h.dir=true;i.push.apply(i,f(g,b+e,h))}else{h.opts[e]=g}}}return i}(b,"/");a.el=d[0].opts.el||a.el;var e=new z(a);D(d,function(a){var b=a["404"];a.opts.__dir=a.dir;e.addRoute(a.id,a.path+(a.dir?"?*":""),a.ctrl?a.ctrl.fn?a.ctrl:C.extend(a.ctrl):C,a.opts);if(b){b.opts.__404=true;b.opts.isActive=function(a){var b=0,c=a.length,d,e;for(;b<c;b++){d=a[b];if(d.__404){e=d}else if(!d.__dir){return false}}return this===e};e.route(b.id,b.path+"*",b.ctrl||C,b.opts)}});return e};z.version="1.6.1";a.Pilot=z;if(typeof define==="function"&&define.amd){define("pilotjs/Pilot",[],function(){return z})}else{a["Pilot"]=z}if(a.ajs&&ajs.loaded){ajs.loaded("{pilot}Pilot")}})(window);define("pilotjs",["pilotjs/Pilot"],function(a){return a});define("views/Base",["require","toolkit/b-controls-group/b-controls-group","jquery","pilotjs","toolkit/b-toolkit/b-toolkit","mrg-counter","config"],function(require){"use strict";require("toolkit/b-controls-group/b-controls-group");var $=require("jquery"),a=require("pilotjs"),b=require("toolkit/b-toolkit/b-toolkit"),c=require("mrg-counter"),d=require("config");var e=true;var f=a.View.extend({el:"#view",singleton:true,init:function(){},onRoute:function(){var a=this.getData();if(a.title){document.title=a.title}if(e){this.setData(this.$el.data("model"));e=false}else{this.render()}setTimeout(function(){b["b-toolkit"].initInner(this.$el);this.onAfterInitInner()}.bind(this),0)},template:function(a){return $.fest("lego",a)},onAfterInitInner:function(){}});return f});define("views/login/view",["require","../Base","logger","mrg-counter","config","modules/ag","modules/counterParams","mrg-polyfills"],function(require){"use strict";var a=require("../Base"),b=require("logger").getScope("login"),c=require("mrg-counter"),d=require("config"),e=require("modules/ag"),f=require("modules/counterParams");require("mrg-polyfills");return a.extend({init:function(){var b;d.set("pageId","login");a.prototype.init.apply(this,arguments);var e=[];var g=document.querySelector('meta[name="SSR_TIME"]');if(g){var h=+g.content;e.push("ssr:"+h.toString())}var i=new Date-document.TS;e.push("agload:"+i.toString());var j=new Date-document.TS;e.push("frt:"+j.toString());c.radar({chain:[d.get("pageId"),"perf"],value:e.join(",")});c.radar({chain:[d.get("pageId"),"render"]});c.rb({chain:[d.get("pageId"),d.get("opener"),"render"],params:f.getParams(),eventType:"rb-show"});b=this.getErrno();if(b){c.radar({chain:[d.get("pageId"),"error",b]})}if(window.__AG&&window.__AG.then){window.__AG.then(function(a){if(a&&a.on){a.on("hide",this._afterPopupReopen.bind(this))}}.bind(this))}},onAfterInitInner:function(){this.bLogin=this.$el.find(".b-login").getBlock();this.bLogin.on("showSmsConfirm",this._onShowSmsConfirm.bind(this));this.bLogin.on("showSmsSend",this._onShowSmsSend.bind(this));this.bLogin.on("changeElemSizes",this._onChangeElemSizes.bind(this))},_afterPopupReopen:function(){this.bLogin.hideErrors(true)},_onShowSmsConfirm:function(a,b){this._openRecoveryPage("smsverify",b)},_onShowSmsSend:function(a,b){this._openRecoveryPage("smssend",b)},_onChangeElemSizes:function(){var a=document.getElementById("view");e.call("resize",{width:a.offsetWidth,height:a.offsetHeight})},_openRecoveryPage:function(a,b){var c=location.toString(),d=b.smsData||{};var e=this.$el.find('[data-bem="b-login"]').getBlock();var b=e.getData();var f=b.urls||{};var g=b.rbTestId;var h=b.rbSiteZone;localStorage.setItem("recovery.token",d.tokenId);var i="?email="+(d.email||"")+"&length="+(d.length||"0")+"&phonemask="+encodeURIComponent(d.phoneMask||"")+"&phonestr="+encodeURIComponent(d.phoneStr||"")+"&phoneval="+encodeURIComponent(d.phoneVal||"")+"&index="+(d.index||"0")+"&wait="+(d.wait||"0")+"&backUrl="+encodeURIComponent(c)+"&rb_test_id="+encodeURIComponent(g)+"&rb_sz="+encodeURIComponent(h)+"&success_redirect="+f.page+"&state="+a;window.location.href="/recovery/"+i},getErrno:function(){return this.request.query.errno}})});define("modules/auth",["require","config","Promise"],function(require){"use strict";var a=require("config"),b=require("Promise");return{relogin:function(c){return b.resolve($.ajax({url:a.get("urls").authOrigin+"/cgi-bin/auth",data:{mac:1,Login:c},dataType:"jsonp",cache:false}))}}});define("views/choice/view",["require","../Base","logger","modules/auth","mrg-counter","config","modules/ag","modules/counterParams"],function(require){"use strict";var a=require("../Base"),b=require("logger").getScope("login"),c=require("modules/auth"),d=require("mrg-counter"),e=require("config"),f=require("modules/ag"),g=require("modules/counterParams");return a.extend({init:function(){e.set("pageId","choice");var c=e.get("email");d.rb({chain:[e.get("pageId"),e.get("opener"),c?"email-render":"render"],params:g.getParams(),eventType:"rb-show"});a.prototype.init.apply(this,arguments);b.add("init choice page")},page:"choice",onAfterInitInner:function(){this.bChoice=this.$el.find(".b-choice").getBlock();this.bChoice.on("choiceItemActivate",this._onChoiceItemActivate.bind(this));this.bChoice.on("showLoginPage",this._onShowLoginPage.bind(this))},_onError:function(a){d.rb({chain:[e.get("pageId"),e.get("opener"),hasEmail?"email-ag-relogin-error":"ag-relogin-error"],params:g.getParams()})},_onChoiceItemActivate:function(a,b){c.relogin(b.email).then(function(){return f.call("auth",{successUrl:e.get("urls").page})})["catch"](this._onError.bind(this))},_onShowLoginPage:function(){location.assign(e.get("urls").loginPage+location.search.replace(/(\?|&)(email=[^\&]+&?)/,"$1").replace(/(\?|&)(focus=[^\&]+&?)/,"$1"))}})});define("routes",["require","./views/login/view","./views/choice/view"],function(require){"use strict";return{"login-page":{url:"/login",view:require("./views/login/view")},"user-choice-page":{url:"login/choice",view:require("./views/choice/view")}}});define("domReady/domReady",[],function(){"use strict";var a,b,c,d=typeof window!=="undefined"&&window.document,e=!d,f=d?document:null,g=[];function h(a){var b;for(b=0;b<a.length;b+=1){a[b](f)}}function i(){var a=g;if(e){if(a.length){g=[];h(a)}}}function j(){if(!e){e=true;if(c){clearInterval(c)}i()}}if(d){if(document.addEventListener){document.addEventListener("DOMContentLoaded",j,false);window.addEventListener("load",j,false)}else if(window.attachEvent){window.attachEvent("onload",j);b=document.createElement("div");try{a=window.frameElement===null}catch(k){}if(b.doScroll&&a&&window.external){c=setInterval(function(){try{b.doScroll();j()}catch(a){}},30)}}if(document.readyState==="complete"){j()}}function l(a){if(e){a(f)}else{g.push(a)}return l}l.version="2.0.1";l.load=function(a,b,c,d){if(d.isBuild){c(null)}else{l(c)}};return l});define("domReady",["domReady/domReady"],function(a){return a});define("main",["require","toolkit-common/jquery/__fest/jquery__fest","RPC/statuses/sdc","bundles/all/all","jquery","./modules/ag","Promise","toolkit/b-toolkit/b-toolkit","pilotjs","mrg-counter","./serverData","./routes","./modules/domains","./modules/providers","./modules/oauth","RPC","modules/counterParams","domReady","logger"],function(require){"use strict";require("toolkit-common/jquery/__fest/jquery__fest");require("RPC/statuses/sdc");require("bundles/all/all");var $=require("jquery"),a=require("./modules/ag"),b=require("Promise"),c=require("toolkit/b-toolkit/b-toolkit"),d=require("pilotjs"),e=require("mrg-counter"),f=require("./serverData"),g=require("./routes"),h=require("./modules/domains"),i=require("./modules/providers"),j=require("./modules/oauth"),k=require("RPC"),l=require("modules/counterParams"),m=require("domReady");var n,o=require("logger").getScope("app"),p;k.setup({version:1,baseUrl:"/api/",timeout:window.dev?2e5:1e4,htmlencode:false,sdcUrl:"https://auth.mail.ru/sdc"});p={counters:f.get("counters")||{},radars:{}};c.setup({template:"lego"});n=d.extend({init:function(){var c;for(c in g){this.route(c,g[c].url,g[c].view)}b.all([h.load().then(i.load).then(j.load),a.load(),e.load(p)]).then(function(){m(function(){$.fest("lego",{},this.start.bind(this),{basePath:f.get("urls").fest});$(document).bind("toolkitclick ui-abstract-action",function(a,b){if(f.get("opener")){b.chain.unshift(f.get("opener"))}if(f.get("pageId")){b.chain.unshift(f.get("pageId"))}b.params=l.getParams();e.rb(b)});o.add("started")}.bind(this))}.bind(this),function(){o.add("init error")});window.onerror=this.onError.bind(this)},onError:function(){e.rb({chain:[f.get("pageId"),f.get("opener"),"error"],params:l.getParams()})}});return new n({el:$("#view"),useHistory:true})});"use strict";var __window=Function("return this")();__window.fest={};__window.fest["lego"]=__window["lego"]=function(a){"use strict";var b=this,c="",d=[],e,f=[],g,h,i,j,k,l="",m={},n,o,p="",q="",r="",s=/[&<>"]/g,t=/[&<>"]/,u={area:true,base:true,br:true,col:true,command:true,embed:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,wbr:true},v=[],w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},x=/[\\'"\/\n\r\t\b\f<>]/g,y=/[\\'"\/\n\r\t\b\f<>]/,z={'"':'\\"',"\\":"\\\\","/":"\\/","\n":"\\n","\r":"\\r","	":"\\t","\b":"\\b","\f":"\\f","'":"\\'","<":"\\u003C",">":"\\u003E"},i18n=b&&typeof b.i18n==="function"?b.i18n:function(a){return a},A;if(typeof __fest_error==="undefined"){A=typeof console!=="undefined"&&console.error?function(){return Function.prototype.apply.call(console.error,console,arguments)}:function(){}}else{A=__fest_error}function B(a){A(a+'\nin block "'+r+'" at line: '+q+"\nfile: "+p)}function C(a){return w[a]}function D(a){return z[a]}function E(a,b){for(var c in b)if(b.hasOwnProperty(c))a[c]=b[c]}function F(a){a.param=true;return a}function G(a,c,d){if(d)for(var e in c)if(typeof c[e]=="function"&&c[e].param)c[e]=c[e]();return a.call(b,c)}function H(a){if(typeof a==="string"){if(y.test(a))return a.replace(x,D)}else if(typeof a==="undefined")return"";return a}function I(a){if(typeof a==="string"){if(t.test(a))return a.replace(s,C)}else if(typeof a==="undefined")return"";return a}var J=a;(function(a){var b=a;(function(a){m["class-attribute"]=function(a){var b="";b+=' class="';try{b+=I(a.baseClass)}catch(c){B(c.message+"5")}try{b+=I(a.mods&&a.mods.length?" "+a.baseClass+"_"+a.mods.join(" "+a.baseClass+"_"):"")}catch(c){B(c.message+"6")}try{b+=I(a.classes&&a.classes.length?" "+a.classes.join(" "):"")}catch(c){B(c.message+"7")}b+='"';return b}})(a);(function(a){m["b-userpic"]=function(a){var b="";try{f[0]=I(a.pic)}catch(c){f[0]="";B(c.message)}b+='<div class="b-userpic b-userpic_small" style="'+f[0]+'"></div>';return b}})(a);(function(a){m.ico=function(a){var b="";b+='<i data-bem="ico" class="ico';try{h=a.mods}catch(c){h=false;B(c.message)}if(h){b+=" ";try{b+=I("ico_"+a.mods.join(" ico_"))}catch(c){B(c.message+"11")}}try{h=a.classes}catch(c){h=false;B(c.message)}if(h){b+=" ";try{b+=I(a.classes.join(" "))}catch(c){B(c.message+"16")}}b+='"></i>';return b}})(a);(function(a){m["b-list__item__content"]=function(a){var b="";b+='<div class="b-list__item__content"';try{h=a.dataIndex!==void 0}catch(c){h=false;B(c.message)}if(h){b+=' data-index="';try{g=a.dataIndex}catch(c){g="";B(c.message)}b+=g;b+='"'}b+=">";try{h=a.block}catch(c){h=false;B(c.message)}if(h){try{g=a.block}catch(c){g="";B(c.message)}n={};try{n=a}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}try{h=a.html}catch(c){h=false;B(c.message)}if(h){try{b+=a.html}catch(c){B(c.message+"14")}}b+="</div>";return b};m["b-list__item"]=function(a){var b="";try{f[0]=I(a.mods?" b-list__item_"+a.mods.join(" b-list__item_"):"")}catch(c){f[0]="";B(c.message)}b+='<div class="b-list__item b-list__list__item '+f[0]+'">';try{h=a.href}catch(c){h=false;B(c.message)}if(h){try{f[0]=I(a.href)}catch(c){f[0]="";B(c.message)}b+='<a class="b-list__item__link" href="'+f[0]+'"';g="props-attribute";n={};try{n=a.props}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+=">";g="b-list__item__content";n={};try{n=a}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</a>"}try{h=!a.href}catch(c){h=false;B(c.message)}if(h){g="b-list__item__content";n={};try{n=a}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}try{h=a.removeHref}catch(c){h=false;B(c.message)}if(h){try{f[0]=I(a.removeHref)}catch(c){f[0]="";B(c.message)}b+='<a class="b-list__item__remove" href="'+f[0]+'">';g="ico";n={};try{n={mods:["settings","system_close"]}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</a>"}b+="</div>";return b}})(a);(function(a){var b=a;m["b-list"]=function(a){var b="";try{f[0]=I((a.mods&&a.mods.length?" b-list_"+a.mods.join(" b-list_"):"")+(a.shortcut?"js-"+a.shortcut:""))}catch(c){f[0]="";B(c.message)}try{f[1]=I(a.items.length?"":"b-list_noborder")}catch(c){f[1]="";B(c.message)}b+='<div class="b-list '+f[0]+""+f[1]+'" data-bem="';try{b+=I("b-list")}catch(c){B(c.message+"5")}b+='" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"8")}b+='"';var d,e,j;try{j=a.props||{}}catch(c){i={};B(c.message)}for(d in j){e=j[d];try{g=d}catch(c){g="";B(c.message)}if(g!==""){b+=" "+g+'="';try{b+=I(e)}catch(c){B(c.message+"14")}b+='"'}}b+='><div class="b-list__list">';try{h=a.mods&&a.mods.indexOf("easy")!==-1}catch(c){h=false;B(c.message)}if(h){var l,o,p,q;try{q=a.items||[];p=q.length}catch(c){q=[];p=0;B(c.message)}for(l=0;l<p;l++){o=q[l];try{g=o.block}catch(c){g="";B(c.message)}n={};try{n=o}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}}else{var l,o,r,s;try{s=a.items||[];r=s.length}catch(c){s=[];r=0;B(c.message)}for(l=0;l<r;l++){o=s[l];g="b-list__item";n={};try{n=o}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}}b+="</div></div>";return b}})(a);(function(a){m["b-dropdown"]=function(a){var b="";try{var c=0;var d=function(){return c++};a.ctrl=a.ctrl||{}}catch(e){B(e.message)}try{f[0]=I(a.bem||"b-dropdown")}catch(e){f[0]="";B(e.message)}b+='<div data-bem="'+f[0]+'"';try{h=a.mnemo}catch(e){h=false;B(e.message)}if(h){b+=' data-mnemo="';try{b+=I(a.mnemo)}catch(e){B(e.message+"15")}b+='"'}b+=' data-model="';try{b+=I(JSON.stringify(a))}catch(e){B(e.message+"19")}b+='" class="b-dropdown';try{h=a.mods}catch(e){h=false;B(e.message)}if(h){b+=" ";try{b+=I("b-dropdown_"+a.mods.join(" b-dropdown_"))}catch(e){B(e.message+"26")}}try{h=a.classes}catch(e){h=false;B(e.message)}if(h){b+=" ";try{b+=I(a.classes.join(" "))}catch(e){B(e.message+"31")}}b+='"';try{h=a.mods&&a.mods.indexOf("disabled")!=-1}catch(e){h=false;B(e.message)}if(h){b+=' aria-disabled="disabled"'}try{h=a.group}catch(e){h=false;B(e.message)}if(h){b+=' data-group="';try{b+=I(a.group)}catch(e){B(e.message+"41")}b+='"'}try{h=a.id!=null}catch(e){h=false;B(e.message)}if(h){b+=' id="';try{b+=I(a.id)}catch(e){B(e.message+"47")}b+='"'}try{h=a.blockName}catch(e){h=false;B(e.message)}if(h){b+=' data-blockid="';try{b+=I(a.blockName)}catch(e){B(e.message+"53")}b+='"'}b+='><div data-mnemo="ctrl"';g="class-attribute";n={};try{n={baseClass:"b-dropdown__ctrl",classes:a.ctrl&&a.ctrl.shortcut&&!a.ctrl.block?["js-shortcut"]:null}}catch(e){B(e.message)}k=m[g];if(k)b+=G(k,n,false);try{var i=(!a.ctrl||a.ctrl.title==null)&&typeof lang=="object"?lang["b-dropdown"].titles[a.group]||lang["b-dropdown"][a.group]:a.ctrl.title}catch(e){B(e.message)}try{h=i}catch(e){h=false;B(e.message)}if(h){b+=' title="';try{b+=I(i)}catch(e){B(e.message+"74")}b+='"'}try{h=a.ctrl&&a.ctrl.shortcut&&!a.ctrl.block}catch(e){h=false;B(e.message)}if(h){b+=' data-shortcut="';try{b+=I(a.ctrl.shortcut)}catch(e){B(e.message+"79")}b+='"'}b+=">";try{h=a.ctrl&&a.ctrl.block}catch(e){h=false;B(e.message)}if(h){try{g=a.ctrl.block}catch(e){g="";B(e.message)}n={};try{n=a.ctrl}catch(e){B(e.message)}k=m[g];if(k)b+=G(k,n,false)}try{h=!a.ctrl||!a.ctrl.block}catch(e){h=false;B(e.message)}if(h){try{h=a.ctrl&&a.ctrl.icon}catch(e){h=false;B(e.message)}if(h){g="ico";n={};try{n={mods:[].concat(a.ctrl.icon.split("_").shift(),a.ctrl.icon)}}catch(e){B(e.message)}k=m[g];if(k)b+=G(k,n,false)}try{h=a.img}catch(e){h=false;B(e.message)}if(h){b+='<div class="b-dropdown__ctrl__image js-image"></div>'}b+='<span class="b-dropdown__ctrl__text"';try{h=a.ctrl&&a.ctrl.icon}catch(e){h=false;B(e.message)}if(h){b+=' class="b-dropdown__text b-dropdown__text_pad"'}b+=">";try{b+=I((!a.ctrl||a.ctrl.text==null)&&typeof lang=="object"?lang["b-dropdown"][a.group]:a.ctrl.text)}catch(e){B(e.message+"105")}b+="</span>"}b+='<div class="b-dropdown__arrow"></div></div><div class="b-dropdown__list" style="display: none;">';try{h=a.items}catch(e){h=false;B(e.message)}if(h){g="b-dropdown__list";n={};try{n={group:a.group,items:a.items,num:d}}catch(e){B(e.message)}k=m[g];if(k)b+=G(k,n,false)}b+="</div></div>";return b}})(a);(function(a){m["b-dropdown__list"]=function(a){var b="";var c,d,e,f;try{f=a.items||[];e=f.length}catch(i){f=[];e=0;B(i.message)}for(c=0;c<e;c++){d=f[c];try{if(d&&d instanceof Object){var j=typeof lang=="object"&&lang["b-dropdown"][a.group+"."]||{};d.text=d.text==null?j[d.name]:j[d.text]||d.text}}catch(i){B(i.message)}try{h=d=="hr"||d.hr}catch(i){h=false;B(i.message)}if(h){b+='<div class="b-dropdown__list__hr"></div>'}else{try{h=!d||d.hidden}catch(i){h=false;B(i.message)}if(h){}else{try{h=d.block}catch(i){h=false;B(i.message)}if(h){b+='<div data-bem="b-dropdown__list__item"';try{h=d.id!=null}catch(i){h=false;B(i.message)}if(h){b+=' data-id="';try{b+=I(d.id)}catch(i){B(i.message+"23")}b+='"'}try{h=d.name}catch(i){h=false;B(i.message)}if(h){b+=' data-name="';try{b+=I(d.name)}catch(i){B(i.message+"27")}b+='"'}b+=' class="b-dropdown__list__item';try{h=d.disabled}catch(i){h=false;B(i.message)}if(h){b+=" b-dropdown__list__item_disabled"}try{h=d.mods}catch(i){h=false;B(i.message)}if(h){b+=" ";try{b+=I("b-dropdown__list__item_"+d.mods.join(" b-dropdown__list__item_"))}catch(i){B(i.message+"40")}}b+='"';try{h=d.disabled}catch(i){h=false;B(i.message)}if(h){b+=' aria-disabled="disabled"'}b+=">";try{g=d.block}catch(i){g="";B(i.message)}n={};try{n=d}catch(i){B(i.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>"}else{try{h=d.group}catch(i){h=false;B(i.message)}if(h){b+='<div class="b-dropdown__group';try{h=d.mods}catch(i){h=false;B(i.message)}if(h){b+=" ";try{b+=I("b-dropdown__group_"+d.mods.join(" b-dropdown__group_"))}catch(i){B(i.message+"61")}}b+='">';var l,o,p,q;try{q=d.items||[];p=q.length}catch(i){q=[];p=0;B(i.message)}for(l=0;l<p;l++){o=q[l];try{o.num=a.num?a.num():c}catch(i){B(i.message)}g="b-dropdown__item";n={};try{n=o}catch(i){B(i.message)}k=m[g];if(k)b+=G(k,n,false)}b+="</div>"}else{try{d.num=a.num?a.num():c}catch(i){B(i.message)}g="b-dropdown__item";n={};try{n=d}catch(i){B(i.message)}k=m[g];if(k)b+=G(k,n,false)}}}}}return b}})(a);(function(a){m["b-dropdown__item"]=function(a){var b="";b+='<a data-bem="b-dropdown__list__params"';try{h=a.id!=null}catch(c){h=false;B(c.message)}if(h){b+=' data-id="';try{b+=I(a.id)}catch(c){B(c.message+"7")}b+='"'}try{h=a.href!==void 0}catch(c){h=false;B(c.message)}if(h){b+=' href="';try{g=a.href}catch(c){g="";B(c.message)}b+=g;b+='"'}try{h=a.target!==void 0}catch(c){h=false;B(c.message)}if(h){b+=' target="';try{g=a.target}catch(c){g="";B(c.message)}b+=g;b+='"'}try{h=a.num!==void 0}catch(c){h=false;B(c.message)}if(h){b+=' data-num="';try{g=a.num}catch(c){g="";B(c.message)}b+=g;b+='"'}try{h=a.name}catch(c){h=false;B(c.message)}if(h){b+=' data-name="';try{b+=I(a.name||a.value)}catch(c){B(c.message+"25")}b+='"'}try{h=a.value}catch(c){h=false;B(c.message)}if(h){b+=' data-value="';try{b+=I(a.value)}catch(c){B(c.message+"31")}b+='"'}try{h=a.code}catch(c){h=false;B(c.message)}if(h){b+=' data-code="';try{b+=I(a.code)}catch(c){B(c.message+"37")}b+='"'}try{h=a.image}catch(c){h=false;B(c.message)}if(h){b+=' data-image="';try{b+=I(a.image)}catch(c){B(c.message+"42")}b+='"'}try{h=a.color}catch(c){h=false;B(c.message)}if(h){b+=' style="';try{g="color: "+a.color}catch(c){g="";B(c.message)}b+=g;b+='" data-color="';try{g=a.color}catch(c){g="";B(c.message)}b+=g;b+='"'}try{h=a.text}catch(c){h=false;B(c.message)}if(h){b+=' data-text="';try{b+=I(a.text)}catch(c){B(c.message+"52")}b+='"'}try{h=a["sort"]}catch(c){h=false;B(c.message)}if(h){b+=' aria-sort="';try{b+=I(a["sort"])}catch(c){B(c.message+"58")}b+='"'}b+=' class="b-dropdown__list__item';try{h=a.disabled}catch(c){h=false;B(c.message)}if(h){b+=" b-dropdown__list__item_disabled"}try{h=a.parent_id!=null}catch(c){h=false;B(c.message)}if(h){b+=" b-dropdown__list__item_pad"}try{h=a.active}catch(c){h=false;B(c.message)}if(h){b+=" b-dropdown__list__item_active"}try{h=a.mods}catch(c){h=false;B(c.message)}if(h){b+=" ";try{b+=I("b-dropdown__list__item_"+a.mods.join(" b-dropdown__list__item_"))}catch(c){B(c.message+"81")}}try{h=a.cssClass}catch(c){h=false;B(c.message)}if(h){b+=" ";try{b+=I(a.cssClass)}catch(c){B(c.message+"86")}}b+='"';try{h=a.disabled}catch(c){h=false;B(c.message)}if(h){b+=' aria-disabled="disabled"'}try{h=a.style}catch(c){h=false;B(c.message)}if(h){b+=' style="';try{b+=a.style}catch(c){B(c.message+"97")}b+='"'}b+=">";try{h=a.icon}catch(c){h=false;B(c.message)}if(h){g="ico";n={};try{n={mods:[a.icon.split("_")[0],a.icon]}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}try{h=a.image}catch(c){h=false;B(c.message)}if(h){try{f[0]=I(a.image)}catch(c){f[0]="";B(c.message)}b+='<span class="b-dropdown__item__image" style="background-image: url('+f[0]+');"></span>'}try{h=a.checked}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-checkbox__checkmark"></div>'}try{h=a.html!=null}catch(c){h=false;B(c.message)}if(h){try{b+=a.html}catch(c){B(c.message+"117")}}else{try{var d=a.text,e=a.level||0}catch(c){B(c.message)}b+='<span class="b-dropdown__list__item__text" style="padding-left:';try{b+=I(e*10)}catch(c){B(c.message+"128")}b+='px;">';try{h=a.unsafe}catch(c){h=false;B(c.message)}if(h){try{b+=d}catch(c){B(c.message+"134")}}else{try{b+=I(d)}catch(c){B(c.message+"137")}}b+="</span>";try{h=a.shortcuthint}catch(c){h=false;B(c.message)}if(h){b+='<span class="b-dropdown__list__item__hint">';try{b+=I(a.shortcuthint)}catch(c){B(c.message+"145")}b+="</span>"}}b+="</a>";return b}})(a);(function(a){m["b-dropdown__item-caption"]=function(a){var b="";b+='<div class="b-dropdown__item-caption">';try{b+=I(a.name)}catch(c){B(c.message+"4")}b+=":</div>";return b}})(a);(function(a){m["b-dropdown__item-correspondent"]=function(a){var b="";b+="<div";try{h=window.patron&&patron.ContactInformerInLetter}catch(c){h=false;B(c.message)}if(h){b+=' class="js-dropdown-item js-contact-informer b-dropdown__item-correspondent"'}else{b+=' class="js-dropdown-item b-dropdown__item-correspondent"'}try{h=a.attributes}catch(c){h=false;B(c.message)}if(h){try{var d=[];Object.keys(a.attributes).forEach(function(b){d.push({name:b,value:a.attributes[b]})})}catch(c){B(c.message)}var e,f,i,j;try{j=d||[];i=j.length}catch(c){j=[];i=0;B(c.message)}for(e=0;e<i;e++){f=j[e];try{g=f.name}catch(c){g="";B(c.message)}if(g!==""){b+=" "+g+'="';try{b+=I(f.value)}catch(c){B(c.message+"29")}b+='"'}}}b+='><div class="b-dropdown__item-correspondent__pic">';g="b-userpic";n={};try{n=a}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+='</div><div class="b-dropdown__item-correspondent__info ';try{h=!a.name}catch(c){h=false;B(c.message)}if(h){b+="b-dropdown__item-correspondent__info_center"}b+='"';try{h=a.title}catch(c){h=false;B(c.message)}if(h){b+=' title="';try{b+=I(a.title)}catch(c){B(c.message+"51")}b+='"'}b+=">";try{h=a.name}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-dropdown__item-correspondent__name">';try{b+=a.name}catch(c){B(c.message+"57")}b+='</div><div class="b-dropdown__item-correspondent__text">';try{b+=a.email}catch(c){B(c.message+"59")}b+="</div>"}else{b+='<div class="b-dropdown__item-correspondent__name">';try{b+=a.email}catch(c){B(c.message+"64")}b+="</div>"}b+="</div></div>";return b}})(a);(function(a){m["b-panel__header"]=function(a){var b="";b+='<div class="b-panel__header">';try{h=a.image}catch(c){h=false;B(c.message)}if(h){try{f[0]=I(a.image)}catch(c){f[0]="";B(c.message)}b+='<img class="b-panel__header__image" src="'+f[0]+'"/>'}try{h=a.nav}catch(c){h=false;B(c.message)}if(h){try{f[0]=I(a.nav.href)}catch(c){f[0]="";B(c.message)}try{f[1]=I(a.nav.name)}catch(c){f[1]="";B(c.message)}b+='<a class="b-panel__header__nav" href="'+f[0]+'" data-name="'+f[1]+'">';try{b+=a.nav.text}catch(c){B(c.message+"9")}b+="</a>"}b+='<span class="b-panel__header__text">';try{b+=a.title}catch(c){B(c.message+"12")}b+="</span></div>";return b}})(a);(function(a){m["b-panel__header"]=function(a){var b="";b+='<div class="b-panel__header">';try{h=a.image}catch(c){h=false;B(c.message)}if(h){try{f[0]=I(a.image)}catch(c){f[0]="";B(c.message)}b+='<img class="b-panel__header__image" src="'+f[0]+'"/>'}try{h=a.nav}catch(c){h=false;B(c.message)}if(h){try{f[0]=I(a.nav.href)}catch(c){f[0]="";B(c.message)}try{f[1]=I(a.nav.name)}catch(c){f[1]="";B(c.message)}b+='<a class="b-panel__header__nav" href="'+f[0]+'" data-name="'+f[1]+'">';try{b+=a.nav.text}catch(c){B(c.message+"9")}b+="</a>"}b+='<span class="b-panel__header__text">';try{b+=a.title}catch(c){B(c.message+"12")}b+="</span></div>";return b}})(a);(function(a){m.btn=function(a){var b="";try{h=a.items}catch(c){h=false;B(c.message)}if(h){b+="<div";try{h=a.role}catch(c){h=false;B(c.message)}if(h){b+=' role="';try{b+=I(a.role+"")}catch(c){B(c.message+"10")}b+='"'}try{h=a.mods&&a.mods.includes("disabled")}catch(c){h=false;B(c.message)}if(h){b+=' aria-disabled="disabled"'}try{h=a.name}catch(c){h=false;B(c.message)}if(h){b+=' data-name="';try{b+=I(a.name)}catch(c){B(c.message+"19")}b+='"'}try{h=a.group}catch(c){h=false;B(c.message)}if(h){b+=' data-group="';try{b+=I(a.group)}catch(c){B(c.message+"25")}b+='"'}try{h=a.title}catch(c){h=false;B(c.message)}if(h){b+=' title="';try{b+=I(a.title)}catch(c){B(c.message+"31")}b+='"'}try{h=a.id!=null}catch(c){h=false;B(c.message)}if(h){b+=' id="';try{b+=I(a.id)}catch(c){B(c.message+"37")}b+='"'}b+=">";var d,e,j,l;try{l=a.items||[];j=l.length}catch(c){l=[];j=0;B(c.message)}for(d=0;d<j;d++){e=l[d];try{h=e}catch(c){h=false;B(c.message)}if(h){try{e.mods=(e.mods||[]).concat(a.mods||[],"grouped");if(!d){e.mods.push("grouped_first")}else if(a.items.length-d==1){e.mods.push("grouped_last")}}catch(c){B(c.message)}try{g=e.block||"btn"}catch(c){g="";B(c.message)}n={};try{n=e}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}}b+="</div>"}else{try{var p=a.text==null&&typeof lang=="object"?lang.get("btn."+a.name):a.text;var q=a.href?"a":a.container||"button";var r=a.tooltip;var s=a.iconPosition||"left"}catch(c){B(c.message)}try{o=q;if(typeof o!=="string"){B("Element name must be a string");o="div"}}catch(c){o="div";B(c.message)}v.push(o);b+="<"+o;b+=' data-bem="btn" data-blockid="btn" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"75")}b+='"';try{h=a.tabindex}catch(c){h=false;B(c.message)}if(h){b+=' tabindex="';try{b+=I(a.tabindex)}catch(c){B(c.message+"79")}b+='"'}try{h=a.id!=null}catch(c){h=false;B(c.message)}if(h){b+=' data-id="';try{b+=I(a.id)}catch(c){B(c.message+"85")}b+='"'}b+=' class="btn';try{b+=I(a.mods?" btn_"+a.mods.join(" btn_")+" ":" ")}catch(c){B(c.message+"91")}try{b+=I(a.classes)}catch(c){B(c.message+"92")}try{h=a.shortcut}catch(c){h=false;B(c.message)}if(h){b+=" js-shortcut"}b+='"';try{h=a.type}catch(c){h=false;B(c.message)}if(h){b+=' type="';try{b+=I(a.type)}catch(c){B(c.message+"101")}b+='"'}try{h=a.href}catch(c){h=false;B(c.message)}if(h){b+=' href="';try{b+=I(a.href)}catch(c){B(c.message+"107")}b+='"';try{h=a.target}catch(c){h=false;B(c.message)}if(h){b+=' target="';try{b+=I(a.target)}catch(c){B(c.message+"112")}b+='"'}}try{h=a.rel}catch(c){h=false;B(c.message)}if(h){b+=' rel="';try{b+=I(a.rel)}catch(c){B(c.message+"119")}b+='"'}try{h=a.name}catch(c){h=false;B(c.message)}if(h){b+=' data-name="';try{b+=I(a.name)}catch(c){B(c.message+"125")}b+='"'}try{h=a.title}catch(c){h=false;B(c.message)}if(h){b+=' title="';try{b+=I(a.title)}catch(c){B(c.message+"131")}b+='"'}try{h=a.shortcut}catch(c){h=false;B(c.message)}if(h){b+=' data-shortcut="';try{b+=I(a.shortcut)}catch(c){B(c.message+"137")}b+='"'}try{h=a.mods&&a.mods.includes("disabled")}catch(c){h=false;B(c.message)}if(h){b+=' aria-disabled="disabled"'}try{h=a.mods&&a.mods.includes("disabled")}catch(c){h=false;B(c.message)}if(h){b+=' disabled="disabled"'}try{h=a.additionalAttrs}catch(c){h=false;B(c.message)}if(h){var t,w,x;try{x=a.additionalAttrs||{}}catch(c){i={};B(c.message)}for(t in x){w=x[t];try{g=t}catch(c){g="";B(c.message)}if(g!==""){b+=" "+g+'="';try{b+=I(w)}catch(c){B(c.message+"151")}b+='"'}}}o=v[v.length-1];b+=o in u?"/>":">";try{h=a.icon}catch(c){h=false;B(c.message)}if(h){try{var y=a.icon.split("_");y.pop();for(var z=1;z<y.length;z++){var A=z;while(--A>=0){y[z]=y[A]+"_"+y[z]}}y.unshift(a.icon)}catch(c){B(c.message)}}try{h=a.icon&&s=="left"}catch(c){h=false;B(c.message)}if(h){g="ico";n={};try{n={mods:y}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}try{h=r}catch(c){h=false;B(c.message)}if(h){b+='<div class="btn__tooltip"><div class="btn__tooltip__text">';try{b+=I(r)}catch(c){B(c.message+"181")}b+="</div></div>"}try{h=a.ctrl}catch(c){h=false;B(c.message)}if(h){try{g=a.ctrl.block}catch(c){g="";B(c.message)}n={};try{n=a.ctrl}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}else{try{h=p}catch(c){h=false;B(c.message)}if(h){try{f[0]=I(a.icon?" btn__text_pad":"")}catch(c){f[0]="";B(c.message)}b+='<span class="btn__text'+f[0]+'">';try{b+=I(p)}catch(c){B(c.message+"193")}b+="</span>"}else{}}try{h=a.icon&&s=="right"}catch(c){h=false;B(c.message)}if(h){g="ico";n={};try{n={mods:y}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}try{h=a.arrow}catch(c){h=false;B(c.message)}if(h){g="ico";n={};try{n={mods:["control_arrow_down"]}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}o=v[v.length-1];if(!(o in u)){b+="</"+o+">"}v.pop()}return b}})(a);(function(a){m["b-controls"]=function(a){var b="";b+="<div";g="class-attribute";n={};try{n={mods:a.mods,baseClass:"b-controls"}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+=">";var d,e,f,h;try{h=a.btn||[];f=h.length}catch(c){h=[];f=0;B(c.message)}for(d=0;d<f;d++){e=h[d];g="btn";n={};try{n=e}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}b+="</div>";return b}})(a);(function(a){m["b-panel"]=function(a){var b="";try{f[0]=I(a.mods&&a.mods.length?" b-panel_"+a.mods.join(" b-panel_"):"")
}catch(c){f[0]="";B(c.message)}try{f[1]=I(a.mnemo)}catch(c){f[1]="";B(c.message)}b+='<div class="b-panel '+f[0]+'" data-mnemo="'+f[1]+'" data-bem="b-panel" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"8")}b+='"><div class="b-panel__wrapper">';try{h=a.close}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-panel__close" data-name="close"><div class="b-panel__close__icon"></div></div>'}try{h=a.header}catch(c){h=false;B(c.message)}if(h){g="b-panel__header";n={};try{n=a.header}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}try{h=a.error}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-panel__error">';try{b+=a.error}catch(c){B(c.message+"22")}b+="</div>"}try{h=a.comment}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-panel__content"><p class="b-panel__content__comment">';try{b+=a.comment}catch(c){B(c.message+"28")}b+="</p></div>"}try{h=a.desc}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-panel__content"><p class="b-panel__content__desc">';try{b+=a.desc}catch(c){B(c.message+"35")}b+="</p></div>"}try{h=a.view&&a.content}catch(c){h=false;B(c.message)}if(h){try{g=a.view}catch(c){g="";B(c.message)}n={};try{n=a.content}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}try{h=a.footer}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-panel__footer">';try{h=a.footer.block}catch(c){h=false;B(c.message)}if(h){try{g=a.footer.block}catch(c){g="";B(c.message)}n={};try{n=a.footer.params}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}else{g="b-controls";n={};try{n=a.footer}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}b+="</div>"}b+="</div></div>";return b}})(a);(function(a){var b=a;m["b-input"]=function(a){var b="";try{var c=[];a.cssClass=a.cssClass||[];a.mods=a.mods||[];c=c.concat(a.cssClass);if(a.eltype==="textarea"){a.mods.push("textarea")}if(a.shortcut){c.push("js-"+a.shortcut)}}catch(d){B(d.message)}try{o=a.eltype?a.eltype:"input";if(typeof o!=="string"){B("Element name must be a string");o="div"}}catch(d){o="div";B(d.message)}v.push(o);b+="<"+o;g="class-attribute";n={};try{n={baseClass:"b-input",mods:a.mods,classes:c}}catch(d){B(d.message)}k=m[g];if(k)b+=G(k,n,false);b+=' data-bem="';try{b+=I(a.block?a.block:"b-input")}catch(d){B(d.message+"31")}b+='" data-model="';try{b+=I(JSON.stringify(a))}catch(d){B(d.message+"34")}b+='"';try{h=a.blockid}catch(d){h=false;B(d.message)}if(h){b+=' data-blockid="';try{b+=I(a.blockid)}catch(d){B(d.message+"38")}b+='"'}try{h=a.mods&&a.mods.includes("readonly")}catch(d){h=false;B(d.message)}if(h){b+=' readonly="readonly"'}try{h=a.mods&&a.mods.includes("disabled")}catch(d){h=false;B(d.message)}if(h){b+=' disabled="disabled"'}try{h=a.prop&&a.prop.type==="number"}catch(d){h=false;B(d.message)}if(h){b+=' pattern="[0-9]*"'}var e,f,j;try{j=a.props||{}}catch(d){i={};B(d.message)}for(e in j){f=j[e];try{h=f}catch(d){h=false;B(d.message)}if(h){try{g=e}catch(d){g="";B(d.message)}if(g!==""){b+=" "+g+'="';try{b+=I(f)}catch(d){B(d.message+"55")}b+='"'}}}o=v[v.length-1];b+=o in u?"/>":">";try{h=a.eltype==="textarea"&&a.props.value!==undefined}catch(d){h=false;B(d.message)}if(h){try{b+=I(a.props.value)}catch(d){B(d.message+"62")}}o=v[v.length-1];if(!(o in u)){b+="</"+o+">"}v.pop();return b}})(a);(function(a){m["b-select"]=function(a){var b="";try{var c=a.blockid||a.block||"b-select",d,e=[];a.props=a.props||{};a.ctrl=a.ctrl||{};if(a.shortcut){e.push("js-"+a.shortcut)}if(a.cssClass){e.push(a.cssClass)}var i={baseClass:"b-select",mods:a.mods,classes:e};if(a.items){a.items.forEach(function(a){if(a.selected){d=a}});if(!d&&!a.props.placeholder){d=a.items[0]}}if(a.props.placeholder){a.ctrl.text=a.props.placeholder}}catch(j){B(j.message)}b+="<div";g="class-attribute";n={};try{n=i}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false);b+=' data-bem="';try{b+=I("b-select")}catch(j){B(j.message+"50")}b+='" data-blockid="';try{b+=I(c)}catch(j){B(j.message+"53")}b+='" data-model="';try{b+=I(JSON.stringify(a))}catch(j){B(j.message+"56")}b+='">';try{if(!a.props){a.props={}}}catch(j){B(j.message)}try{f[0]=I(a.props.name)}catch(j){f[0]="";B(j.message)}b+='<input type="hidden" name="'+f[0]+'" class="b-select__input"';try{h=a.props.name}catch(j){h=false;B(j.message)}if(h){b+=' name="';try{b+=I(a.props.name)}catch(j){B(j.message+"70")}b+='"'}try{h=d}catch(j){h=false;B(j.message)}if(h){b+=' value="';try{b+=I(d.value)}catch(j){B(j.message+"75")}b+='"'}b+="/>";try{a.items=(a.items||[]).map(function(a){if(!a.name){a.name="item"}return a});var l=a;a=Object.assign({},l);a.blockName="dropdown";if(a.props.multiselect){var o=a.items;a.items=[{group:true,items:o}];if(a.props.selectAll){a.items.push({hr:true},{name:"toggleall",text:a.props.selectAll})}}if(d){a.ctrl=d}}catch(j){B(j.message)}b+='<div class="b-select__dropdown">';g="b-dropdown";n={};try{n=a}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false);b+='</div><div class="b-select__dropdown-fallback"><select class="b-select__list"';try{h=a.props.name}catch(j){h=false;B(j.message)}if(h){b+=' name="';try{b+=I(a.props.name)}catch(j){B(j.message+"137")}b+='"'}try{h=a.props.multiselect}catch(j){h=false;B(j.message)}if(h){b+=' multiple="multiple"'}b+=">";var p,q,r,s;try{s=a.items||[];r=s.length}catch(j){s=[];r=0;B(j.message)}for(p=0;p<r;p++){q=s[p];try{if(q&&q instanceof Object){var t=typeof lang=="object"&&lang["b-dropdown"][a.group+"."]||{};q.text=q.text==null?t[q.name]:t[q.text]||q.text}}catch(j){B(j.message)}try{h=q.group}catch(j){h=false;B(j.message)}if(h){b+="<optgroup>";var u,v,w,x;try{x=q.items||[];w=x.length}catch(j){x=[];w=0;B(j.message)}for(u=0;u<w;u++){v=x[u];try{v.num=a.num?a.num():p}catch(j){B(j.message)}g="option";n={};try{n=v}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false)}b+="</optgroup>"}else{g="option";n={};try{n=q}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false)}}b+="</select></div></div>";return b};m.option=function(a){var b="";try{h=!a.hr}catch(c){h=false;B(c.message)}if(h){b+="<option";try{h=a.id!=null}catch(c){h=false;B(c.message)}if(h){b+=' data-id="';try{b+=I(a.id)}catch(c){B(c.message+"184")}b+='"'}try{h=a.num!==void 0}catch(c){h=false;B(c.message)}if(h){b+=' data-num="';try{g=a.num}catch(c){g="";B(c.message)}b+=g;b+='"'}try{h=a.value}catch(c){h=false;B(c.message)}if(h){b+=' data-value="';try{b+=I(a.value)}catch(c){B(c.message+"196")}b+='" value="';try{b+=I(a.value)}catch(c){B(c.message+"199")}b+='"'}try{h=a.text}catch(c){h=false;B(c.message)}if(h){b+=' data-text="';try{b+=I(a.text)}catch(c){B(c.message+"207")}b+='"'}try{h=a["sort"]}catch(c){h=false;B(c.message)}if(h){b+=' aria-sort="';try{b+=I(a["sort"])}catch(c){B(c.message+"213")}b+='"'}try{h=a.disabled}catch(c){h=false;B(c.message)}if(h){b+=' disabled="disabled"'}try{h=a.selected}catch(c){h=false;B(c.message)}if(h){b+=' selected="selected"'}try{var d=a.text,e=a.level||0}catch(c){B(c.message)}b+=' style="padding-left:';try{b+=I(e*10)}catch(c){B(c.message+"232")}b+='px;">';try{b+=I(a.text)}catch(c){B(c.message+"240")}b+="</option>"}return b}})(a);(function(a){m["b-email"]=function(a){var b="";try{if(!a.props){a.props={}}}catch(c){B(c.message)}b+='<div data-bem="b-email" data-blockid="email" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"14")}b+='" data-bem="b-email" class="b-email';try{h=a.mods}catch(c){h=false;B(c.message)}if(h){b+=" ";try{b+=I("b-email_"+a.mods.join(" b-email_"))}catch(c){B(c.message+"22")}}try{h=a.shortcut}catch(c){h=false;B(c.message)}if(h){b+=" ";try{b+=I("js-"+a.shortcut)}catch(c){B(c.message+"27")}}var d,e,f;try{f=a.props||{}}catch(c){i={};B(c.message)}for(d in f){e=f[d];try{h=e}catch(c){h=false;B(c.message)}if(h){try{g=d}catch(c){g="";B(c.message)}if(g!==""){b+=" "+g+'="';try{b+=I(e)}catch(c){B(c.message+"32")}b+='"'}}}b+='"><span class="b-email__input">';g="b-input";n={};try{n={props:{name:a.props.name,type:"email","data-pattern":a.props["data-pattern"],"data-row-name":a.props.name},mods:["hidden"].concat(a.mods)}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+='</span><span class="b-email__domain">';try{var j=(a.domains||[]).map(function(a){if(typeof a==="object"){return a}return{value:a,text:"@"+a}})}catch(c){B(c.message)}g="b-select";n={};try{n={blockid:"email_select",items:j,mods:a.mods}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+='</span><span class="b-email__name">';try{var l={value:a.username,type:"email",maxlength:a.props.maxlength,tabindex:a.props.tabindex,placeholder:a.props.placeholder,required:a.props.required,autofocus:a.props.autofocus,"data-row-name":a.props.name};if(a.username_name){l.name=a.username_name}}catch(c){B(c.message)}g="b-input";n={};try{n={blockid:"email_name",props:l,mods:a.mods}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</span></div>";return b}})(a);(function(a){var b=a;m["b-captcha"]=function(a){var b="";try{f[0]=I((a.mods&&a.mods.length?" b-captcha_"+a.mods.join(" b-captcha_"):"")+(a.classes?" "+a.cssClass:""))}catch(c){f[0]="";B(c.message)}b+='<div class="b-captcha'+f[0]+'" data-bem="b-captcha" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"5")}b+='">';try{var d=a.src+"?"+Math.random()}catch(c){B(c.message)}try{f[0]=I(d)}catch(c){f[0]="";B(c.message)}try{f[1]=I(d)}catch(c){f[1]="";B(c.message)}b+='<img src="'+f[0]+'" data-src="'+f[1]+'" class="js-captcha-img b-captcha__captcha" alt=""/>';try{h=!a.imageOnly}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-captcha__code">';try{h=a.description}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-captha__description">';try{b+=I(a.description)}catch(c){B(c.message+"18")}b+="</div>"}try{var e=["captcha"],i=["error","confirm","responsive"];i.forEach(function(b){if(a.mods&&a.mods.indexOf(b)!==-1){e.push(b)}})}catch(c){B(c.message)}g="b-input";n={};try{n={props:a.props,mods:e,prevent:a.prevent}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+='<br/><div class="b-captcha__error-msg"></div><a href="" class="js-captcha-reload b-captcha__code__reload" data-img-selector=".js-captcha-img" data-input-name="captcha">';try{b+=I(a.refresh)}catch(c){B(c.message+"45")}b+="</a></div> "}b+="</div>";return b}})(a);(function(a){m["b-input-btn"]=function(a){var b="";b+='<div class="b-input-btn" data-bem="';try{b+=I("b-input-btn")}catch(c){B(c.message+"6")}b+='" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"9")}b+='">';try{h=a.captcha}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-input-btn__row"><div class="b-input-btn__cell">';g="b-captcha";n={};try{n=a.captcha}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div></div>"}b+='<div class="b-input-btn__row"><div class="b-input-btn__cell b-input-btn__cell_input">';g="b-input";n={};try{n=a.input}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+='</div><div class="b-input-btn__cell b-input-btn__cell_btn">';g="btn";n={};try{n=a.btn}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div></div></div>";return b}})(a);(function(a){var b=a;m["b-segment-input"]=function(a){var b="";try{(function(a){"use strict";var b,c;a.props=a.props||{text:""};var d=a.props.text,e=a.maskSymbol||"*";var f=d.replace(new RegExp("[^"+e+"]","g"),"");var g=d.indexOf(e),h=d.lastIndexOf(e)+1;if(g===-1){b=d;c=""}else{b=d.slice(0,g);c=d.slice(h)}var i=f.replace(/./g,"*"),j=i.length,k={maskStart:g,maskEnd:h,textStart:b,placeholder:i,placeholderLength:j,textEnd:c};$.extend(a.props,{textData:k})})(a)}catch(c){B(c.message)}try{var d=a.props.textData.placeholder,e=a.props.textData.placeholderLength,i=a.props.textData.textStart,j=a.props.textData.textEnd,l=a.props.type,o=a.props.name}catch(c){B(c.message)}try{f[0]=I((a.mods&&a.mods.length?" b-segment-input_"+a.mods.join(" b-segment-input_"):"")+(a.shortcut?"js-"+a.shortcut:""))}catch(c){f[0]="";B(c.message)}b+='<div class="b-segment-input'+f[0]+'" data-bem="';try{b+=I(a.block?a.block:"b-segment-input")}catch(c){B(c.message+"14")}b+='" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"17")}b+='"><input type="hidden" class="b-segment-input__hidden"/>';try{h=i}catch(c){h=false;B(c.message)}if(h){b+='<span class="b-segment-input__item b-segment-input__head">';try{b+=I(i)}catch(c){B(c.message+"25")}b+="</span>"}b+='<span class="b-segment-input__item b-segment-input__body">';try{b+=I(d)}catch(c){B(c.message+"30")}b+='</span><span class="b-segment-input__item b-segment-input__mask">';try{var p=[];if(!e){p.push("hidden")}}catch(c){B(c.message)}g="b-input";n={};try{n={mods:p,prevent:a.prevent,props:{type:l,placeholder:d,name:o,maxlength:e,size:e,required:a.props.required,fixlength:a.props.fixlength}}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</span>";try{h=j}catch(c){h=false;B(c.message)}if(h){b+='<span class="b-segment-input__item b-segment-input__tail">';try{b+=I(j)}catch(c){B(c.message+"59")}b+="</span>"}b+="</div>";return b}})(a);(function(a){m["b-phone-btn"]=function(a){var b="";try{f[0]=I(a.mods&&a.mods.length?" b-phone-btn_"+a.mods.join(" b-phone-btn_"):"")}catch(c){f[0]="";B(c.message)}b+='<div class="b-phone-btn '+f[0]+'" data-bem="b-phone-btn" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"7")}b+='"><div class="b-phone-btn__row"><div class="b-phone-btn__cell b-phone-btn__cell_phone">';g="b-segment-input";n={};try{n=a.phone}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+='</div><div class="b-phone-btn__cell b-phone-btn__cell_btn">';g="btn";n={};try{n=a.btn}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div></div></div>";return b}})(a);(function(a){m["b-tooltip"]=function(a){var b="";try{f[0]=I(a.mods&&a.mods.length?" b-tooltip_"+a.mods.join(" b-tooltip_"):"")}catch(c){f[0]="";B(c.message)}b+='<div class="b-tooltip'+f[0]+'" data-bem="';try{b+=I("b-tooltip")}catch(c){B(c.message+"6")}b+='" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"9")}b+='"><div class="b-tooltip__corner"></div>';try{f[0]=I(i18n("Закрыть"))}catch(c){f[0]="";B(c.message)}b+='<div data-name="close" class="b-tooltip__close" title="'+f[0]+'"></div><div class="b-tooltip__content">';try{h=a.block}catch(c){h=false;B(c.message)}if(h){try{g=a.block}catch(c){g="";B(c.message)}n={};try{n=a}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}try{h=a.text}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-tooltip__text">';try{b+=I(a.text)}catch(c){B(c.message+"20")}b+="</div>"}b+="</div></div>";return b}})(a);(function(a){m["b-form-simple-helper"]=function(a){var b="";try{f[0]=I(a.mods?" b-form-simple-helper_"+a.mods.join(" b-form-simple-helper_")+" ":"")}catch(c){f[0]="";B(c.message)}b+='<div class="b-form-simple-helper'+f[0]+'" data-bem="';try{b+=I("b-form-simple-helper")}catch(c){B(c.message+"6")}b+='" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"9")}b+='"><div class="b-form-simple-helper__value"></div></div>';return b}})(a);(function(a){m["b-form-tooltip"]=function(a){var b="";try{f[0]=I(a.mods?" b-form-tooltip_"+a.mods.join(" b-form-tooltip_")+" ":"")}catch(c){f[0]="";B(c.message)}b+='<div class="b-form-tooltip'+f[0]+'" data-bem="';try{b+=I("b-form-tooltip")}catch(c){B(c.message+"6")}b+='" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"9")}b+='">';g="b-tooltip";n={};try{n=a}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>";return b}})(a);(function(a){m["b-form-field"]=function(a){var b="";try{a.props=a.props||{};if(!a.name){a.name=a.props.name}}catch(c){B(c.message)}try{f[0]=I(a.mods&&a.mods.length?" b-form-field_"+a.mods.join(" b-form-field_")+" ":"")}catch(c){f[0]="";B(c.message)}b+='<div class="b-form-field'+f[0]+'" data-bem="';try{b+=I("b-form-field")}catch(c){B(c.message+"14")}b+='" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"17")}b+='" data-field-name="';try{b+=I(a.name)}catch(c){B(c.message+"20")}b+='">';try{h=a.label}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-form-field__label">';try{f[0]=I(a.props.id)}catch(c){f[0]="";B(c.message)}b+='<label for="'+f[0]+'">';try{b+=a.label}catch(c){B(c.message+"26")}b+="</label></div>"}b+='<div class="b-form-field__widget">';try{h=a.block}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-form-field__input">';try{g=a.block}catch(c){g="";B(c.message)}n={};try{n=a}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);try{h=a.tooltip}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-form-field__tooltip">';g="b-form-tooltip";n={};try{n=a.tooltip}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>"}b+="</div>"}try{h=a.errors}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-form-field__errors">';g="b-form-field__errors";n={};try{n=a.errors}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>"}try{h=a.message}catch(c){h=false;B(c.message)}if(h){g="b-form-field__message";n={};try{n=a.message}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}b+='</div><div class="b-form-field__media-phone"></div></div>';return b}})(a);(function(a){m["b-form-field__errors"]=function(a){var b="";var c,d,e;try{e=a||{}}catch(g){i={};B(g.message)}for(c in e){d=e[c];try{f[0]=I(d.type)}catch(g){f[0]="";B(g.message)}b+='<div class="b-form-field__errors__error js-'+f[0]+' js-error">';try{b+=d.text}catch(g){B(g.message+"4")}b+="</div>"}return b}})(a);(function(a){m["b-form-field__message"]=function(a){var b="";b+='<div class="b-form-field__message">';try{b+=I(a)}catch(c){B(c.message+"3")}b+="</div>";return b}})(a);(function(a){m["b-form__row__errors"]=function(a){var b="";var c,d,e;try{e=a.errors||{}}catch(f){i={};B(f.message)}for(c in e){d=e[c];b+='<div class="js-error b-form__row__message b-form__row__message__error js-';try{b+=I(d.type)}catch(f){B(f.message+"9")}try{h=a.desc}catch(f){h=false;B(f.message)}if(h){b+=" b-form__row__error_clear"}b+='">';try{b+=d.text}catch(f){B(f.message+"16")}b+="</div>"}return b};m["b-form-row"]=function(a){var b="";try{if(!a.props){a.props={}}if(!a.props.id){a.props.id=a.props.name+"_"+Math.floor(Math.random()*100)}a.mods=a.mods||[];if(a.columns){a.mods.push("columnar")}}catch(c){B(c.message)}b+='<div data-bem="';try{b+=I("b-form-row")}catch(c){B(c.message+"42")}b+='" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"45")}b+='"';g="class-attribute";n={};try{n={baseClass:"b-form-row",classes:a.classes,mods:a.mods}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);g="attributes";n={};try{n={"data-group":a.group,"data-input":a.props.name}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+=">";try{h=!a.block&&a.text}catch(c){h=false;B(c.message)}if(h){try{b+=a.text}catch(c){B(c.message+"64")}}else{try{h=a.block==="b-grid"}catch(c){h=false;B(c.message)}if(h){try{g=a.block}catch(c){g="";B(c.message)}n={};try{n=a.params}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}else{try{h=a.columns}catch(c){h=false;B(c.message)}if(h){g="b-form__columns";n={};try{n=a}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}try{h=!a.columns}catch(c){h=false;B(c.message)}if(h){g="b-form-field";n={};try{n=a}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}try{h=a.tooltip}catch(c){h=false;B(c.message)}if(h){g="b-form-tooltip";n={};try{n=a.tooltip}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}try{h=a.desc}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-form-row__desc">';try{b+=a.desc}catch(c){B(c.message+"81")}b+="</div>"}}}b+="</div>";return b}})(a);(function(a){m["b-form"]=function(a){var b="";try{f[0]=I(a.mods?" b-form_"+a.mods.join(" b-form_")+" ":"")}catch(c){f[0]="";B(c.message)}b+='<form class="b-form'+f[0]+'" data-bem="';try{b+=I("b-form")}catch(c){B(c.message+"6")}b+='" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"9")}b+='" novalidate="';try{b+=I("novalidate")}catch(c){B(c.message+"12")}b+='"';try{h=a.action}catch(c){h=false;B(c.message)}if(h){b+=' action="';try{b+=I(a.action)}catch(c){B(c.message+"16")}b+='"'}try{h=a.method}catch(c){h=false;B(c.message)}if(h){b+=' method="';try{b+=I(a.method)}catch(c){B(c.message+"21")}b+='"'}try{h=a.target}catch(c){h=false;B(c.message)}if(h){b+=' target="';try{b+=I(a.target)}catch(c){B(c.message+"26")}b+='"'}try{h=a.name}catch(c){h=false;B(c.message)}if(h){b+=' name="';try{b+=I(a.name)}catch(c){B(c.message+"31")}b+='"'}try{h=a.blockid||a.block}catch(c){h=false;B(c.message)}if(h){b+=' data-blockid="';try{b+=I(a.blockid||a.block)}catch(c){B(c.message+"36")}b+='"'}b+=">";try{h=a.systemErrors}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-form__system-error-container">';var d,e,i;try{i=a.systemErrors||[];e=i.length}catch(c){i=[];e=0;B(c.message)}for(d=0;d<e;d++){g="b-form__system-error";n={};try{n=a.systemErrors[d]}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}b+="</div>"}try{h=a.desc}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-form__desc">';try{b+=a.desc}catch(c){B(c.message+"53")}b+="</div>"}var d,j,l,o;try{o=a.fields||[];l=o.length}catch(c){o=[];l=0;B(c.message)}for(d=0;d<l;d++){j=o[d];try{h=j.block==="b-form__separator"}catch(c){h=false;B(c.message)}if(h){g="b-form__separator";n={};k=m[g];if(k)b+=G(k,n,false)}else{try{j.mods=j.mods||[];j.mods=j.mods.concat(a.mods)}catch(c){B(c.message)}g="b-form-row";n={};try{n=j}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}}b+='<div class="b-form__notifications"></div>';try{h=a.controls}catch(c){h=false;B(c.message)}if(h){g="b-form__controls";n={};try{n=a.controls}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}b+="</form>";return b}})(a);(function(a){m["b-form__controls"]=function(a){var b="";try{f[0]=I(a.mods?" b-form__controls_"+a.mods.join(" b-form__controls_"):"")}catch(c){f[0]="";B(c.message)}b+='<div class="b-form__controls'+f[0]+'">';var d,e,i;try{i=a.items||[];e=i.length}catch(c){i=[];e=0;B(c.message)}for(d=0;d<e;d++){try{f[0]=I(a.items[d].mods?" b-form__control_"+a.items[d].mods.join(" b-form__control_"):"")}catch(c){f[0]="";B(c.message)}b+='<div class="b-form__control'+f[0]+'">';try{g=a.items[d].block||"btn"}catch(c){g="";B(c.message)}n={};try{n=a.items[d]}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>"}try{h=a.message}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-form__controls__message">';try{b+=a.message}catch(c){B(c.message+"11")}b+="</div>"}b+="</div>";return b}})(a);(function(a){m["b-form__separator"]=function(a){var b="";b+='<div class="b-form__separator"></div>';return b}})(a);(function(a){m["b-form__columns"]=function(a){var b="";b+='<div class="b-form__columns">';var c,d,e,h;try{h=a.columns||[];e=h.length}catch(i){h=[];e=0;B(i.message)}for(c=0;c<e;c++){d=h[c];try{var j="";if(a.columns.length==c+1){j="b-form__column_last"}}catch(i){B(i.message)}try{f[0]=I(j)}catch(i){f[0]="";B(i.message)}b+='<div class="b-form__column '+f[0]+'">';g="b-form-field";n={};try{n=d}catch(i){B(i.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>"}b+="</div>";return b}})(a);(function(a){m["b-form__system-error"]=function(a){var b="";b+='<div class="';try{b+=I("b-form__system-error "+a.type)}catch(c){B(c.message+"8")}b+='">';try{b+=a.text}catch(c){B(c.message+"13")}b+="</div>";return b}})(a);(function(a){m["b-grid"]=function(a){var b="";try{f[0]=I(a.mods?" b-grid_"+a.mods.join(" b-grid_")+" ":"")}catch(c){f[0]="";B(c.message)}b+='<div class="b-grid'+f[0]+'">';var d,e,i,j;try{i=0;e=a.rows.length-1}catch(c){i=0;e=0;B(c.message)}for(d=i;d<=e;d++){b+='<div class="b-grid__row">';var l,o,p,q;try{p=0;o=a.rows[d].length-1}catch(c){p=0;o=0;B(c.message)}for(l=p;l<=o;l++){try{f[0]=I(l===0?" b-grid__item_first":"")}catch(c){f[0]="";B(c.message)}try{f[1]=I(l===a.rows[d].length-1?" b-grid__item_last":"")}catch(c){f[1]="";B(c.message)}b+='<div class="b-grid__item '+f[0]+""+f[1]+'">';var r=a.rows[d][l];try{h=r.type==="block"}catch(c){h=false;B(c.message)}if(h){try{g=r.value}catch(c){g="";B(c.message)}n={};try{n=r.params}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}else{try{h=r.type==="image"}catch(c){h=false;B(c.message)}if(h){try{f[0]=I(r.src)}catch(c){f[0]="";B(c.message)}b+='<img src="'+f[0]+'"/>'}else{try{h=r.type==="text"}catch(c){h=false;B(c.message)}if(h){try{b+=r.value}catch(c){B(c.message+"16")}}else{}}}b+="</div>"}b+="</div>"}b+="</div>";return b}})(a);(function(a){m["b-checkbox"]=function(a){var b="";b+='<div data-bem="b-checkbox"';try{var c=a.mods?" b-checkbox_"+a.mods.join(" b-checkbox_"):"";if(~c.indexOf("_disabled")){a.disabled=true}if(!a.props){a.props={}}}catch(d){B(d.message)}try{h=a.id!=null}catch(d){h=false;B(d.message)}if(h){b+=' data-id="';try{b+=I(a.id)}catch(d){B(d.message+"20")}b+='"'}try{h=a.name}catch(d){h=false;B(d.message)}if(h){b+=' data-name="';try{b+=I(a.name)}catch(d){B(d.message+"26")}b+='"'}try{h=a.shortcut}catch(d){h=false;B(d.message)}if(h){b+=' data-shortcut="';try{b+=I(a.shortcut)}catch(d){B(d.message+"32")}b+='"'}try{h=!a.withoutDataModel}catch(d){h=false;B(d.message)}if(h){b+=' data-model="';try{b+=I(JSON.stringify(a))}catch(d){B(d.message+"38")}b+='"'}b+=' class="js-checkbox b-checkbox';try{h=a.classes}catch(d){h=false;B(d.message)}if(h){b+=" ";try{b+=I(a.classes)}catch(d){B(d.message+"48")}}try{h=a.checked||a.__selected__}catch(d){h=false;B(d.message)}if(h){b+=" ";try{h=a.checkedMixed}catch(d){h=false;B(d.message)}if(h){b+="b-checkbox_checked_mixed"}else{b+="b-checkbox_checked"}}try{h=c}catch(d){h=false;B(d.message)}if(h){try{b+=I(c)}catch(d){B(d.message+"64")}}try{h=a.shortcut}catch(d){h=false;B(d.message)}if(h){b+=" js-shortcut"}b+='"';try{h=~c.indexOf("_disabled")}catch(d){h=false;B(d.message)}if(h){b+=' aria-disabled="disabled"'}b+='><div class="b-checkbox__box"></div><div class="b-checkbox__checkmark"></div>';try{h=a.label}catch(d){h=false;B(d.message)}if(h){b+='<span class="b-checkbox__label">';try{b+=I(a.label)}catch(d){B(d.message+"82")}b+="</span>"}try{f[0]=I(a.props.name)}catch(d){f[0]="";B(d.message)}try{f[1]=I(a.props.value)}catch(d){f[1]="";B(d.message)}b+='<input type="hidden" class="b-checkbox__input" name="'+f[0]+'" value="'+f[1]+'"';try{h=!a.checked}catch(d){h=false;B(d.message)}if(h){b+=' disabled="disabled"'}b+="/></div>";return b}})(a);(function(a){m["b-link"]=function(a){var b="";try{f[0]=I(a.href)}catch(c){f[0]="";B(c.message)}b+='<a href="'+f[0]+'"';g="class-attribute";n={};try{n={baseClass:"b-link",mods:a.mods,classes:a.classes}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+=' data-bem="';try{b+=I("b-link")}catch(c){B(c.message+"6")}b+='" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"9")}b+='"';try{h=a.target}catch(c){h=false;B(c.message)}if(h){b+=' target="';try{b+=I(a.target)}catch(c){B(c.message+"13")}b+='"'}try{h=a.mnemo}catch(c){h=false;B(c.message)}if(h){b+=' data-mnemo="';try{b+=I(a.mnemo)}catch(c){B(c.message+"18")}b+='"'}try{h=a.name}catch(c){h=false;B(c.message)}if(h){b+=' data-name="';try{b+=I(a.name)}catch(c){B(c.message+"23")}b+='"'}try{h=a.id}catch(c){h=false;B(c.message)}if(h){b+=' data-id="';try{b+=I(a.id)}catch(c){B(c.message+"28")}b+='"'}b+=">";try{b+=I(a.title)}catch(c){B(c.message+"32")}b+="</a>";return b}})(a);(function(a){m["b-link"]=function(a){var b="";try{f[0]=I(a.href)}catch(c){f[0]="";B(c.message)}b+='<a href="'+f[0]+'"';g="class-attribute";n={};try{n={baseClass:"b-link",mods:a.mods,classes:a.classes}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+=' data-bem="';try{b+=I("b-link")}catch(c){B(c.message+"6")}b+='" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"9")}b+='"';try{h=a.target}catch(c){h=false;B(c.message)}if(h){b+=' target="';try{b+=I(a.target)}catch(c){B(c.message+"13")}b+='"'}try{h=a.mnemo}catch(c){h=false;B(c.message)}if(h){b+=' data-mnemo="';try{b+=I(a.mnemo)}catch(c){B(c.message+"18")}b+='"'}try{h=a.name}catch(c){h=false;B(c.message)}if(h){b+=' data-name="';try{b+=I(a.name)}catch(c){B(c.message+"23")}b+='"'}try{h=a.id}catch(c){h=false;B(c.message)}if(h){b+=' data-id="';try{b+=I(a.id)}catch(c){B(c.message+"28")}b+='"'}b+=">";try{b+=I(a.title)}catch(c){B(c.message+"32")}b+="</a>";return b}})(a);(function(a){m["b-btn-social"]=function(a){var b="";b+='<div data-bem="b-btn-social" class="b-btn-social';try{h=a.mods}catch(c){h=false;B(c.message)}if(h){b+=" ";try{b+=I("b-btn-social_"+a.mods.join(" b-btn-social_"))}catch(c){B(c.message+"9")}}b+='">';try{h=a.socials.length}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-btn-social__item b-btn-social__item_social">';var d,e,i,j;try{j=a.socials||[];i=j.length}catch(c){j=[];i=0;B(c.message)}for(d=0;d<i;d++){e=j[d];try{f[0]=I(e.id)}catch(c){f[0]="";B(c.message)}try{f[1]=I(e.provider)}catch(c){f[1]="";B(c.message)}try{f[2]=I(e.id)}catch(c){f[2]="";B(c.message)}try{f[3]=I(e.appId)}catch(c){f[3]="";B(c.message)}b+='<span class="b-btn-social__social__link b-btn-social__social__link_'+f[0]+'" data-provider="'+f[1]+'" data-name="social" data-id="'+f[2]+'" data-appId="'+f[3]+'"></span>'}b+="</div>";var d,l,o,p;try{p=a.btns||[];o=p.length}catch(c){p=[];o=0;B(c.message)}for(d=0;d<o;d++){l=p[d];b+='<div class="b-btn-social__item b-btn-social__item_btn">';g="btn";n={};try{n=l}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>"}}else{var d,l,q,r;try{r=a.btns||[];q=r.length}catch(c){r=[];q=0;B(c.message)}for(d=0;d<q;d++){l=r[d];g="btn";n={};try{n=l}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}}b+="</div>";return b}})(a);(function(a){m["b-email-providers"]=function(a){var b="";b+='<div data-bem="b-email-providers" data-blockid="email-providers" data-mnemo="email-providers"';g="class-attribute";n={};try{n={baseClass:"b-email-providers",mods:a.mods}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+=' data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"12")}b+='"><div class="b-email-providers__list">';var d,e,i,j;try{j=a.providers||[];i=j.length}catch(c){j=[];i=0;B(c.message)}for(d=0;d<i;d++){e=j[d];try{f[0]=I(e.value)}catch(c){f[0]="";B(c.message)}try{f[1]=I(e.id)}catch(c){f[1]="";B(c.message)}b+='<div data-provider="'+f[0]+'" data-id="'+f[1]+'" class="b-email-providers__list__item';try{h=e.selected}catch(c){h=false;B(c.message)}if(h){b+=" b-email-providers__list__item_selected"}try{h=d===0}catch(c){h=false;B(c.message)}if(h){b+=" b-email-providers__list__item_first"}try{h=d===a.providers.length-1}catch(c){h=false;B(c.message)}if(h){b+=" b-email-providers__list__item_last"}b+='">';try{f[0]=I(e.id)}catch(c){f[0]="";B(c.message)}b+='<span class="b-email-providers__list__item__icon b-email-providers__list__item__icon_'+f[0]+'">';try{h=e.text}catch(c){h=false;B(c.message)}if(h){b+='<span class="b-link">';try{b+=I(e.text)}catch(c){B(c.message+"39")}b+="</span>"}b+="</span></div> "}b+="</div></div>";return b}})(a);(function(a){var b=a;m["b-phone-restore"]=function(a){var b="";b+='<div class="b-phone-restore" data-bem="b-phone-restore" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"6")}b+='"><div class="b-phone-restore__title">';try{b+=i18n("Быстрое восстановление пароля по SMS")}catch(c){B(c.message+"11")}b+="</div>";try{h=a.errno}catch(c){h=false;B(c.message)}if(h){g="b-phone-restore__error";n={};try{n={errno:a.errno}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}g="b-form";n={};try{n=a.form}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>";return b}})(a);(function(a){var b=a;m["b-phone-restore__error"]=function(a){var b="";b+='<div class="b-phone-restore__error">';try{h=a.errno==1}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Неверно указан телефон")}catch(c){B(c.message+"5")}}else{try{h=a.errno==2}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Код введен неверно")}catch(c){B(c.message+"8")}}else{try{h=a.errno==3}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Телефон введен неполностью")}catch(c){B(c.message+"11")}}else{try{h=a.errno==4}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Код не введен")}catch(c){B(c.message+"14")}}else{try{h=a.errno==6}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Превышено максимальное число попыток восстановления пароля на номер")}catch(c){B(c.message+"17")}}else{try{b+=i18n("Повторите попытку через некоторое время.")}catch(c){B(c.message+"20")}}}}}}b+="</div>";return b}})(a);(function(a){var b=a;m["b-login"]=function(a){var b="";try{var c=[],d=a.urls.page,e=a.urls.authOrigin+"/cgi-bin/auth",i;c.push({block:"b-input",mods:["hidden"],props:{name:"new_auth_form",type:"hidden",value:"1"}});if(a.opener&&d.indexOf("from")===-1){if(d.indexOf("?")!==-1){d+="&"}else{d+="?"}d+="from="+(a.opener==="default"?"login":a.opener)
}if(a.fakeAuthPage){c.push({block:"b-input",mods:["hidden"],props:{name:"FakeAuthPage",type:"hidden",value:a.fakeAuthPage}})}c.push({block:"b-input",mods:["hidden"],props:{name:"page",type:"hidden",value:d}});if(a.fail_page){c.push({block:"b-input",mods:["hidden"],props:{name:"fail_page",type:"hidden",value:a.fail_page}})}if(a.rbTestId){c.push({block:"b-input",mods:["hidden"],props:{name:"rb_test_id",type:"hidden",value:a.rbTestId}})}if(a.rbSiteZone){c.push({block:"b-input",mods:["hidden"],props:{name:"rb_sz",type:"hidden",value:a.rbSiteZone}})}if(a.csrf){c.push({block:"b-input",mods:["hidden"],props:{name:"act_token",type:"hidden",value:a.csrf}})}if(/e\.mail\.ru/.test(d)){c.push({block:"b-input",mods:["hidden"],props:{name:"back",type:"hidden",value:1}})}c.push({block:"b-input",mods:["hidden"],props:{name:"FromAccount",type:"hidden",value:1}});if(a.fakeauth_url){c.push({block:"b-input",mods:["hidden"],props:{name:"FakeAuth",type:"hidden",value:a.fakeauth_url}})}i={name:"login",captcha:!!a.captcha,mods:["popup"],block:"b-form",action:e,urls:a.urls,method:"post",target:"_parent",fields:c,socials:a.socials,nativesubmit:true};if(!a.mods){a.mods=[]}if(a.mode!=="simple"){i.additionalMods=["responsive"];i.mods.push("responsive");a.mods.push("responsive")}}catch(j){B(j.message)}try{h=a.allow_external}catch(j){h=false;B(j.message)}if(h){g="b-login__providers";n={};try{n=i}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false)}g="b-login__email";n={};try{n=i}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false);g="b-login__password";n={};try{n=i}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false);g="b-login__restore";n={};try{n=i}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false);g="b-login__captcha";n={};try{n=i}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false);g="b-login__submit-btn";n={};try{n=i}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false);try{f[0]=I(a.mods?" b-login_"+a.mods.join(" b-login_")+" ":"")}catch(j){f[0]="";B(j.message)}try{f[1]=I(a.mnemo)}catch(j){f[1]="";B(j.message)}b+='<div class="b-login'+f[0]+'" id="frame" data-mnemo="'+f[1]+'" data-bem="b-login" data-model="';try{b+=I(JSON.stringify(a))}catch(j){B(j.message+"19")}b+='">';g="b-login__header";n={};try{n={isAuthorized:a.isAuthorized,errno:a.errno,fail:a.fail,opener:a.opener}}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false);try{h=a.errno||a.fail}catch(j){h=false;B(j.message)}if(h){g="b-login__errors";n={};try{n={errno:a.errno,fail:a.fail,abfsecond:a.abfsecond,email:a.email,captcha:a.captcha}}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false)}g="b-form";n={};try{n=i}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false);b+='<div class="b-login_container-for-restore"><div class="b-login__separator"></div><div name="b-phone-restore"></div></div>';g="b-login__footer";n={};try{n={additionalMods:i.additionalMods,urls:a.urls}}catch(j){B(j.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>";return b}})(a);(function(a){var b=a;m["b-login__errors"]=function(a){var b="";b+='<div class="b-login__errors">';try{h=a.errno==1}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Повторите попытку через некоторое время.")}catch(c){B(c.message+"7")}}else{try{h=a.errno==2}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Чтобы войти через социальную сеть, необходимо разрешить доступ к своему профилю.")}catch(c){B(c.message+"11")}}else{try{h=a.errno==3}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Чтобы войти при помощи почтового ящика {email}, необходимо ввести логин и пароль на странице авторизации данного сервиса.",{email:""+a.email+""})}catch(c){B(c.message+"15")}}else{try{h=a.errno==10||a.fail==1&&a.abfsecond==1&&a.captcha==1}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Неверно введен пароль или код с картинки.")}catch(c){B(c.message+"19")}b+="<br/>";try{b+=i18n("Попробуйте еще раз, пожалуйста.")}catch(c){B(c.message+"19")}}else{try{h=a.errno==11||a.fail==1&&a.captcha==1}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Замечены подозрительные попытки входа в ваш почтовый ящик.")}catch(c){B(c.message+"23")}b+="<br/>";try{b+=i18n("Возможно, вы ошиблись в вводе пароля или заходите в ящик из необычного места. Чтобы мы убедились, что это вы, пожалуйста, введите еще раз пароль и код с картинки.")}catch(c){B(c.message+"23")}}else{try{h=a.errno==20||a.fail==1}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Неверное имя пользователя или пароль. Проверьте правильность введенных данных.")}catch(c){B(c.message+"27")}}else{try{h=a.errno==21}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("По техническим причинам Ваш почтовый ящик временно недоступен.")}catch(c){B(c.message+"31")}b+="<br/>";try{b+=i18n("В данный момент наши специалисты занимаются решением проблемы.")}catch(c){B(c.message+"31")}b+="<br/>";try{b+=i18n("В ближайшее время работы будут закончены, и доступ в Ваш почтовый ящик будет восстановлен.")}catch(c){B(c.message+"31")}b+="<br/>";try{b+=i18n("Мы приносим свои извинения за доставленные неудобства.")}catch(c){B(c.message+"31")}}else{try{h=a.errno==22}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Учетная запись заблокирована.",{aStart:'<a href="//help.mail.ru/mail-help/UA" target="_blank">',aEnd:"</a>"})}catch(c){B(c.message+"35")}b+="<br/>";try{b+=i18n("Почтовый ящик был закрыт за неиспользование, его содержимое (письма, папки, адреса, настройки) уничтожено в соответствиями с условиями {aStart}пользовательского соглашения{aEnd}.",{aStart:'<a href="//help.mail.ru/mail-help/UA" target="_blank">',aEnd:"</a>"})}catch(c){B(c.message+"35")}}else{try{h=a.errno==23}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Почтовый ящик удален.")}catch(c){B(c.message+"39")}b+="<br/>";try{b+=i18n("Доступ данного аккаунта к Mail.Ru прекращен.")}catch(c){B(c.message+"39")}}else{try{h=a.errno==24}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Учетная запись заблокирована.",{aStart:'<a href="//help.mail.ru/mail-help/UA" target="_blank">',aEnd:"</a>"})}catch(c){B(c.message+"43")}b+="<br/>";try{b+=i18n("Почтовый ящик был закрыт за неиспользование в соответствиями с условиями {aStart}пользовательского соглашения{aEnd}.",{aStart:'<a href="//help.mail.ru/mail-help/UA" target="_blank">',aEnd:"</a>"})}catch(c){B(c.message+"43")}}else{try{h=a.errno==25}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Учетная запись заблокирована.",{aStart:'<a href="//help.mail.ru/mail-support/login/mailbox/pc/error/nopassremind" target="_blank">',aEnd:"</a>"})}catch(c){B(c.message+"47")}b+="<br/>";try{b+=i18n("Доступ данного пользователя к почтовому ящику заблокирован. За разъяснениями обратитесь в {aStart}Службу Поддержки пользователей{aEnd}.",{aStart:'<a href="//help.mail.ru/mail-support/login/mailbox/pc/error/nopassremind" target="_blank">',aEnd:"</a>"})}catch(c){B(c.message+"47")}}else{try{h=a.errno==703}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Введите логин и пароль ещё раз. Чтобы данная ошибка больше не выдавалась, отключите опцию Сессия только с одного IP-адреса {aStart}в настройках{aEnd} почтового ящика.",{aStart:'<a href="//e.mail.ru/settings/security" target="_blank">',aEnd:"</a>"})}catch(c){B(c.message+"51")}}else{try{h=a.errno==705}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Соединение с сервером прошло успешно, но авторизоваться не удалось. Повторите попытку через некоторое время.")}catch(c){B(c.message+"55")}}else{try{h=a.errno==706}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Произошла ошибка! Пожалуйста, повторите попытку через некоторое время или введите логин и пароль другого почтового ящика.")}catch(c){B(c.message+"59")}}else{try{h=a.errno==707}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Произошла ошибка! Пожалуйста, повторите попытку через некоторое время или введите логин и пароль другого почтового ящика.")}catch(c){B(c.message+"63")}}else{try{h=a.errno==708}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Данная почтовая служба не поддерживается Mail.Ru. Введите логин и пароль другого почтового ящика.")}catch(c){B(c.message+"67")}}else{try{h=a.errno==709}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Произошла ошибка! Пожалуйста, повторите попытку через некоторое время или введите логин и пароль другого почтового ящика.")}catch(c){B(c.message+"71")}}else{try{h=a.errno==710&&a.email}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Пароль для ящика {email} устарел или вы его поменяли. Укажите новый и сбор почты продолжится.",{email:""+a.email+""})}catch(c){B(c.message+"75")}}else{try{h=a.errno==711&&a.email}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("К сожалению, не удалось сохранить контактную информацию для ящика {email}. Войдите в ящик и повторите попытку, пожалуйста.",{email:""+a.email+""})}catch(c){B(c.message+"79")}}else{try{h=a.errno==712&&a.email}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("В этом почтовом ящике отключена передача данных по протоколу IMAP. Включите ее в настройках почты {email} и попробуйте снова.",{email:""+a.email+""})}catch(c){B(c.message+"83")}}else{try{h=a.errno==713&&a.email}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Ошибка подключения к ящику {email}. IMAР сервер не доступен или не отвечает. Повторите попытку позднее или проверьте настройки своего почтового провайдера.",{email:""+a.email+""})}catch(c){B(c.message+"87")}}else{try{h=a.errno==718}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Неверный e-mail адрес, проверьте правильность написания домена.")}catch(c){B(c.message+"91")}}else{try{h=a.errno==720||a.errno==820}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Вы ввели старый пароль. Ваш пароль был изменён менее недели назад.")}catch(c){B(c.message+"95")}}else{try{h=a.errno==821}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Вы ввели старый пароль. Ваш пароль был изменён менее месяца назад.")}catch(c){B(c.message+"99")}}else{try{h=a.errno==722||a.errno==822}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Вы ввели старый пароль. Ваш пароль был изменён более месяца назад.")}catch(c){B(c.message+"103")}}else{try{h=a.errno==723||a.errno==823}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Вы ввели старый пароль. Ваш пароль был изменён около полугода назад.")}catch(c){B(c.message+"107")}}else{try{h=a.errno==724||a.errno==824}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Вы ввели старый пароль. Ваш пароль был изменён менее года назад.")}catch(c){B(c.message+"111")}}else{try{h=a.errno==725||a.errno==825}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Вы ввели старый пароль. Ваш пароль был изменён более года назад.")}catch(c){B(c.message+"115")}}else{try{b+=i18n("Повторите попытку через некоторое время.")}catch(c){B(c.message+"119")}}}}}}}}}}}}}}}}}}}}}}}}}}}}}g="rb";n={};try{n={id:22346054,type:"d"}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>";return b}})(a);(function(a){var b=a;m["b-login__footer"]=function(a){var b="";b+='<div class="b-login__footer">';try{f[0]=I(a.urls.signupUrl)}catch(c){f[0]="";B(c.message)}b+='<a href="'+f[0]+'" target="_blank" data-name="signup-link">';try{b+=i18n("Регистрация в Почте")}catch(c){B(c.message+"3")}b+='</a><img src="//top-fwz1.mail.ru/counter?id=110605;js=na" style="border:0;display:none;" height="1" width="1" alt="Рейтинг@Mail.ru"/></div>';return b}})(a);(function(a){var b=a;m["b-login__email"]=function(a){var b="";try{a.fields.push({block:"b-email",mods:["in-row","b-login-providers"].concat(a.additionalMods),errors:[{type:"pattern",text:i18n("Вы ввели не существующий email")},{type:"required",text:i18n("Поле «Логин» должно быть заполнено")}],props:{name:"Login",placeholder:i18n("Логин"),autofocus:"autofocus",required:"required","data-pattern":".+@.+\\..+"},username:"",username_name:"Username",domains:["mail.ru","inbox.ru","corp.mail.ru"]})}catch(c){B(c.message)}return b}})(a);(function(a){var b=a;m["b-login__header"]=function(a){var b="";b+='<div class="b-login__header">';try{h=a.opener==="oneclick"}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-login__header__title">';try{b+=i18n("Войти своим почтовым ящиком")}catch(c){B(c.message+"8")}b+="</div>";try{h=!a.errno&&!a.fail}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-login__header__desc">';try{b+=i18n("Используйте преимущества Почты Mail.Ru без регистрации. Войдите своим почтовым ящиком.")}catch(c){B(c.message+"12")}b+="</div>"}}else{try{h=a.opener==="mail.login"}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-login__header__title">';try{b+=i18n("Войти в Почту")}catch(c){B(c.message+"19")}b+="</div>";try{h=!a.errno&&!a.fail}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-login__header__desc">';try{b+=i18n("В Почту Mail.Ru вы можете заходить любым своим почтовым ящиком.")}catch(c){B(c.message+"23")}b+="</div>"}}else{try{h=a.isAuthorized}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-login__header__title">';try{b+=i18n("Добавить почтовый ящик")}catch(c){B(c.message+"30")}b+="</div>";try{h=!a.errno&&!a.fail}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-login__header__desc">';try{b+=i18n("Авторизуйтесь несколькими почтовыми ящиками, и&nbsp;вы сможете легко переключаться между ними.")}catch(c){B(c.message+"34")}b+="</div>"}}else{b+='<div class="b-login__header__title">';try{b+=i18n("Вход")}catch(c){B(c.message+"41")}b+="</div>";try{h=!a.errno&&!a.fail}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-login__header__desc">';try{b+=i18n("Введите логин и&nbsp;пароль от своего почтового ящика для того, чтобы продолжить работу с&nbsp;сервисом.")}catch(c){B(c.message+"45")}b+="</div>"}}}}b+="</div>";return b}})(a);(function(a){var b=a;m["b-login__password"]=function(a){var b="";try{var c={block:"b-input",mods:["in-row","password"].concat(a.additionalMods),label:null,errors:[{type:"required",text:i18n("Поле «Пароль» должно быть заполнено")},{type:"invalid",text:i18n("Введен неверный пароль")}],props:{name:"Password",type:"password",placeholder:i18n("Пароль"),required:"required",autocomplete:"off"}};a.fields.push(c)}catch(d){B(d.message)}return b}})(a);(function(a){var b=a;m["b-login__restore"]=function(a){var b="";try{var c={block:"b-grid",mods:["in-row","restore"].concat(a.additionalMods),params:{mods:["form","restore"],rows:[[{type:"block",value:"b-link",params:{mods:["passremind"],href:a.urls.passremindUrl,title:i18n("Забыли пароль?"),target:"_blank",mnemo:"passremind"}},{type:"block",value:"b-checkbox",params:{label:i18n("запомнить"),checked:true,props:{name:"saveauth",type:"checkbox",value:1,"data-blockid":"saveauth","data-name":"saveauth","data-bem":"b-input"},mnemo:"saveauth"}}]]}};a.fields.push(c)}catch(d){B(d.message)}return b}})(a);(function(a){var b=a;m["b-login__captcha"]=function(a){var b="";try{if(a.captcha){var c;c={block:"b-captcha",mods:["in-row","block","placehoder-only-phone","noborder","zero-horizontal-paddings"].concat(a.additionalMods),src:a.urls.captchaUrl,refresh:"Не вижу код",description:"Код с картинки",errors:[{type:"required",text:i18n("Код с картинки должен быть заполнен")},{type:"invalid",text:i18n("Вы ввели неправильный код с картинки")}],props:{name:"captcha",placeholder:i18n("Введите код с картинки"),required:true}};a.fields.push(c)}}catch(d){B(d.message)}return b}})(a);(function(a){var b=a;m["b-login__providers"]=function(a){var b="";try{var c=["in-row","no-errors"];if(a.mods.includes("responsive")){c.push("responsive")}a.fields.push({block:"b-email-providers",mods:c,providers:[{id:"mailru",value:"mail.ru",selected:true},{id:"yandexru",value:"yandex.ru"},{id:"gmailcom",value:"gmail.com"},{id:"yahoocom",value:"yahoo.com"},{id:"other",value:"other",text:i18n("Другой")}]})}catch(d){B(d.message)}return b}})(a);(function(a){var b=a;m["b-login__submit-btn"]=function(a){var b="";try{var c={block:"btn",mods:["stylish","main","single","fluid","form"].concat(a.additionalMods),name:"submit"};var d={block:c.block,mods:c.mods,name:c.name,text:i18n("Войти"),classes:"b-login__submit-btn"};var e={block:c.block,mods:c.mods,name:c.name,text:i18n("Продолжить"),classes:"b-login__submit-btn next"};var f={mods:["login","in-row","submit_btn","hide-message"].concat(a.additionalMods),block:"b-btn-social",btns:[d,e],text:i18n("или"),socials:a.socials.filter(function(a){"use strict";return a.active}),message:" "};a.fields.push(f)}catch(g){B(g.message)}return b}})(a);(function(a){var b=a;m["b-choice-item"]=function(a){var b="";b+="<div";g="class-attribute";n={};try{n={baseClass:"b-choice-item",classes:a.item.active?["b-choice-item_selected"]:[],mods:a.hidden?["hidden"]:[]}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+=' data-bem="b-choice-item" data-model="';try{b+=I(JSON.stringify(a))}catch(c){B(c.message+"13")}b+='"';try{h=!a.item.active}catch(c){h=false;B(c.message)}if(h){b+=' data-name="switch" data-email="';try{b+=I(a.email)}catch(c){B(c.message+"19")}b+='"'}b+=">";g="b-choice-item__user";n={};try{n=a.item}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);try{h=a.item.active}catch(c){h=false;B(c.message)}if(h){g="b-choice-item__submit";n={};try{n=a.form}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}b+="</div>";return b}})(a);(function(a){var b=a;m["b-choice-item__user"]=function(a){var b="";b+='<div class="b-choice-item__user">';g="b-dropdown__item-correspondent";n={};try{n=a}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>";return b}})(a);(function(a){var b=a;m["b-choice-item__submit"]=function(a){var b="";b+='<div class="b-choice-item__submit">';g="b-form";n={};try{n=a}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>";return b}})(a);(function(a){var b=a;m["b-choice"]=function(a){var b="";try{var c="filin.mail.ru";var d=[],e=[],f,i;d.push({block:"b-input",mods:["hidden"],props:{name:"new_auth_form",type:"hidden",value:"1"}});d.push({block:"b-input",mods:["hidden"],props:{name:"Login",type:"hidden",value:a.email}});d.push({block:"b-input",mods:["hidden"],props:{name:"Page",type:"hidden",value:a.urls.page}});if(a.testId){d.push({block:"b-input",mods:["hidden"],props:{name:"test_id",type:"hidden",value:a.testId}})}if(/e\.mail\.ru/.test(a.urls.page)){d.push({block:"b-input",mods:["hidden"],props:{name:"back",type:"hidden",value:1}})}d.push({block:"b-input",mods:["hidden"],props:{name:"FromAccount",type:"hidden",value:1}});if(a.fakeauth_url){d.push({block:"b-input",mods:["hidden"],props:{name:"FakeAuth",type:"hidden",value:a.fakeauth_url}})}f={name:"choice",block:"b-form",action:a.urls.authOrigin+"/cgi-bin/auth"+"?from="+(a.opener==="default"?"login":a.opener),method:"post",target:"_parent",fields:d,nativesubmit:true};if(a.mode!=="simple"){f.additionalMods=["responsive"]}var j;var l=a.email;j=a.multiacc;var o=false;j.forEach(function(a){if(o)return;if(a.email===l){a.active=true}});if(l&&!o){j.unshift({name:"",email:l,active:true})}a.items=j.map(function(a){var b="//"+c+"/pic?width="+32+"&height="+32+"&email="+a.email;return Object.assign({},a,{pic:'background-image: url("'+b+'")'})});e=a.items.filter(function(a){if(a.active){i=a;return false}return true})}catch(p){B(p.message)}b+="<div";g="class-attribute";n={};try{n={baseClass:"b-choice",mods:a.hidden?["hidden"]:[]}}catch(p){B(p.message)}k=m[g];if(k)b+=G(k,n,false);b+=' data-bem="b-choice" data-mnemo="choice" data-model="';try{b+=I(JSON.stringify(a))}catch(p){B(p.message+"15")}b+='">';g="b-choice__header";n={};try{n={items:e,email:a.email}}catch(p){B(p.message)}k=m[g];if(k)b+=G(k,n,false);try{h=i}catch(p){h=false;B(p.message)}if(h){g="b-choice__password";n={};try{n=f}catch(p){B(p.message)}k=m[g];if(k)b+=G(k,n,false);g="b-choice-item";n={};try{n={item:i,form:f}}catch(p){B(p.message)}k=m[g];if(k)b+=G(k,n,false)}b+='<div class="b-choice__wrapper">';var q,r,s,t;try{t=e||[];s=t.length}catch(p){t=[];s=0;B(p.message)}for(q=0;q<s;q++){r=t[q];g="b-choice-item";n={};try{n={item:r}}catch(p){B(p.message)}k=m[g];if(k)b+=G(k,n,false)}b+="</div>";g="b-choice__footer";n={};try{n=a}catch(p){B(p.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>";return b}})(a);(function(a){var b=a;m["b-choice__password"]=function(a){var b="";try{var c,d,e;d={block:"b-input",mods:["password","in-row"].concat(a.additionalMods),label:null,errors:[{type:"required",text:i18n("Поле «Пароль» должно быть заполнено")},{type:"invalid",text:i18n("Введен неверный пароль")}],props:{name:"Password",type:"password",placeholder:i18n("Пароль"),required:"required",autocomplete:"off","data-blockid":"password"}};c={mods:["stylish","main","single","fluid","form"].concat(a.additionalMods),name:"submit",text:i18n("Войти")};if(!a.captcha){e={block:"b-input-btn",mods:["in-row","password"].concat(a.additionalMods),errors:d.errors,props:d.props,input:d,btn:c}}else{d.mods.push("in-row");e=d}a.fields.push(e)}catch(f){B(f.message)}return b}})(a);(function(a){var b=a;m["b-choice__header"]=function(a){var b="";b+='<div class="b-choice__header"><div class="b-choice__header__title">';try{b+=i18n("Выбор почтового ящика")}catch(c){B(c.message+"5")}b+='</div><div class="b-choice__header__desc">';try{h=a.email}catch(c){h=false;B(c.message)}if(h){try{h=a.items.length>1}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Вы вышли из")}catch(c){B(c.message+"13")}try{b+=I(a.email)}catch(c){B(c.message+"13")}try{b+=i18n(". Войдите снова или выберите один из других ваших ящиков:")}catch(c){B(c.message+"13")}}else{try{b+=i18n("Вы вышли из")}catch(c){B(c.message+"16")}try{b+=I(a.email)}catch(c){B(c.message+"16")}try{b+=i18n(". Войдите снова:")}catch(c){B(c.message+"16")}}}else{try{h=a.items.length}catch(c){h=false;B(c.message)}if(h){try{b+=i18n("Выберите один из ваших ящиков:")}catch(c){B(c.message+"24")}}else{try{b+=i18n("У вас нет доступных аккаунтов.")}catch(c){B(c.message+"27")}}}b+="</div></div>";return b}})(a);(function(a){var b=a;m["b-choice__footer"]=function(a){var b="";try{var c={text:i18n("Войти в другой ящик"),mods:["stylish","fluid","form"].concat(a.additionalMods),name:"signin"}}catch(d){B(d.message)}b+='<div class="b-choice__footer">';g="btn";n={};try{n=c}catch(d){B(d.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>";return b}})(a);(function(a){var b=a;m["b-header"]=function(a){var b="";try{f[0]=I(a.mods&&a.mods.length?" b-header_"+a.mods.join(" b-header_"):"")}catch(c){f[0]="";B(c.message)}b+='<div class="b-header'+f[0]+'"><div class="b-header__portal">';try{b+=a.headline}catch(c){B(c.message+"4")}b+='</div><div class="b-header__main"><div class="b-header__left"><div class="b-header__left__inner">';g="b-header__logo";n={};try{n=a.logo}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div></div>";try{h=a.items}catch(c){h=false;B(c.message)}if(h){b+='<div class="b-header__center">';var d,e,i,j;try{j=a.items||[];i=j.length}catch(c){j=[];i=0;B(c.message)}for(d=0;d<i;d++){e=j[d];g="b-header__button";n={};try{n=e}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}b+="</div>"}b+='<div class="b-header__right"><div class="b-header__right__inner">';try{h=a.menu}catch(c){h=false;B(c.message)}if(h){g="b-dropdown";n={};try{n=a.menu}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false)}b+='</div></div></div><div class="b-header__shadow"></div></div>';return b}})(a);(function(a){var b=a;m["b-header__logo"]=function(a){var b="";try{f[0]=I(a.href)}catch(c){f[0]="";B(c.message)}try{f[1]=I(a.target)}catch(c){f[1]="";B(c.message)}b+='<a href="'+f[0]+'" target="'+f[1]+'" class="b-header__logo">';try{f[0]=I(a.img)}catch(c){f[0]="";B(c.message)}try{f[1]=I(a.alt)}catch(c){f[1]="";B(c.message)}b+='<img src="'+f[0]+'" alt="'+f[1]+'" class="b-header__img"/></a>';return b}})(a);(function(a){var b=a;m.view=function(a){var b="";b+='<div id="view" class="view">';g="rb";n={};try{n={id:22345996,type:"d"}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);try{var d=["service","login"];if(a.mode==="simple"){d.push("fullscreen")}else{d.push("responsive")}}catch(c){B(c.message)}g="b-panel";n={};try{n={mods:d,view:a.view,close:a.mode=="simple"&&!a.modal,header:a.header,desc:a.desc,content:{focus:a.focus,errno:a.errno,fail:a.fail,abfsecond:a.abfsecond,email:a.email,captcha:a.captcha,title:a.title,urls:a.urls,isAuthorized:a.isAuthorized,login:a.login,mode:a.mode,socials:a.socials,success:a.success,allow_external:a.allow_external,restore:a.restore,fail_page:a.fail_page,opener:a.opener,multiacc:a.multiacc,fakeAuthPage:a.fakeAuthPage,rbTestId:a.rbTestId,rbSiteZone:a.rbSiteZone,csrf:a.csrf}}}catch(c){B(c.message)}k=m[g];if(k)b+=G(k,n,false);b+="</div>";return b}})(a);(function(a){var b=a;m.rb=function(a){var b="";try{f[0]=I(a.type)}catch(c){f[0]="";B(c.message)}try{f[1]=I(a.id)}catch(c){f[1]="";B(c.message)}try{f[2]=I((new Date).getTime())}catch(c){f[2]="";B(c.message)}b+='<img src="//rs.mail.ru/'+f[0]+""+f[1]+".gif?rnd="+f[2]+'" style="display:none;"/>';return b}})(a)})(a);try{g=J.block}catch(K){g="";B(K.message)}n={};try{n=J.params}catch(K){B(K.message)}d.push(c,{name:g,params:n,cp:false});c="";j=d.length;if(j){i=0;for(;i<j;i++){e=d[i];if(typeof e==="string"){l+=e}else{k=m[e.name];if(k)l+=G(k,e.params,e.cp)}}return l+c}else{return c}};define("../cache/templates/lego.js",function(){});